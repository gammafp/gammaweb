{"version":3,"sources":["Views/AtlasPacker/components/render/Render.tsx","Redux/Actions/Atlas/images.action.ts","utils/checkImageRepeatedName.ts","utils/preventImageNameDuplicate.ts","Redux/Actions/globals.actions.ts","Redux/Reducers/Atlas/imagesAtlas.reducer.ts","Redux/Actions/Atlas/zoom.action.ts","Redux/Reducers/Atlas/zoom.reducer.ts","Redux/Actions/Atlas/contextSideMenu.action.ts","Redux/Reducers/Atlas/contextSideMenu.reducer.ts","Redux/Actions/Atlas/algorithmPanel.action.ts","Redux/Reducers/Atlas/algorithmPanel.reducer.ts","Redux/Actions/Animator/zoom.anim.action.ts","Redux/Reducers/Animator/zoom.anim.reducer.ts","Redux/Reducers/Animator/atlas.anim.reducer.ts","Redux/Actions/Animator/atlas.anim.action.ts","Redux/Actions/Animator/animation.list.action.ts","utils/checkAnimationRepeatedName.ts","utils/preventAnimationNameDuplicate.ts","Redux/Reducers/Animator/animation.list.reducer.ts","Redux/Actions/Animator/frames.list.action.ts","Redux/Reducers/index.ts","Redux/Reducers/Atlas/maxrect.reducer.ts","Redux/Actions/Atlas/maxrect.action.ts","Redux/Store/store.ts","utils/clearNames.ts","utils/generateId.ts","constants/acceptFormatImages.ts","Views/AtlasPacker/Observer.ts","utils/getImages.ts","Views/AtlasPacker/components/menu/ImportButton.component.tsx","utils/getGifFrames.ts","Views/AtlasPacker/components/menu/Menu.tsx","Views/AtlasPacker/components/cardImage/CardImage.tsx","Views/AtlasPacker/components/contextMenu/ContextMenu.tsx","Views/AtlasPacker/components/exportButtons/ExportButton.tsx","Views/AnimationTool/components/buttons/Buttons.jsx","Views/AtlasPacker/components/zoom/Zoom.tsx","Views/AtlasPacker/components/algorithm/Algorithm.tsx","utils/b64toBlob.ts","Views/AtlasPacker/components/render/RenderScene.ts","utils/prepareJSON.ts","utils/maxRectTool.ts","Views/AtlasPacker/components/modals/exportModal/ExportModal.tsx","utils/createAtlasJSON.ts","utils/createExportZipAtlas.ts","Views/AtlasPacker/components/modals/importAtlas/atlasRender/ImportAtlasRenderScene.ts","Views/AtlasPacker/components/modals/importAtlas/atlasRender/ImportAtlasRender.tsx","utils/getFilesText.ts","utils/isPhaserAtlas.ts","Views/AtlasPacker/components/modals/importAtlas/ImportAtlas.tsx","Views/AtlasPacker/components/notifications/ToastNotification.tsx","Views/AtlasPacker/components/dragDropFiles/DragDropFiles.tsx","Views/AtlasPacker/components/modals/spinnerModal/SpinnerModal.tsx","Views/AtlasPacker/AtlasPacker.tsx","Views/AnimationTool/components/frames/Frames.tsx","Views/AtlasPacker/components/modals/importGifs/ImportGifs.tsx","Views/AtlasPacker/components/modals/patreonModal/PatreonModal.tsx","Views/AnimationTool/Observer.ts","utils/isPhaserAnimationJSON.ts","utils/generateRandomColors.ts","Views/AnimationTool/components/menu/Menu.tsx","utils/getImagesNameGroup.ts","Views/AnimationTool/components/imgList/ImgList.tsx","Views/AnimationTool/components/animationList/AnimationList.tsx","Views/AnimationTool/components/keyTools/zoomSection/ZoomSection.tsx","Views/AnimationTool/components/keyTools/KeyTools.tsx","Views/AnimationTool/components/framesKeyControls/FramesKeyControls.tsx","Views/AnimationTool/components/renderAnimation/RenderAnimationScene.ts","Views/AnimationTool/components/renderAnimation/RenderAnimation.tsx","utils/getImagesFromAtlas.ts","Views/AnimationTool/components/modals/ImportAtlasForm.tsx","Views/AnimationTool/components/contextMenu/ContextMenu.tsx","Views/AnimationTool/components/notifications/ToastNotificationAnimation.tsx","Views/AnimationTool/components/exportButtons/ExportButton.tsx","Views/AnimationTool/AnimationTool.tsx","App.tsx","serviceWorker.ts","index.tsx","Vendor/become_patreon.png","Vendor/logo.gif","Vendor/gammix_oran.png"],"names":["_scrollBarRef","AddImage","payload","type","EditingImageName","SelectImage","checkImageRepeatedName","image","imageAtlas","store","getState","imagesAtlas","find","compImage","name","id","preventImageNameDuplicate","imageData","imageCopy","iterations","initialName","RESET_ALL","ResetAllAnimationAction","defaultImagesData","setZoomAction","defaultZoomData","value","ActivateSideContextMenuAction","CloseSideContextMenuAction","defaultContextMenuData","x","y","active","actionAlgorithmPanel","defaultAlgorithmPanelData","width","height","size","extrusion","separation","setZoomAnimAction","zoomAnim","state","action","defaultAtlasData","json","animation","atlasAnim","ActivateAnimation","SwipeAnimationsAction","PlayStopAction","checkAnimationRepeatedName","animationList","AnimationList","animations","compAnimation","preventAnimationNameDuplicate","animationData","animationCopy","defaultAnimationList","actual_animation","map","play","key_controls","new_state","filter","length","frames","frame","push","sprite","local_id","state_animations","rootReducer","combineReducers","forEach","newState","changeName","contextSideMenuAtlas","zoomAtlas","algorithmPanelAtlas","maxrectAtlas","createStore","composeWithDevTools","clearName","letters","chars","toString","toLowerCase","replace","m","split","trim","trimLeft","trimRight","trimEnd","generateId","i","out","Math","random","Date","now","pref","nextId","round","acceptFormatImages","Observer","EventEmitter","GLOBAL_EVENT","IMAGE_CHARGED","IMAGE_CHARGED_COMPLETE","ZOOM_CHANGED","EXTRUSION_CHANGED","PANEL_RESIZE_END","IMAGE_SELECTED","IMAGE_DES_SELECTED","OPEN_EXPORT_OPTIONS_PC","REQUEST_IMAGE_CANVAS","IMAGE_CANVAS_EXPORTED","IMPORT_ATLAS","OPEN_ATLAS_IMPORT","OPEN_ATLAS_IMPORT_SEND_IMAGE","CLOSE_ATLAS_IMPORT","CHANGE_IMPORT_ATLAS_STATE","IMPORT_ATLAS_GRID_BUTTON","IMPORT_ATLAS_JSON","IMPORT_GIF","NOTIFICATION_SYSTEM","SUCCESS","WARNING","ERROR","CLEAR","SPINNER","OPEN","CLOSE","RESET_ATLAS","getImageFiles","files","Promise","resolve","reject","Files","Array","from","file","emit","append","includes","FilesOut","reader","FileReader","onload","fileURL","finalFile","target","img","Image","src","result","origin","URL","createObjectURL","readAsDataURL","ImportButton","props","Fragment","className","children","accept","multiple","onChange","event","a","async","files_loaded","loadImages","gifFrames","require","getGifFrames","url","success","error","quality","outputType","cumulative","err","frameData","getImage","toDataURL","MenuComponent","dispatch","useDispatch","href","images","join","gif","all_gifs","gif_object","srcs","onClick","rel","Patreon","alt","CardImage","useSelector","handleInputBlur","options","name_trimmed","isEmpty","handleSelectImage","index","key","onContextMenu","clientX","clientY","autoFocus","onFocus","select","defaultValue","onKeyPress","currentTarget","handleKeyPress","onBlur","maxLength","onDoubleClick","cambio","ContextMenu","sideMenuContext","fadeIn","contextMenuClassName","positionXYMenu","top","globalThis","innerHeight","left","closeMenu","style","e","preventDefault","document","querySelector","classList","add","setTimeout","onUpdateSize","ExportButton","imagesFiles","handleClick","title","button_styles","css","color","border","borderRadius","lineHeight","fontSize","minWidth","textAlign","cursor","AddButton","text_button","undefined","Zoom","zoomPercent","handleInputZoom","percentInput","numberPercent","Number","Algorithm","algorithmPanel","min","max","b64toBlob","b64DataIn","contentType","sliceSize","b64Data","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","RenderScene","images_group","extrusion_objects","temp_images_key","new_images","graphics","removeListener","this","lineStyle","fillStyle","setDepth","tweens","targets","alpha","ease","yoyo","repeat","duration","on","scale","resize","refresh","updateScale","image_group","setScale","extrusion_object","pixels","pixel","game","renderer","snapshot","src_original","data","zoom_size","setZoom","textures","each","textures_key","startsWith","load","start","MaxRectGrid","different","symmetricDifference","removeTextures","new_image","setOrigin","setName","setInteractive","Phaser","Events","POINTER_DOWN","event_mouse","buttons","select_a_image","activate_context_menu","setGameSize","rects","rect","createExtrusion","reset_images_selected","button","create_image_selected","Rectangle","strokeRectShape","clear","removeExtrusion","extrusion_size","get","getSourceImage","canvas","createCanvas","draw","Color","extrusion_objects_temp","getPixel","positionX","positionY","pixel_extruded","rectangle","destroy","remove","textureName","image_to_destroy","prepareJSON","obj","MaxRectTool","spritePerRow","MaxRect","bins","padding","yGrid","ceil","yJump","maxHeight","jsonOutput","Render","canvas_container","createRef","zoom_step","handleWheel","bind","updateScroll","deleteGame","setGame","scroll","scrollLeft","movementX","scrollTop","movementY","ctrlKey","zoom","abs","deltaY","toPrecision","stopPropagation","algorithm","smart","pot","square","allowRotation","tag","packer","MaxRectsPacker","Entrada","addArray","MaxRectRedux","setMaxRect","renderConfig","parent","CANVAS","backgroundColor","dom","createContainer","banner","hidePhaser","audio","noAudio","render","pixelArt","scene","Game","current","addEventListener","passive","registry","events","Scenes","READY","getScene","maxRectPacker","algorithm_panel_change","difference","new_zoom","ref","onMouseMove","handleDrag","display","draggable","Component","mapDispatchToProps","connect","ExportModal","handleName","setState","form","handleScale","handleClickOk","handleCloseModal","open","onClose","closeOnOverlayClick","center","classNames","outline","styles","marginTop","htmlFor","PureComponent","createAtlasJSON","atlasJSON","sprite_data","filename","w","h","anchor","meta","description","web","JSON","stringify","createExportZipAtlas","atlas_original","atlas_scaled","zip","base64","folder_original","folder","calculateGrid","grid_options","actual_position","floor","space","ImportAtlasRenderScene","canvas_size","lineStrike","grid_width","grid_height","zoom_scale","block","createGrid","cutSprites","atlas_json","once","COMPLETE","load_complete","grid","pos_x","pos_y","console","log","ImagesData","Object","keys","getFrame","src_b64","getBase64","resetZoom","atlas","parse","spritesheet","frameWidth","frameHeight","margin","spacing","_scrollBarRefAtlas","ImportAtlasRender","getFilesText","readAsBinaryString","isPhaserAtlas","isAtlas","have_frames","search","have_frame","ImportAtlas","canva_atlas_container","parcentInput","finalZoom","sendState","handleImportAltas","ToastNotification","msg","toast","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","dismiss","DragDropFiles","dragBox","useRef","imagesState","handleDragEnterOver","onDragEnter","onDragOver","onDragLeave","onDrop","dataTransfer","last_frame_div","override","spinner_styles","CSS","zIndex","justifyContent","alignItems","SpinnerModal","useState","loading","setLoading","useEffect","ImportGifs","default_gifs","gifs","handleAddGif","suppressScrollX","React","PatreonModal","GammixOrange","float","AtlasPacker","handleClickContainerAtlas","DesSelectImage","exportModalOpen","removeAllListeners","ResetImage","ResetAlgorithmAction","ResetMaxRectAction","ResetZoomAction","image_canvas_data","generateAsync","saveAs","onClickCapture","Menu","defaultSizes","minSize","onDragFinished","ObserverAnim","GLOBAL_EVENT_ANIM","SET_ZOOM","CHANGE_OR_CREATE_ANIMATION_CONTAINER","ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER","UPDATE_FRAMES","isPhaserAnimationJSON","have_anims","have_frameRate","generateRandomColors","colors","final_color","Between","disable","opacity","atlas_anim","anim_json","anims","anim","frame_rate","frameRate","reduce","prevFrame","currentFrame","local_frame","getImagesNamesGroup","images_list","prev","current_name","click_selected","ImgList","images_name","animation_list","propEq","active_frame","perfect_scroll","frame_position","offsetTop","html_element","button_disable","AddAnimation","setAddAnimation","EditAnimationName","setEditAnimationName","actualBoxColor","saveText","name_in","editText","onKeyDown","list","setList","equals","swap","handleInputBlurEditName","ZoomSection","KeyTools","FramesKeyControlInput","FramesKeyControls","change_key_controls","keyCode","Frames","frames_list_state","frames_list","actual_animation_list","frame_div","getElementById","offsetLeft","RenderAnimationScene","name_atlas","animate_atlas","animation_name","actual_frame","tint","atlas_object","Loader","setCanvasSize","setTint","animation_in","create_animation","stop","frames_name","generateFrameNames","create","frame_active_index","findIndex","verify_active_index","newTexture","textureFrame","setTexture","clearTint","output","isPlaying","current_frame","id_to_frame","Scene","RenderAnimation","game_config","WEBGL","scrollBarAnimRef","comprobateSize","container_panel","canvas_width","clientWidth","canvas_height","clientHeight","paddingTop","paddingBottom","GetImagesFromAtlasPhaser","name_spritesheet","parent_id","image_config","texturesKeys","texture","textureB64","getImagesFromAtlas","divElement","createElement","setAttribute","body","appendChild","atlas_group","removeChild","isImportComplete","ImportAtlasForm","open_modal_import_atlas","open_by_state","setOpen_by_state","atlas_state","is_all_complete","is_frames_secction","innerWidth","DeleteAnimationAction","ToastNotificationAnimation","atlas_name","AnimationTool","alert","App","exact","path","component","Boolean","window","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.ac31031b.chunk.js","sourcesContent":["import React, { Component, createRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n// Libs\r\nimport { difference } from 'ramda';\r\nimport { MaxRectsPacker, IOption, Rectangle } from 'maxrects-packer';\r\n\r\n// CSS\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport './Render.scss';\r\n\r\n// Componentes\r\nimport RenderScene from './RenderScene';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// Redux\r\nimport { setZoomAction, ZoomData } from '../../../../Redux/Actions/Atlas/zoom.action';\r\nimport { ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { payloadAlgorithmPanel } from '../../../../Redux/Actions/Atlas/algorithmPanel.action';\r\nimport { setMaxRect } from '../../../../Redux/Actions/Atlas/maxrect.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\n// Utils\r\nimport prepareJSON from '../../../../utils/prepareJSON';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { MaxRectTool } from '../../../../utils/maxRectTool';\r\n\r\ninterface propsData {\r\n    zoom: number;\r\n    images: ImageData[];\r\n    algorithmPanel: payloadAlgorithmPanel;\r\n    setZoomAction: (value: ZoomData) => void;\r\n    setMaxRect: (value: any) => void;\r\n}\r\n\r\nlet _scrollBarRef: any;\r\nclass Render extends Component<propsData> {\r\n    game: any;\r\n    canvas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    // Zoom step\r\n    zoom_step: number = 20;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n\r\n        Observer.on(GLOBAL_EVENT.PANEL_RESIZE_END, () => {\r\n            _scrollBarRef.updateScroll();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.RESET_ATLAS, () => {\r\n            this.deleteGame();\r\n            this.setGame();\r\n        });\r\n\r\n    }\r\n\r\n    handleDrag(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        if (!!event.buttons) {\r\n            const scroll = document.querySelector('.scrollContainer') as HTMLDivElement;\r\n            scroll.scrollLeft = scroll.scrollLeft - event.movementX;\r\n            scroll.scrollTop = scroll.scrollTop - event.movementY;\r\n            _scrollBarRef.updateScroll();\r\n        }\r\n    }\r\n\r\n    handleWheel(event: any): void {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.props.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom >= 20 && zoom <= 500) {\r\n                    value = Number((zoom - this.zoom_step * event.deltaY / Math.abs(event.deltaY)).toPrecision(2));\r\n                    value = value < 20 ? value = 20 : value > 500 ? value = 500 : value;\r\n                }\r\n            }\r\n            this.props.setZoomAction({ value });\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    maxRectPacker(data: any, algorithm: string) {\r\n        const extrusion = this.props.algorithmPanel.separation + this.props.algorithmPanel.extrusion * 2;\r\n        const border = this.props.algorithmPanel.separation + this.props.algorithmPanel.extrusion;\r\n        const options: IOption = {\r\n            smart: true,\r\n            pot: false,\r\n            square: false,\r\n            allowRotation: false,\r\n            tag: false,\r\n            border\r\n        };\r\n\r\n        let packer = (algorithm === 'maxrect') ?\r\n            new MaxRectsPacker(this.props.algorithmPanel.width, this.props.algorithmPanel.height, extrusion, options) :\r\n            new MaxRectTool(this.props.algorithmPanel.size, border);\r\n\r\n        let Entrada: Rectangle[] = prepareJSON(data);\r\n        packer.addArray(Entrada);\r\n        const MaxRectGrid: any = packer.bins[0];\r\n        const MaxRectRedux = MaxRectGrid.rects;\r\n        this.props.setMaxRect(MaxRectRedux);\r\n\r\n        return MaxRectGrid;\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.deleteGame();\r\n    }\r\n\r\n    deleteGame() {\r\n        if (this.game !== undefined) {\r\n            (this.game as Phaser.Game).destroy(true);\r\n            this.game = undefined;\r\n        }\r\n    }\r\n\r\n    setGame() {\r\n        const renderConfig = {\r\n            width: 0,\r\n            height: 0,\r\n            parent: 'render',\r\n            type: Phaser.CANVAS,\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            dom: {\r\n                createContainer: true\r\n            },\r\n            banner: {\r\n                hidePhaser: true\r\n            },\r\n            audio: {\r\n                noAudio: true\r\n            },\r\n            render: {\r\n                pixelArt: true\r\n            },\r\n            scene: [RenderScene]\r\n        };\r\n        this.game = new Phaser.Game(renderConfig);\r\n         // Sistema de zoom, se agrega el evento para escuchar la rueda del ratón\r\n         this.canvas_container.current?.addEventListener('wheel', this.handleWheel, { passive: false });\r\n         // Evento de carga para Phaser canvas\r\n         /**\r\n          * Cuando se cargan las escenas Phaser nos envía el evento Ready.\r\n          * Nosotros emitimos el evento de IMAGE_CHARGED para cargar elas imágenes.\r\n          * Cuando se complete Phaser nos responde con que las imágenes están completas en su cache\r\n          * Nosotros emitimos el evento IMAGE_CHARGED_COMPLETE para asignar el maxrect\r\n          */\r\n         this.game.registry.events.on(Phaser.Scenes.Events.READY, () => {\r\n             Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED, this.props.images);\r\n             this.game.scene.getScene('RenderScene').load.on('complete', () => {\r\n                 // Corrección cuando se borran todas las imagenes para que no falle la aplicación.\r\n                 if (this.props.images.length >= 1) {\r\n                     const MaxRectGrid = this.maxRectPacker(this.props.images, this.props.algorithmPanel.type);\r\n                     Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, MaxRectGrid);\r\n                 } else if (this.props.images.length <= 0) {\r\n                     this.props.setMaxRect([]);\r\n                     Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, undefined)\r\n                 }\r\n                 _scrollBarRef.updateScroll()\r\n             });\r\n         });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setGame();\r\n\r\n       \r\n    }\r\n\r\n    componentDidUpdate(state: propsData) {\r\n        const algorithm_panel_change = difference([state.algorithmPanel], [this.props.algorithmPanel]).length;\r\n        if (state.images.length !== this.props.images.length || algorithm_panel_change >= 1) {\r\n            Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED, this.props.images);\r\n        }\r\n        if (state.zoom !== this.props.zoom) {\r\n            const new_zoom: number = this.props.zoom / 100;\r\n            Observer.emit(GLOBAL_EVENT.ZOOM_CHANGED, new_zoom);\r\n        }\r\n        _scrollBarRef.updateScroll();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lienzo\" ref={this.canvas_container}>\r\n                <PerfectScrollbar className=\"scrollContainer\" ref={(ref) => { _scrollBarRef = ref }}>\r\n                    <div id=\"render\" onMouseMove={this.handleDrag} style={{ display: (this.props.images.length <= 0) ? 'none' : 'block' }}></div>\r\n                    <div className=\"logo noselect\">\r\n                        <img src={require('../../../../Vendor/logo.gif')} alt=\"logo\" draggable={false} style={{ display: (this.props.images.length >= 1) ? 'none' : 'block' }} />\r\n                    </div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {\r\n        zoom: state.zoomAtlas.value,\r\n        images: state.imagesAtlas,\r\n        algorithmPanel: state.algorithmPanelAtlas\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    setZoomAction,\r\n    setMaxRect\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Render);","\r\nexport const CHANGE_NAME = \"CHANGE_NAME\";\r\nexport const ADD_IMAGES = \"ADD_IMAGES\";\r\nexport const SELECT_IMAGE = \"SELECT_IMAGE\";\r\nexport const DELETE_IMAGE = \"DELETE_IMAGE\";\r\n\r\nexport const DES_SELECT_IMAGE = \"DES_SELECT_IMAGE\";\r\nexport const EDITING_IMAGE_NAME = \"EDITING_IMAGE\";\r\nexport const CLOSE_EDITING_IMAGE = \"CLOSE_EDITING_IMAGE\";\r\nexport const RESET_IMAGES = \"RESET_IMAGES\";\r\n\r\n// Interfaces\r\nexport interface ImageData {\r\n    id: string;\r\n    name?: string;\r\n    width: number;\r\n    height: number;\r\n    size: number;\r\n    src: string;\r\n    active: boolean;\r\n    changeName: boolean;\r\n    origin: { x: number, y: number }\r\n}\r\n\r\nexport interface AddImageAction {\r\n    type: string,\r\n    payload: ImageData[]\r\n}\r\n\r\nexport type ImageDataCRUD = Pick<ImageData, \"id\" | \"name\">;\r\n\r\nexport interface ImageCRUD {\r\n    type: string;\r\n    payload: ImageDataCRUD\r\n}\r\n\r\n// Constantes de las acciones\r\nexport const AddImage = (payload: ImageData[]): AddImageAction => {\r\n    return {\r\n        type: ADD_IMAGES,\r\n        payload\r\n    };\r\n}\r\n\r\n/**\r\n * Nos ayuda a cambiar el nombre de las cards de imágenes\r\n * @param payload \\{ id: string, name: string }\r\n */\r\nexport const ChangeImageName = (payload: ImageDataCRUD): ImageCRUD => {\r\n    // console.log('Action: ', payload)\r\n    return {\r\n        type: CHANGE_NAME,\r\n        payload\r\n    }\r\n}\r\n/**\r\n * Nos ayuda a seleccionar el nombre para editarlo\r\n * @param payload \\{ id: string }\r\n */\r\nexport const EditingImageName = (payload: ImageDataCRUD): ImageCRUD => {\r\n    return {\r\n        type: EDITING_IMAGE_NAME,\r\n        payload\r\n    }\r\n}\r\n\r\n/**\r\n * Ayuda a cerrar el input de edición del nombre\r\n */\r\nexport const CloseEditingImage = () => {\r\n    return {\r\n        type: CLOSE_EDITING_IMAGE\r\n    }\r\n}\r\n\r\n/**\r\n * Nos ayuda a seleccionar una imagen\r\n */\r\nexport const SelectImage = (payload: ImageDataCRUD): ImageCRUD => {\r\n    return {\r\n        type: SELECT_IMAGE,\r\n        payload\r\n    }\r\n}\r\n\r\n/**\r\n * Nos ayuda a des-seleccionar una imagen\r\n */\r\nexport const DesSelectImage = () => {\r\n    return {\r\n        type: DES_SELECT_IMAGE\r\n    }\r\n}\r\n/**\r\n * Nos ayuda a borrar una imagen\r\n * @param payload \\{ id: string }\r\n */\r\nexport const DeleteImage = (payload: ImageDataCRUD): ImageCRUD => {\r\n    return {\r\n        type: DELETE_IMAGE,\r\n        payload\r\n    }\r\n}\r\n/**\r\n * El reset local de animaciones\r\n */\r\nexport const ResetImage = () => {\r\n    return {\r\n        type: RESET_IMAGES,\r\n    }\r\n}","import store from '../Redux/Store/store';\r\nimport { ImageData } from '../Redux/Actions/Atlas/images.action';\r\n\r\nconst checkImageRepeatedName = (image: ImageData, imageAtlas?: ImageData[]) => {\r\n    const imageData = imageAtlas ? imageAtlas : store.getState().imagesAtlas;\r\n    return imageData.find(compImage => image.name === compImage.name && image.id !== compImage.id);\r\n}\r\n\r\nexport default checkImageRepeatedName;","import store from '../Redux/Store/store';\r\nimport checkImageRepeatedName from './checkImageRepeatedName';\r\nimport { ImageData } from '../Redux/Actions/Atlas/images.action';\r\n\r\nconst preventImageNameDuplicate = (image: ImageData, imageAtlas?: ImageData[]) =>{\r\n    let imageData = imageAtlas ? imageAtlas : store.getState().imagesAtlas;\r\n    let imageCopy = image;\r\n    let iterations = 0;\r\n    let initialName = image.name;\r\n    while (checkImageRepeatedName(image, imageData)) {\r\n        iterations++;\r\n        imageCopy.name = `${initialName}${iterations}`;\r\n    }\r\n    return(imageCopy.name);\r\n}\r\n\r\nexport default preventImageNameDuplicate;","export const RESET_ALL: string = 'RESET_ALL';\r\n\r\nexport const ResetAllAnimationAction = () => ({\r\n    type: RESET_ALL\r\n});","import { ImageData, CHANGE_NAME, SELECT_IMAGE, EDITING_IMAGE_NAME, DELETE_IMAGE, CLOSE_EDITING_IMAGE, ADD_IMAGES, ImageCRUD, AddImageAction, DES_SELECT_IMAGE, RESET_IMAGES } from '../../Actions/Atlas/images.action';\r\nimport preventImageNameDuplicate from '../../../utils/preventImageNameDuplicate';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\n// import images_default from '../anim_images_test.json';\r\n\r\n// const defaultImagesData: ImageData[] = images_default;\r\nconst defaultImagesData: ImageData[] = [];\r\n\r\nexport default (state: ImageData[] = defaultImagesData, action: ImageCRUD & AddImageAction) => {\r\n    switch (action.type) {\r\n        case ADD_IMAGES: {\r\n            action.payload.forEach(image =>{\r\n                image.name = preventImageNameDuplicate(image, state);\r\n            });\r\n            return [...state, ...action.payload]\r\n        }\r\n        case CHANGE_NAME: {\r\n            const newState = state.map(image => (image.id === action.payload.id) ? (image.name = action.payload.name, image) : image);\r\n            return newState;\r\n        }\r\n        case SELECT_IMAGE: {\r\n            const newState = state.map(image =>\r\n                (image.id === action.payload.id)\r\n                    ? (image.active = true, image)\r\n                    : (image.active = false, image));\r\n            return newState;\r\n        }\r\n        case DES_SELECT_IMAGE: {\r\n            const newState = state.map(image => { return (image.active = false, image); });\r\n            return newState;\r\n        }\r\n        case EDITING_IMAGE_NAME: {\r\n            const newState = state.map(image =>\r\n                (image.id === action.payload.id)\r\n                    ? (image.changeName = true, image)\r\n                    : (image.changeName = false, image));\r\n            return newState;\r\n        }\r\n        case CLOSE_EDITING_IMAGE: {\r\n            const newState = state.map(image => {\r\n                if(image.changeName){\r\n                   image.name = preventImageNameDuplicate(image, state);\r\n                }\r\n                image.changeName = false;\r\n                return image\r\n            });\r\n            return newState;\r\n        }\r\n        case DELETE_IMAGE: {\r\n            return state.filter(image => (image.id !== action.payload.id));\r\n        }\r\n        case RESET_IMAGES: {\r\n            return defaultImagesData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultImagesData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","export const SET_ZOOM: String = 'SET_ZOOM';\r\nexport const RESET_ZOOM: String = 'RESET_ZOOM';\r\n\r\nexport interface ZoomData {\r\n    value: number\r\n}\r\n\r\nexport interface ZoomAction {\r\n    type: typeof SET_ZOOM,\r\n    payload: ZoomData\r\n}\r\n\r\nexport const setZoomAction = (payload: ZoomData): ZoomAction => {\r\n    return {\r\n        type: SET_ZOOM,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetZoomAction = () => {\r\n    return {\r\n        type: RESET_ZOOM\r\n    }\r\n}","import {SET_ZOOM, ZoomAction, ZoomData, RESET_ZOOM} from '../../Actions/Atlas/zoom.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultZoomData: ZoomData = {\r\n    value: 100\r\n}\r\n\r\nexport default (state: ZoomData = defaultZoomData, action: ZoomAction ) => {\r\n    switch (action.type) {\r\n        case SET_ZOOM: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultZoomData\r\n        }\r\n        case RESET_ZOOM: {\r\n            return defaultZoomData;\r\n        }\r\n        default: \r\n            return state;\r\n    }\r\n}","export const ACTIVATE_SIDE_CONTEXTMENU = 'ACTIVATE_SIDE_CONTEXTMENU';\r\nexport const CLOSE_SIDE_CONTEXTMENU = 'CLOSE_SIDE_CONTEXTMENU';\r\n\r\nexport interface ContextMenuData {\r\n    x: number,\r\n    y: number,\r\n    options?: {\r\n        value: string\r\n    }\r\n    active: boolean,\r\n    id: string\r\n}\r\n\r\nexport interface actionContextMenu {\r\n    type: string,\r\n    payload: ContextMenuData\r\n}\r\n\r\n/**\r\n * Nos ayuda a activar y desactivar el menú\r\n * @param payload \r\n */\r\nexport const ActivateSideContextMenuAction = (payload: ContextMenuData): actionContextMenu => {\r\n    return {\r\n        type: ACTIVATE_SIDE_CONTEXTMENU,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const CloseSideContextMenuAction = () => {\r\n    return {\r\n        type: CLOSE_SIDE_CONTEXTMENU\r\n    }\r\n}\r\n","\r\nimport {ContextMenuData, actionContextMenu, ACTIVATE_SIDE_CONTEXTMENU, CLOSE_SIDE_CONTEXTMENU} from '../../Actions/Atlas/contextSideMenu.action'\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultContextMenuData: ContextMenuData = {\r\n    id: '0',\r\n    x: 0,\r\n    y: 0,\r\n    active: false\r\n};\r\n\r\nexport default (state: ContextMenuData = defaultContextMenuData, action: actionContextMenu ) => {\r\n    switch (action.type) {\r\n        case ACTIVATE_SIDE_CONTEXTMENU: {\r\n            return action.payload\r\n        } \r\n        case CLOSE_SIDE_CONTEXTMENU: {\r\n            return defaultContextMenuData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultContextMenuData\r\n        }\r\n        default: \r\n            return state;\r\n    }\r\n}","export const ALGORITHM_PANEL_CHANGE = 'ALGORITHM_PANEL_CHANGE';\r\nexport const RESET_ALGORITHM_PANEL = 'RESET_ALGORITHM_PANEL';\r\n\r\nexport interface payloadAlgorithmPanel {\r\n    type: string,\r\n    width?: number,\r\n    height?: number,\r\n    size?: number,\r\n    extrusion: number,\r\n    separation: number\r\n};\r\n\r\nexport interface actionAlgorithmPanel {\r\n    type: string,\r\n    payload: payloadAlgorithmPanel\r\n}\r\n\r\nexport const actionAlgorithmPanel = (payload: payloadAlgorithmPanel): actionAlgorithmPanel => {\r\n    return {\r\n        type: ALGORITHM_PANEL_CHANGE,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetAlgorithmAction = () => {\r\n    return {\r\n        type: RESET_ALGORITHM_PANEL,\r\n    }\r\n}","import {ALGORITHM_PANEL_CHANGE, actionAlgorithmPanel, payloadAlgorithmPanel, RESET_ALGORITHM_PANEL} from '../../Actions/Atlas/algorithmPanel.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultAlgorithmPanelData: payloadAlgorithmPanel = {\r\n    type: 'maxrect',\r\n    width: 1024,\r\n    height: 1024,\r\n    size: 1,\r\n    extrusion: 0,\r\n    separation: 0\r\n}\r\n\r\nexport default (state: payloadAlgorithmPanel = defaultAlgorithmPanelData, action: actionAlgorithmPanel ) => {\r\n    switch (action.type) {\r\n        case ALGORITHM_PANEL_CHANGE: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultAlgorithmPanelData;\r\n        }\r\n        case RESET_ALGORITHM_PANEL: {\r\n            return defaultAlgorithmPanelData;\r\n        }\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n","export const SET_ZOOM_ANIM: String = 'SET_ZOOM_ANIM';\r\nexport const RESET_ZOOM_ANIM: String = 'RESET_ZOOM_ANIM';\r\n\r\nexport interface ZoomDataAnim {\r\n    value: number\r\n}\r\n\r\nexport interface ZoomAnimAction {\r\n    type: typeof SET_ZOOM_ANIM,\r\n    payload: ZoomDataAnim\r\n}\r\n\r\nexport const setZoomAnimAction = (payload: ZoomDataAnim): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ZOOM_ANIM,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetZoomAction = () => {\r\n    return {\r\n        type: RESET_ZOOM_ANIM\r\n    }\r\n}","import {SET_ZOOM_ANIM, ZoomAnimAction, ZoomDataAnim, RESET_ZOOM_ANIM} from '../../Actions/Animator/zoom.anim.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultZoomData: ZoomDataAnim = {\r\n    value: 100\r\n}\r\n\r\nconst zoomAnim = (state: ZoomDataAnim = defaultZoomData, action: ZoomAnimAction ) => {\r\n    switch (action.type) {\r\n        case SET_ZOOM_ANIM: {\r\n            return action.payload;\r\n        } \r\n        case RESET_ZOOM_ANIM: {\r\n            return defaultZoomData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultZoomData;\r\n        }\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default zoomAnim;","import { SET_ATLAS_IMAGE_ANIM, SET_ATLAS_JSON_ANIM, RESET_ATLAS_ANIM, SET_ATLAS_ANIM_ANIM } from \"../../Actions/Animator/atlas.anim.action\";\r\nimport { RESET_ALL } from \"../../Actions/globals.actions\";\r\n\r\nconst defaultAtlasData: any = {\r\n    image: {},\r\n    json: '',\r\n    animation: ''\r\n};\r\n\r\nconst atlasAnim = (state = defaultAtlasData, action: any ) => {\r\n    switch (action.type) {\r\n        case SET_ATLAS_IMAGE_ANIM: {\r\n            return {\r\n                ...state,\r\n                image: action.payload\r\n            };\r\n        } \r\n        case SET_ATLAS_JSON_ANIM: {\r\n            return {\r\n                ...state,\r\n                json: action.payload\r\n            };\r\n        } \r\n        case SET_ATLAS_ANIM_ANIM: {\r\n            return {\r\n                ...state,\r\n                animation: action.payload\r\n            };\r\n        } \r\n        case RESET_ATLAS_ANIM: {\r\n            return defaultAtlasData;\r\n        }\r\n        \r\n        case RESET_ALL: {\r\n            return defaultAtlasData;\r\n        }\r\n\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default atlasAnim;","export const SET_ATLAS_IMAGE_ANIM: String = 'SET_ATLAS_ANIM';\r\nexport const SET_ATLAS_JSON_ANIM: String = 'SET_ATLAS_JSON_ANIM';\r\nexport const SET_ATLAS_ANIM_ANIM: String = 'SET_ATLAS_ANIM_ANIM';\r\nexport const RESET_ATLAS_ANIM: String = 'RESET_ATLAS_ANIM';\r\n\r\nexport interface ZoomAnimAction {\r\n    type: typeof SET_ATLAS_IMAGE_ANIM,\r\n    payload: []\r\n}\r\n\r\nexport const SetAtlasImageAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_IMAGE_ANIM,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const SetAtlasJSONAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_JSON_ANIM,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const SetAtlasAnimAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_ANIM_ANIM,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetAtlasAction = () => {\r\n    return {\r\n        type: RESET_ATLAS_ANIM\r\n    }\r\n}","import { AddSpriteToFramesPayload } from \"./frames.list.action\";\r\n\r\nexport const ACTIVATE_ANIMATION: String = 'ACTIVATE_ANIMATION';\r\nexport const ADD_ANIMATION: String = 'ADD_ANIMATION';\r\nexport const SWIPE_ANIMATION: String = 'SWIPE_ANIMATION';\r\nexport const CHANGE_KEY_CONTROLS: String = 'CHANGE_KEY_CONTROLS';\r\nexport const EDIT_NAME_ANIMATION: String = 'EDIT_NAME_ANIMATION';\r\nexport const DELETE_ANIMATION: String = 'DELETE_ANIMATION';\r\nexport const RESET_ANIMATION: String = 'RESET_ANIMATION';\r\nexport const PLAY_STOP: String = 'PLAY_STOP';\r\n\r\n// #### INTERFACES\r\n\r\n// Add\r\nexport interface AddAnimationPayloadInterface {\r\n    color: string;\r\n    id: string;\r\n    name: string;\r\n    key_controls: KeyControlsInterface;\r\n    play: boolean;\r\n    frames: Array<AddSpriteToFramesPayload>\r\n}\r\n// Swipe animations\r\nexport interface SwipeAnimations {\r\n    type: typeof SWIPE_ANIMATION,\r\n    payload: Array<AddAnimationPayloadInterface>\r\n}\r\n\r\nexport interface KeyControlsInterface {\r\n    repeat: number;\r\n    frame_rate: number;\r\n    yoyo?: boolean;\r\n}\r\n// Update key_controls\r\nexport interface ChangeKeyControlsPayload {\r\n    id: string;\r\n    key_controls: KeyControlsInterface\r\n}\r\nexport interface ChangeKeyControls {\r\n    type: typeof CHANGE_KEY_CONTROLS,\r\n    payload: ChangeKeyControlsPayload\r\n}\r\n\r\n// Activate animation\r\nexport interface ActivateAnimationPayloadInterface {\r\n    id: string;\r\n}\r\nexport interface ActivateAnimationActionInterface {\r\n    type: typeof ACTIVATE_ANIMATION;\r\n    payload: ActivateAnimationPayloadInterface\r\n}\r\n\r\n\r\nexport interface AddAnimationActionInterface {\r\n    type: typeof ADD_ANIMATION;\r\n    payload: AddAnimationPayloadInterface;\r\n}\r\n\r\n// Edit\r\nexport interface EditNameAnimationPayloadInterface {\r\n    id: string;\r\n    name: string\r\n}\r\nexport interface EditAnimationActionInterface {\r\n    type: typeof EDIT_NAME_ANIMATION;\r\n    payload: EditNameAnimationPayloadInterface\r\n}\r\n\r\n// Delete\r\nexport interface DeleteAnimationPayloadInterface {\r\n    id: string;\r\n}\r\nexport interface DeleteAnimationActionInterface {\r\n    type: typeof EDIT_NAME_ANIMATION;\r\n    payload: DeleteAnimationPayloadInterface\r\n}\r\n\r\n// Play stop\r\nexport interface PayloadStop {\r\n    id: string, \r\n    play: boolean\r\n}\r\n\r\n\r\nexport type AnimationActionTypes = ChangeKeyControls & DeleteAnimationActionInterface & AddAnimationActionInterface & EditAnimationActionInterface & ActivateAnimationActionInterface & SwipeAnimations;\r\n\r\n// #### ACTIONS\r\nexport const ChangeKeyControlsAction = (payload: ChangeKeyControlsPayload): ChangeKeyControls => {\r\n    return {\r\n        type: CHANGE_KEY_CONTROLS,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ActivateAnimation = (payload: ActivateAnimationPayloadInterface): ActivateAnimationActionInterface => {\r\n    return {\r\n        type: ACTIVATE_ANIMATION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const AddAnimationAction = (payload: AddAnimationPayloadInterface): AddAnimationActionInterface => {\r\n    return {\r\n        type: ADD_ANIMATION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const SwipeAnimationsAction = (payload: Array<AddAnimationPayloadInterface>): SwipeAnimations => {\r\n    return {\r\n        type: SWIPE_ANIMATION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const EditNameAnimationAction = (payload: EditNameAnimationPayloadInterface): EditAnimationActionInterface => {\r\n    return {\r\n        type: EDIT_NAME_ANIMATION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const DeleteAnimationAction = (payload: DeleteAnimationPayloadInterface): DeleteAnimationActionInterface => {\r\n    return {\r\n        type: DELETE_ANIMATION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetAnimation = () => {\r\n    return {\r\n        type: RESET_ANIMATION\r\n    }\r\n}\r\n\r\nexport const PlayStopAction = (payload: PayloadStop) => {\r\n    return {\r\n        type: PLAY_STOP,\r\n        payload\r\n    }\r\n}","import store from '../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface } from '../Redux/Actions/Animator/animation.list.action';\r\n\r\nconst checkAnimationRepeatedName = (animation: AddAnimationPayloadInterface, animationList? : Array<AddAnimationPayloadInterface>) => {\r\n    const animationData = animationList ? animationList : store.getState().AnimationList.animations;\r\n    return animationData.find(compAnimation => animation.name === compAnimation.name && animation.id !== compAnimation.id);\r\n}\r\n\r\nexport default checkAnimationRepeatedName;","import store from '../Redux/Store/store';\r\nimport checkAnimationRepeatedName from './checkAnimationRepeatedName';\r\nimport { AddAnimationPayloadInterface } from '../Redux/Actions/Animator/animation.list.action';\r\nimport { ActionAnimationList } from '../Redux/Reducers/Animator/animation.list.reducer';\r\n\r\nconst preventAnimationNameDuplicate = (animation: AddAnimationPayloadInterface, animationList?: ActionAnimationList) => {\r\n    let animationData = animationList ? animationList : store.getState().AnimationList;\r\n    let animationCopy = animation;\r\n    let iterations = 0;\r\n    let initialName = animationCopy.name;\r\n    while (checkAnimationRepeatedName(animationCopy, animationData.animations)) {\r\n        iterations++;\r\n        animationCopy.name = `${initialName}${iterations}`;\r\n    }\r\n    return (animationCopy.name);\r\n}\r\n\r\nexport default preventAnimationNameDuplicate;","import { AnimationActionTypes, ADD_ANIMATION, EDIT_NAME_ANIMATION, DELETE_ANIMATION, RESET_ANIMATION, ACTIVATE_ANIMATION, AddAnimationPayloadInterface, CHANGE_KEY_CONTROLS, PLAY_STOP, SWIPE_ANIMATION } from \"../../Actions/Animator/animation.list.action\";\r\nimport { ADD_SPRITE_TO_FRAMES, ACTIVATE_FRAME, DELETE_FRAME, FrameListTypes, SWIPE_FRAME } from \"../../Actions/Animator/frames.list.action\";\r\nimport { RESET_ALL } from \"../../Actions/globals.actions\";\r\nimport preventAnimationNameDuplicate from '../../../utils/preventAnimationNameDuplicate';\r\n\r\nexport type ActionAnimationList = {\r\n    actual_animation: string;\r\n    animations: Array<AddAnimationPayloadInterface>\r\n}\r\n\r\nconst defaultAnimationList: ActionAnimationList = {\r\n    actual_animation: '0',\r\n    animations: []\r\n};\r\n\r\ntype ActionsTypes = AnimationActionTypes & FrameListTypes;\r\n\r\nconst AnimationList = (state = defaultAnimationList, action: ActionsTypes) => {\r\n    switch (action.type) {\r\n        case ACTIVATE_ANIMATION: {\r\n            return {\r\n                ...state,\r\n                actual_animation: action.payload.id,\r\n                animations:  state.animations.map((animation: any) => {\r\n                    return (animation.play = false, animation) \r\n                })\r\n            }\r\n        }\r\n\r\n        case ADD_ANIMATION: {\r\n            let animation =  action.payload;\r\n            animation.name = preventAnimationNameDuplicate(action.payload, state);\r\n            return {\r\n                actual_animation: action.payload.id,\r\n                animations: [action.payload, ...state.animations]\r\n            }\r\n        }\r\n\r\n        case SWIPE_ANIMATION: {\r\n            return {\r\n                ...state,\r\n                animations: action.payload\r\n            }\r\n        }\r\n\r\n        case CHANGE_KEY_CONTROLS: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) => (animation.id === action.payload.id) ? (animation.key_controls = action.payload.key_controls, animation) : animation)\r\n            }\r\n        }\r\n\r\n        case EDIT_NAME_ANIMATION: {\r\n            \r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) => (animation.id === action.payload.id) ? (animation.name = preventAnimationNameDuplicate(action.payload,state), animation) : animation)\r\n            }\r\n        }\r\n\r\n        case DELETE_ANIMATION: {\r\n            const new_state = {\r\n                ...state,\r\n                animations: state.animations.filter((animation: any) => (animation.id !== action.payload.id))\r\n            };\r\n            new_state.actual_animation = (state.animations.length > 1) ? state.animations[0].id : '0';\r\n            return new_state;\r\n        }\r\n\r\n        // Frames\r\n        case ADD_SPRITE_TO_FRAMES: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    frames.frames = frames.frames.map((frame: any) => {\r\n                        frame.active = false;\r\n                        return frame;\r\n                    });\r\n\r\n                    if (action.payload.id === frames.id) {\r\n                        frames.frames.push(action.payload.sprite);\r\n                    }\r\n                    return frames;\r\n                })\r\n            }\r\n        }\r\n\r\n        case SWIPE_FRAME: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    if (frames.id === action.payload.id) {\r\n                        frames.frames = action.payload.frames\r\n                    }\r\n                    return frames;\r\n                })\r\n            }\r\n        }\r\n\r\n        case ACTIVATE_FRAME: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    frames.frames = frames.frames.map((frame: any) => {\r\n                        if (frame.local_id === action.payload.local_id) {\r\n                            frame.active = true;\r\n                        } else {\r\n                            frame.active = false;\r\n                        }\r\n                        return frame;\r\n                    });\r\n                    return frames;\r\n                })\r\n            }\r\n        }\r\n\r\n        case PLAY_STOP: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) => {\r\n                    if (animation.id === action.payload.id) {\r\n                        animation.play = action.payload.play;\r\n                    } else {\r\n                        animation.play = false;\r\n                    }\r\n                    return animation;\r\n                })\r\n            }\r\n        }\r\n\r\n        case DELETE_FRAME: {\r\n            const state_animations = state.animations.map((frames: any) => {\r\n                frames.frames = frames.frames.filter((frame: any) => (frame.local_id !== action.payload.local_id));\r\n                return frames;\r\n            });\r\n            return { ...state, animations: state_animations }\r\n        }\r\n\r\n        case RESET_ANIMATION: {\r\n            return defaultAnimationList;\r\n        }\r\n\r\n        case RESET_ALL: {\r\n            return defaultAnimationList;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default AnimationList;","export const ADD_SPRITE_TO_FRAMES: String = 'ADD_SPRITE_TO_FRAMES';\r\nexport const ACTIVATE_FRAME: String = 'ACTIVATE_FRAME';\r\nexport const SWIPE_FRAME: String = 'SWIPE_FRAME';\r\nexport const DELETE_FRAME: String = 'DELETE_FRAME';\r\n\r\n// TODO: Reservar la acción reset\r\nexport const RESET_ANIMATION: String = 'RESET_ANIMATION';\r\n\r\n// #### INTERFACES\r\n// Agregar sprite al frame container\r\nexport interface AddSpriteToFramesPayload {\r\n    id: string;\r\n    sprite: {\r\n        id: string;\r\n        local_id: string;\r\n        name: string;\r\n        src: string;\r\n        active: boolean;\r\n    }\r\n}\r\nexport interface AddSpriteToFrames {\r\n    type: typeof ADD_SPRITE_TO_FRAMES;\r\n    payload: AddSpriteToFramesPayload \r\n}\r\n\r\n// Swipe\r\nexport interface SwipeFramePayload {\r\n    id: string,\r\n    frames: Array<any>\r\n}\r\n\r\nexport interface SwipeFrame {\r\n    type: typeof SWIPE_FRAME,\r\n    payload: SwipeFramePayload\r\n}\r\n\r\n// Activate frame\r\nexport interface ActivateFramePayload {\r\n    local_id: string;\r\n}\r\n\r\nexport interface ActivateFrame {\r\n    type: typeof ACTIVATE_FRAME;\r\n    payload: ActivateFramePayload\r\n}\r\n\r\n// Delete Frame\r\nexport interface DeleteFramePayload {\r\n    local_id: string;\r\n}\r\nexport interface DeleteFrame {\r\n    type: typeof DELETE_FRAME;\r\n    payload: DeleteFramePayload\r\n}\r\n\r\nexport type FrameListTypes = AddSpriteToFrames & ActivateFrame & DeleteFrame;\r\n\r\n// #### ACTIONS\r\n\r\nexport const AddSpriteToFramesAction = (payload: AddSpriteToFramesPayload): AddSpriteToFrames => {\r\n    return {\r\n        type: ADD_SPRITE_TO_FRAMES,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ActivateFrameAction = (payload: ActivateFramePayload): ActivateFrame => {\r\n    return {\r\n        type: ACTIVATE_FRAME,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const SwipeFrameAction = (payload: SwipeFramePayload): SwipeFrame => {\r\n    return {\r\n        type: SWIPE_FRAME,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const DeleteFrameAction = (payload: DeleteFramePayload): DeleteFrame => {\r\n    return {\r\n        type: DELETE_FRAME,\r\n        payload\r\n    }\r\n}","import { combineReducers } from 'redux';\r\n\r\nimport imagesAtlas from './Atlas/imagesAtlas.reducer';\r\nimport zoomAtlas from './Atlas/zoom.reducer';\r\nimport contextSideMenuAtlas from './Atlas/contextSideMenu.reducer';\r\nimport algorithmPanelAtlas from './Atlas/algorithmPanel.reducer';\r\nimport maxrectAtlas from './Atlas/maxrect.reducer';\r\nimport zoomAnim from './Animator/zoom.anim.reducer';\r\nimport atlasAnim from './Animator/atlas.anim.reducer';\r\nimport AnimationList from './Animator/animation.list.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    imagesAtlas,\r\n    contextSideMenuAtlas,\r\n    zoomAtlas,\r\n    algorithmPanelAtlas,\r\n    maxrectAtlas,\r\n    // Sescción de reducers para animación\r\n    zoomAnim,\r\n    atlasAnim,\r\n    AnimationList\r\n});\r\n\r\nexport default rootReducer;","import { MaxRectAction, SET_MAXRECT, MaxRectData, RESET_MAXRECT} from '../../Actions/Atlas/maxrect.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nexport default (state: MaxRectData[] = [], action: MaxRectAction ) => {\r\n    switch (action.type) {\r\n        case SET_MAXRECT: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return [];\r\n        }\r\n        case RESET_MAXRECT: {\r\n            return [];\r\n        }\r\n        default: \r\n            return state;\r\n    }\r\n}","export const SET_MAXRECT = 'SET_MAXRECT';\r\nexport const RESET_MAXRECT: String = 'RESET_MAXRECT';\r\n\r\nexport interface MaxRectData {\r\n    width: number,\r\n    height: number,\r\n    data: {\r\n        id: string,\r\n        name: string,\r\n        origin: {\r\n            x: number,\r\n            y: number\r\n        }\r\n    },\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport interface MaxRectAction {\r\n    type: typeof SET_MAXRECT,\r\n    payload: MaxRectData[]\r\n}\r\n\r\nexport const setMaxRect = (payload: MaxRectData[]): MaxRectAction => {\r\n    return {\r\n        type: SET_MAXRECT,\r\n        payload\r\n    }\r\n}\r\n\r\nexport const ResetMaxRectAction = () => {\r\n    return {\r\n        type: RESET_MAXRECT\r\n    }\r\n}","import { createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport rootReducer from '../Reducers';\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools());\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport default store;","const clearName = (letters: string) => {\r\n    const chars: any = {\r\n        \"á\": 'a',\r\n        \"é\": 'e',\r\n        \"í\": 'i',\r\n        \"ó\": 'o',\r\n        \"ú\": 'u',\r\n        \"ñ\": 'n',\r\n        ' ': '_',\r\n        ',': '',\r\n        ';': '',\r\n        '&': '',\r\n        '/': ''\r\n    };\r\n    return (((letters.toString().toLowerCase()).replace(/[áéíóúñ&;,// ]/g, (m: string) =>( chars[m])).split(/(.png|.gif)/)[0])).trim().trimLeft().trimRight().trimEnd();\r\n}\r\n\r\nexport default clearName;","import nextId from 'react-id-generator';\r\n\r\nconst generateId = (value = ''): string => {\r\n    let i = 10;\r\n    let out = Math.random();\r\n    while (--i) {\r\n        out += Math.random() * (1000 - 100) + 100 + Date.now();\r\n    }\r\n    const pref = (value !== '') ? `${value}_` : ``; \r\n\r\n    return nextId(`${pref}${Math.round(out).toString(32)}`);\r\n}\r\n\r\nexport default generateId;","/**\r\n * Nos ayudará a devolver el grupo de imágenes que aceptaremos en la herramienta\r\n */\r\n\r\n const acceptFormatImages: Array<string> = [\"image/jpg\",\"image/jpeg\",\"image/png\"];\r\n\r\n export default acceptFormatImages;","import EventEmitter from 'eventemitter3';\r\n\r\nlet Observer = new EventEmitter();\r\n\r\nlet GLOBAL_EVENT = {\r\n    // Eventos de comunicación con el CANVAS\r\n    IMAGE_CHARGED: \"IMAGE_CHARGED\",\r\n    IMAGE_CHARGED_COMPLETE: \"IMAGE_CHARGED_COMPLETE\",\r\n    ZOOM_CHANGED: \"ZOOM_CHANGED\",\r\n    EXTRUSION_CHANGED: \"EXTRUSION_CHANGED\",\r\n    PANEL_RESIZE_END: \"PANEL_RESIZE_END\",\r\n    IMAGE_SELECTED: \"IMAGE_SELECTED\", // Esto recivirá el ID de la imagen seleccionada\r\n    IMAGE_DES_SELECTED: \"IMAGE_DES_SELECTED\",\r\n\r\n    // Export\r\n    OPEN_EXPORT_OPTIONS_PC: \"OPEN_EXPORT_OPTIONS_PC\",\r\n    // El export solicita la imágen al canvas y cuando está lista ejecuta image_canvas_expoted\r\n    REQUEST_IMAGE_CANVAS: \"REQUEST_IMAGE_CANVAS\",\r\n    IMAGE_CANVAS_EXPORTED: \"IMAGE_CANVAS_EXPORTED\",\r\n\r\n    IMPORT_ATLAS: {\r\n        // Abrir modal de import atlas\r\n        OPEN_ATLAS_IMPORT: \"OPEN_ATLAS_IMPORT\",\r\n        OPEN_ATLAS_IMPORT_SEND_IMAGE: \"OPEN_ATLAS_IMPORT_SEND_IMAGE\",\r\n        CLOSE_ATLAS_IMPORT: \"CLOSE_ATLAS_IMPORT\",\r\n        // Estado de import atlas\r\n        CHANGE_IMPORT_ATLAS_STATE: \"CHANGE_IMPORT_ATLAS_STATE\",\r\n        // Botón de importación\r\n        IMPORT_ATLAS_GRID_BUTTON: \"IMPORT_ATLAS_GRID_BUTTON\",\r\n        // Lo usamos para enviar el atlas JSON al render\r\n        IMPORT_ATLAS_JSON: \"IMPORT_ATLAS_JSON\"\r\n    },\r\n    IMPORT_GIF: 'IMPORT_GIF',\r\n    // Sistema de notificaciones\r\n    NOTIFICATION_SYSTEM: {\r\n        SUCCESS: 'SUCCESS',\r\n        WARNING: 'WARNING',\r\n        ERROR: 'ERROR',\r\n        CLEAR: 'CLEAR'\r\n    },\r\n    // Sistema de loading\r\n    SPINNER: {\r\n        OPEN: 'OPEN_SPINNER',\r\n        CLOSE: 'CLOSE_SPINNER'\r\n    },\r\n    RESET_ATLAS: 'RESET_ATLAS'\r\n};\r\n\r\n// Tipados\r\nexport interface ImageCanvasData {\r\n    name: string,\r\n    src: string,\r\n    src_original: string,\r\n    type: string,\r\n    scale: number\r\n}\r\n\r\nexport interface GifImports {\r\n    name: string,\r\n    width: number,\r\n    height: number,\r\n    srcs: Array<string>\r\n}\r\n\r\nexport {\r\n    Observer,\r\n    GLOBAL_EVENT\r\n};","import clearName from \"./clearNames\";\r\nimport generateId from \"./generateId\";\r\nimport acceptFormatImages from \"../constants/acceptFormatImages\";\r\nimport { Observer, GLOBAL_EVENT } from \"../Views/AtlasPacker/Observer\";\r\nimport { append } from \"ramda\";\r\n\r\n// Nos ayuda a tener la/las imágenes a partir de un file input\r\nconst getImageFiles = (files: any) => {\r\n    return new Promise((resolve, reject) => {\r\n        const Files = Array.from(files).filter((file: any) => {\r\n            if(file.size > 1600000) {\r\n                Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, `The file is too big. The minimun is: 1.6MB`);\r\n            }\r\n            const newAcceptFormImages = append(\"image/gif\", acceptFormatImages);\r\n            return newAcceptFormImages.includes(file.type) && file.size < 1650000\r\n        });\r\n        \r\n        const FilesOut: any = [];\r\n        \r\n        Files.forEach((file: any): void => {\r\n            const name = clearName(file.name);\r\n            const reader = new FileReader();\r\n            reader.onload = (fileURL: any) => {\r\n                const finalFile = fileURL.target;\r\n                const img = new Image();\r\n                img.onload = () => {\r\n                    FilesOut.push({\r\n                        id: generateId(),\r\n                        name,\r\n                        width: img.width,\r\n                        height: img.height,\r\n                        src: finalFile.result,\r\n                        active: false,\r\n                        changeName: false,\r\n                        origin: { x: 0.5, y: 0.5 }\r\n                    });\r\n                    if (Files.length === FilesOut.length) {\r\n                        resolve(FilesOut);\r\n                    }\r\n                };\r\n                img.src = URL.createObjectURL(file);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    });\r\n}\r\n\r\nexport default getImageFiles;","import React from 'react';\r\nimport getImageFiles from '../../../../utils/getImages';\r\n\r\nconst ImportButton = (props: any) => {\r\n    const inputHandle = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getImageFiles(files);\r\n        props.loadImages(files_loaded);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <li className=\"fileUpload\">\r\n                {props.children}\r\n                <input type=\"file\" className=\"upload cursor-pointer uploadSprites\" accept={props.accept} multiple={props.multiple} onChange={inputHandle}/>\r\n            </li>\r\n        </React.Fragment>\r\n    );\r\n}\r\nexport default ImportButton;","const gifFrames = require('gif-frames');\r\nconst getGifFrames = (url: string) => {\r\n    return new Promise((success, error) => {\r\n        gifFrames(\r\n            { url: url, quality: '100', frames: 'all', outputType: 'canvas', cumulative: true },\r\n            (err: any, frameData: any) => {\r\n                if (err) {\r\n                    error(err);\r\n                } else {\r\n                    success(frameData.map((frame: any) => (frame.getImage() as HTMLCanvasElement).toDataURL()));\r\n                }\r\n            }\r\n        );\r\n    });\r\n}\r\n\r\nexport default getGifFrames;","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// Componentes\r\nimport ImportButton from './ImportButton.component';\r\n\r\n// Estilos\r\nimport './Menu.style.scss';\r\n\r\n// Redux\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { Link } from 'react-router-dom';\r\nimport { ResetAllAnimationAction } from '../../../../Redux/Actions/globals.actions';\r\nimport acceptFormatImages from '../../../../constants/acceptFormatImages';\r\nimport getGifFrames from '../../../../utils/getGifFrames';\r\n\r\nimport Patreon from '../../../../Vendor/become_patreon.png';\r\n\r\nconst MenuComponent: React.FunctionComponent = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const receiveImages = (images: ImageData[]) => {\r\n        dispatch(AddImage(images));\r\n    }\r\n\r\n    const receiveAtlasImage = (images: ImageData[]) => {\r\n        // Ejeutamos el evento para el atlas ya que se abre el modal que modifica el atlas\r\n        Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT, images);\r\n    }\r\n\r\n    const receiveGif = async (gif: ImageData[]) => {\r\n        if (gif[0].src?.includes('image/gif')) {\r\n            Observer.emit(GLOBAL_EVENT.SPINNER.OPEN);\r\n            try {\r\n                const all_gifs = await getGifFrames(gif[0].src);\r\n                const gif_object = {\r\n                    name: gif[0].name,\r\n                    width: gif[0].width,\r\n                    height: gif[0].height,\r\n                    srcs: all_gifs\r\n                };\r\n                Observer.emit(GLOBAL_EVENT.IMPORT_GIF, gif_object);\r\n            } catch (err) {\r\n                Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, `Gif error`);\r\n            }\r\n            Observer.emit(GLOBAL_EVENT.SPINNER.CLOSE);\r\n        } else {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, 'It is not a gif file');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className=\"menu noselect\">\r\n            <ul>\r\n                <li className=\"icon\">\r\n                    <a href=\"https://gammafp.com\" className=\"material-icons\">\r\n                        home\r\n                    </a>\r\n                </li>\r\n                <ImportButton loadImages={receiveImages} multiple={true} accept={acceptFormatImages.join(',')}>Import</ImportButton>\r\n                <ImportButton loadImages={receiveAtlasImage} multiple={false} accept={acceptFormatImages.join(',')}>Import Atlas</ImportButton>\r\n                <ImportButton loadImages={receiveGif} multiple={false} accept={\"image/gif\"}>Import Gif</ImportButton>\r\n                <li onClick={() => {\r\n                    // ObserverAnim.removeAllListeners();\r\n                    dispatch(ResetAllAnimationAction());\r\n                    Observer.emit(GLOBAL_EVENT.RESET_ATLAS);\r\n                }}>Reset</li>\r\n                <li>\r\n                    <a href=\"https://www.patreon.com/join/gammafp?\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                        <img src={Patreon} alt=\"Patreon\"/>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default MenuComponent;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport './CardImages.style.scss';\r\n\r\nimport {\r\n    ChangeImageName,\r\n    SelectImage,\r\n    EditingImageName,\r\n    CloseEditingImage,\r\n    ImageData\r\n} from '../../../../Redux/Actions/Atlas/images.action';\r\n\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport clearName from '../../../../utils/clearNames';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\n\r\nconst CardImage: React.FunctionComponent = () => {\r\n\r\n    const images = useSelector((state: RootState): ImageData[] => state.imagesAtlas);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleInputBlur = (options: { id: string, name: string }) => {\r\n        const name_trimmed = options.name.trim().trimLeft().trimRight().trimEnd();\r\n        if (!isEmpty(name_trimmed)) {\r\n            dispatch(ChangeImageName({id: options.id, name: clearName(name_trimmed)}));\r\n        }\r\n        dispatch(CloseEditingImage());\r\n    }\r\n\r\n    // Cambiamos el nombre de una imagen\r\n    const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>, id: string) => {\r\n        if (event.key === 'Enter') {\r\n            handleInputBlur({ id, name: event.currentTarget.value });\r\n        }\r\n    }\r\n\r\n    // Seleccionamos una imagen\r\n    const handleSelectImage = (id: string) => {\r\n        Observer.emit(GLOBAL_EVENT.IMAGE_SELECTED, id);\r\n        dispatch(SelectImage({ id }));\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {images.map((image: ImageData, index: number) => {\r\n                return (\r\n                    <div className={`animated bounceInLeft card-image ${((image.active) ? \"card-image-active\" : \"\")}`} id={`id_${image.id}`} key={index}\r\n                        onClick={() => {\r\n                            handleSelectImage(image.id)\r\n                        }}\r\n                        onContextMenu={(event) => {\r\n                            handleSelectImage(image.id)\r\n                            dispatch(ActivateSideContextMenuAction({\r\n                                x: event.clientX,\r\n                                y: event.clientY,\r\n                                id: image.id,\r\n                                active: true,\r\n                            }));\r\n                        }}\r\n                    >\r\n                        <div className=\"card-image--image\">\r\n                            <img src={image.src} alt=\"Imagen base\" className=\"noselect\"/>\r\n                        </div>\r\n                        <div className=\"card-image--nameImage\">\r\n                            {\r\n                                (image.changeName)\r\n                                    ? <input type=\"text\" className=\"card-image--nameImage_input\"\r\n                                        autoFocus={true}\r\n                                        onFocus={(event) => { event.target.select() }}\r\n                                        defaultValue={image.name}\r\n                                        onKeyPress={(event) => handleKeyPress(event, image.id)}\r\n                                        onBlur={(event) => handleInputBlur({ name: event.target.value, id: image.id })}\r\n                                        maxLength={50}\r\n                                    />\r\n                                    : <span onDoubleClick={() => {\r\n                                        dispatch(EditingImageName({ id: image.id }));\r\n                                    }}>{image.name}</span>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default CardImage;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { EditingImageName, DeleteImage } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { CloseSideContextMenuAction, ContextMenuData } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\n\r\nimport './ContextMenu.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nlet cambio = true;\r\n\r\nconst ContextMenu = (props: any) => {\r\n    \r\n    const sideMenuContext: ContextMenuData = useSelector((state: RootState) => state.contextSideMenuAtlas);\r\n    const dispatch = useDispatch();\r\n    \r\n    let fadeIn = (cambio) ? 'fadeIn' : 'fadeIn2';\r\n    let contextMenuClassName = `context-menu animated ${(sideMenuContext.active) ? 'active ' + (cambio = !cambio, fadeIn) : ''}`;\r\n    \r\n    // Colocamos la posición, en el top se corrige \r\n    const positionXYMenu = {\r\n        top: ((sideMenuContext.y + 80) > globalThis.innerHeight) ? `${sideMenuContext.y - 200}px` : `${sideMenuContext.y}px`,\r\n        left: `${sideMenuContext.x}px`\r\n    };\r\n\r\n    const closeMenu = () => {\r\n        dispatch(CloseSideContextMenuAction());\r\n    }\r\n\r\n    const handleClickChangeName = () => {\r\n        dispatch(EditingImageName({ id: sideMenuContext.id }));\r\n        closeMenu();\r\n    }\r\n\r\n    const handleClickDelete = () => {\r\n        const image = document.querySelector('#id_' + sideMenuContext.id) as HTMLDivElement;\r\n        image.classList.add('zoomOut');\r\n        setTimeout(() => {\r\n            dispatch(DeleteImage({ id: sideMenuContext.id }));\r\n            props.onUpdateSize();\r\n        }, 400);\r\n        closeMenu();\r\n    }\r\n\r\n    return (\r\n        <div className={contextMenuClassName} style={positionXYMenu} onContextMenu={(e) => { e.preventDefault() }}>\r\n            <div className=\"options\" onClick={handleClickChangeName}>\r\n                Change Name\r\n            </div>\r\n            <div className=\"options\" onClick={handleClickDelete}>\r\n                Delete image\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ContextMenu\r\n","import React from 'react';\r\nimport './ExportButton.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst ExportButton = (props: any) => {\r\n    const imagesFiles = useSelector((store: RootState) => store.imagesAtlas);\r\n    // const emit_click = useSelector((store: RootState) => (store.imagesAtlas.length != 0));\r\n    if(!isEmpty(imagesFiles)) {\r\n        Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\r\n    }\r\n\r\n    const handleClick = () => {\r\n        \r\n        if(isEmpty(imagesFiles)) {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, 'Please import an image');\r\n        } else {\r\n            // Subimos el evento al padre para guardar la imagen.\r\n            props.handleClick();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button className={((isEmpty(imagesFiles)) ? `save-export-disable` : `save-export`) + ` noselect`} onClick={handleClick}>\r\n            {props.title}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ExportButton;\r\n","// Acá solo hay componentes de estilos para botones de la aplicación que devuelven un evento determinado\r\nimport React from 'react';\r\nimport { css } from 'glamor';\r\n\r\nconst button_styles = css({\r\n    color: 'var(--main-light)',\r\n    border: '1px solid var(--main-light)',\r\n    borderRadius: '4px',\r\n    lineHeight: '21px',\r\n    fontSize: '1.3rem',\r\n    minWidth: '25px',\r\n    height: '25px',\r\n    textAlign: 'center',\r\n    cursor: 'pointer',\r\n    ':hover': {\r\n        color: 'var(--main-primary)',\r\n        border: '1px solid var(--main-primary)'\r\n    },\r\n    ':active': {\r\n        color:'var(--main-light)',\r\n        border: '1px solid var(--main-light)'\r\n    }\r\n});\r\n\r\nexport const AddButton = (props) => {\r\n    const text_button = (props.children !== undefined) ? props.children : '+';\r\n    return ( \r\n        <div className={`${button_styles} noselect ${props.className}`} onClick={props.onClick}>\r\n            {text_button}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setZoomAction } from '../../../../Redux/Actions/Atlas/zoom.action';\r\n\r\nimport './Zoom.style.scss';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { AddButton } from '../../../AnimationTool/components/buttons/Buttons';\r\n\r\nconst Zoom = () => {\r\n    const zoomPercent: number = useSelector((state: RootState) => state.zoomAtlas.value);\r\n    const dispatch = useDispatch();\r\n\r\n    const minZoom = 20;\r\n    const maxZoom = 500;\r\n    const zoomStep = 10;\r\n\r\n    const handleInputZoom = (percentInput: number) => {\r\n        const numberPercent: number = Math.round(percentInput);\r\n        const finalZoom: number = (numberPercent <= minZoom)\r\n            ? minZoom\r\n            : (numberPercent >= maxZoom)\r\n                ? maxZoom\r\n                : numberPercent;\r\n        dispatch(setZoomAction({ value: finalZoom }));\r\n    }\r\n\r\n    Observer.emit(GLOBAL_EVENT.ZOOM_CHANGED, zoomPercent);\r\n\r\n    return (\r\n        <div className=\"zoom-tools\">\r\n            <input type=\"number\" onChange={(event) => handleInputZoom((Number(event.target.value)))} value={zoomPercent} />\r\n            <span className=\"noselect\">%</span>\r\n            <div className=\"btns-container\">\r\n                <AddButton className=\"ml-2\" onClick={() => handleInputZoom(100)}><span className=\"px-2\" style={{ fontSize: '1rem' }}>Reset</span></AddButton>\r\n                <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent - zoomStep)}>-</AddButton>\r\n                <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent + zoomStep)}>+</AddButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Zoom\r\n","import React from 'react';\r\nimport './Algorithm.scss';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { actionAlgorithmPanel, payloadAlgorithmPanel } from '../../../../Redux/Actions/Atlas/algorithmPanel.action'\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nconst Algorithm = () => {\r\n    const algorithmPanel: payloadAlgorithmPanel = useSelector((state: RootState) => state.algorithmPanelAtlas);\r\n    const dispatch = useDispatch();\r\n    const type = ['maxrect', 'tool'];\r\n    return (\r\n        <div className=\"algorithm-tab-container\">\r\n            <h3 className=\"noselect\">Algorithm</h3>\r\n            <div className=\"algorithm-tab-container--inputs\">\r\n                <span className=\"noselect\">Type</span>\r\n                <select value={algorithmPanel.type} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, type: event.target.value }))}>\r\n                    <option value={type[0]}>MaxRect</option>\r\n                    <option value={type[1]}>Tool</option>\r\n                </select>\r\n            </div>\r\n            {\r\n                (algorithmPanel.type === type[0]) ?\r\n                    <div>\r\n                        <div className=\"algorithm-tab-container--inputs\">\r\n                            <span className=\"noselect\">Width (px)</span>\r\n                            <input type=\"number\" value={algorithmPanel.width} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, width: Math.round(Number(event.target.value)) }))} min={0} max={2000} />\r\n                        </div>\r\n                        <div className=\"algorithm-tab-container--inputs\">\r\n                            <span className=\"noselect\">Height (px)</span>\r\n                            <input type=\"number\" value={algorithmPanel.height} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, height: Math.round(Number(event.target.value)) }))} min={0} max={2000} />\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    < div className=\"algorithm-tab-container--inputs\">\r\n                        <span className=\"noselect\">Size (row)</span>\r\n                        <input type=\"number\" value={algorithmPanel.size} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, size: Math.round(Number(event.target.value)) }))} min={1} max={100} />\r\n                    </div>\r\n            }\r\n\r\n\r\n            <div className=\"algorithm-tab-container--inputs\">\r\n                <span className=\"noselect\">Extrusion (px)</span>\r\n                <input type=\"number\" value={algorithmPanel.extrusion} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, extrusion: Math.round(Number(event.target.value)) }))} min={0} max={10} />\r\n            </div>\r\n            {\r\n                (algorithmPanel.type === type[0]) &&\r\n                <div className=\"algorithm-tab-container--inputs\">\r\n                    <span className=\"noselect\">Separation (px)</span>\r\n                    <input type=\"number\" value={algorithmPanel.separation} onChange={(event) => dispatch(actionAlgorithmPanel({ ...algorithmPanel, separation: Math.round(Number(event.target.value)) }))} min={0} max={10} />\r\n                </div>\r\n            }\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Algorithm\r\n","/** Used by atlas packer */\r\nconst b64toBlob = (b64DataIn: string, contentType = 'image/png', sliceSize = 512) => {\r\n    const b64Data = b64DataIn.replace(/^data:(\\w*\\/\\w*;)base64,/, '');\r\n    contentType = contentType || '';\r\n    sliceSize = sliceSize || 512;\r\n\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n\r\n        byteArrays.push(byteArray);\r\n    }\r\n\r\n    const blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n}\r\n\r\nexport default b64toBlob","import * as Phaser from 'phaser';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport b64toBlob from '../../../../utils/b64toBlob';\r\nimport { symmetricDifference, forEach } from 'ramda';\r\nimport store from '../../../../Redux/Store/store';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { SelectImage } from '../../../../Redux/Actions/Atlas/images.action';\r\n\r\ninterface extrusion_object_interface { key: string, pixels: Array<Phaser.GameObjects.Rectangle> };\r\n\r\nclass RenderScene extends Phaser.Scene {\r\n    // Grupo de imagenes que se van creando con this.add.image\r\n    images_group: { key: string, image: any }[] = [];\r\n\r\n    // Grupo de extrusión\r\n    extrusion_objects: Array<extrusion_object_interface> = [];\r\n\r\n    // Grupos de imagenes para comprobar si se agregan o no y si se eliminan\r\n    temp_images_key: string[] = [];\r\n    new_images: string[] = [];\r\n\r\n    // Imagen seleccionada\r\n    graphics: any;\r\n\r\n    constructor() {\r\n        super({\r\n            key: 'RenderScene'\r\n        });\r\n\r\n        Observer.removeListener(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS);\r\n        Observer.removeListener(GLOBAL_EVENT.ZOOM_CHANGED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_CHARGED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE);\r\n        Observer.removeListener(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_DES_SELECTED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_SELECTED);\r\n        \r\n\r\n    }\r\n    init() {\r\n        this.graphics = this.add.graphics({ lineStyle: { width: 2, color: 0xff0000 }, fillStyle: { color: 0xaa0000 } }).setDepth(200);\r\n\r\n\r\n        this.tweens.add({\r\n            targets: this.graphics,\r\n            // ease: (e: number) => (Math.floor(e) === 0),\r\n            alpha: 0,\r\n            ease: (e: number) => Math.round(e),\r\n            yoyo: true,\r\n            repeat: -1,\r\n            duration: 1000\r\n        });\r\n\r\n        // Obtenemos los datos de la imagen del CANVAS\r\n        Observer.on(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS, (options: any) => {\r\n            this.scale.resize(this.scale.width * options.scale, this.scale.height * options.scale);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n\r\n            // Obtenemos la imagen escalada\r\n            this.images_group.forEach((image_group: { key: string, image: any }) => {\r\n                image_group.image.setScale(options.scale);\r\n                image_group.image.x *= options.scale;\r\n                image_group.image.y *= options.scale;\r\n            });\r\n            this.extrusion_objects.forEach((extrusion_object: extrusion_object_interface) => {\r\n                extrusion_object.pixels.forEach((pixel: Phaser.GameObjects.Rectangle) => {\r\n                    pixel.setScale(options.scale);\r\n                    pixel.x *= options.scale;\r\n                    pixel.y *= options.scale;\r\n                });\r\n            });\r\n\r\n            this.game.renderer.snapshot((image: any) => {\r\n                const src = image.src;\r\n                this.scale.resize(this.scale.width / options.scale, this.scale.height / options.scale);\r\n                this.scale.refresh();\r\n                this.scale.updateScale();\r\n\r\n                // Reiniciamos el escalado\r\n                this.images_group.forEach((image_group: { key: string, image: any }) => {\r\n                    image_group.image.setScale(1);\r\n                    image_group.image.x /= options.scale;\r\n                    image_group.image.y /= options.scale;\r\n                });\r\n                this.extrusion_objects.forEach((extrusion_object: extrusion_object_interface) => {\r\n                    extrusion_object.pixels.forEach((pixel: Phaser.GameObjects.Rectangle) => {\r\n                        pixel.setScale(1);\r\n                        pixel.x /= options.scale;\r\n                        pixel.y /= options.scale;\r\n                    });\r\n                });\r\n\r\n                this.game.renderer.snapshot((image: any) => {\r\n                    // Todo está listo y se emite el evento IMAGE_CANVAS_EXPORTED\r\n                    const src_original = image.src;\r\n                    const data = { ...options, src_original, src };\r\n                    Observer.emit(GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED, data);\r\n                });\r\n            });\r\n        });\r\n\r\n        // El Zoom visual\r\n        Observer.on(GLOBAL_EVENT.ZOOM_CHANGED, (zoom_size) => {\r\n            this.scale.setZoom(zoom_size);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n        });\r\n    }\r\n\r\n    preload(): void {\r\n        // #------------- Cargamos imágenes\r\n        Observer.on(GLOBAL_EVENT.IMAGE_CHARGED, (images) => {\r\n            this.temp_images_key = [];\r\n            this.new_images = [];\r\n            this.textures.each((textures) => {\r\n                const textures_key = textures.key;\r\n                if (textures_key !== '__DEFAULT' && textures_key !== '__MISSING' && !textures_key.startsWith('map')) {\r\n                    this.temp_images_key.push(textures_key);\r\n                }\r\n            }, this);\r\n\r\n            this.new_images = images.map((image: any) => {\r\n                this.load.image(image.id, URL.createObjectURL(b64toBlob(image.src)));\r\n                return image.id;\r\n            });\r\n\r\n            this.load.start();\r\n        });\r\n    }\r\n\r\n    create() {\r\n        Observer.on(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, (MaxRectGrid: any) => {\r\n            const different = symmetricDifference(this.new_images, this.temp_images_key);\r\n            if (this.new_images.length < this.temp_images_key.length) {\r\n                this.removeTextures(different[0]);\r\n            } else {\r\n                // Acá agregamos solo las imagenes nuevas\r\n                different.forEach((new_image: string) => {\r\n                    const image = this.add.image(0, 0, new_image)\r\n                        .setOrigin(0, 0)\r\n                        .setName(new_image)\r\n                        .setInteractive({cursor: \"pointer\"});\r\n\r\n                    image.on(Phaser.Input.Events.POINTER_DOWN, (event_mouse: any) => {\r\n                        if (event_mouse.buttons === 1) {\r\n                            this.select_a_image(image.name);\r\n                        } else {\r\n                            this.activate_context_menu(event_mouse, image);\r\n                        }\r\n                    }, this);\r\n\r\n                    this.images_group.push({\r\n                        key: new_image,\r\n                        image\r\n                    });\r\n                })\r\n            }\r\n            if (MaxRectGrid !== undefined) {\r\n                this.scale.setGameSize(MaxRectGrid.width, MaxRectGrid.height);\r\n                this.scale.resize(MaxRectGrid.width, MaxRectGrid.height);\r\n                this.scale.refresh();\r\n                this.scale.updateScale();\r\n\r\n                MaxRectGrid.rects.forEach((rect: any) => {\r\n                    const image = this.images_group.find((image) => image.key === rect.data.id);\r\n                    if(image !== undefined) {\r\n                        image.image.x = rect.x;\r\n                        image.image.y = rect.y;\r\n                    }\r\n                });\r\n            }\r\n            this.createExtrusion();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMAGE_DES_SELECTED, () => {\r\n            this.reset_images_selected();\r\n        });\r\n        Observer.on(GLOBAL_EVENT.IMAGE_SELECTED, (id) => {\r\n            this.select_a_image(id);\r\n        });\r\n    }\r\n\r\n    activate_context_menu(event_mouse: any, image: any) {\r\n        if (event_mouse.button === 2) {\r\n            const x = event_mouse.event.clientX;\r\n            const y = event_mouse.event.clientY;\r\n            store.dispatch(ActivateSideContextMenuAction({\r\n                x,\r\n                y,\r\n                id: image.name,\r\n                active: true,\r\n            }));;\r\n            this.select_a_image(image.name);\r\n\r\n        }\r\n    }\r\n\r\n    select_a_image(id: string) {\r\n        const image = this.images_group.find((image: any) => image.key === id)?.image;\r\n        setTimeout(() => {\r\n            this.create_image_selected({\r\n                x: image.x,\r\n                y: image.y,\r\n                width: image.width,\r\n                height: image.height\r\n            });\r\n            // TODO: Debido a que se deshabilita la seleccion de imagen debido al click estarior he puesto este tiempo\r\n            // Debería analizarse para futuras versiones\r\n            store.dispatch(SelectImage({ id: image.name }));\r\n        }, 100);\r\n    }\r\n\r\n    create_image_selected({ x = 10, y = 10, width = 100, height = 100 }) {\r\n        this.reset_images_selected();\r\n        const rect = new Phaser.Geom.Rectangle(x, y, width, height);\r\n        this.graphics.strokeRectShape(rect);\r\n    }\r\n\r\n    reset_images_selected() {\r\n        this.graphics.clear();\r\n    }\r\n\r\n    createExtrusion() {\r\n        this.removeExtrusion();\r\n        const extrusion_size = store.getState().algorithmPanelAtlas.extrusion;\r\n\r\n        if (extrusion_size > 0 && this.images_group.length > 0) {\r\n            this.images_group.forEach((image) => {\r\n                const texture = this.textures.get(image.key);\r\n                const src = texture.getSourceImage();\r\n                const canvas = this.textures.createCanvas(`map_${image.key}`, src.width, src.height).draw(0, 0, src as HTMLImageElement);\r\n                const pixel = new Phaser.Display.Color();\r\n                // Extrusión\r\n                const extrusion_objects_temp: extrusion_object_interface = {\r\n                    key: image.key,\r\n                    pixels: []\r\n                };\r\n\r\n                for (let y = 0; y < src.height; y++) {\r\n                    for (let x = 0; x < src.width; x++) {\r\n                        // Arriba y abajo\r\n                        canvas.getPixel(x, y, pixel);\r\n                        if ((x === 0 || y === 0 || x === src.width - 1 || y === src.height - 1) && !!pixel.alpha) {\r\n\r\n                            const positionX = (x === 0) ? (x + image.image.x) - extrusion_size : x + image.image.x + 1;\r\n                            const positionY = (y === 0) ? y + image.image.y - extrusion_size : y + image.image.y + 1;\r\n\r\n                            // Izquierda y derecha\r\n                            if (x === 0 || x === src.width - 1) {\r\n                                const pixel_extruded = this.add.rectangle(\r\n                                    positionX,\r\n                                    (y + image.image.y),\r\n                                    extrusion_size, 1,\r\n                                    pixel.color\r\n                                ).setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n\r\n                            // Arriba y abajo\r\n                            if (y === src.height - 1 || y === 0) {\r\n                                const pixel_extruded = this.add.rectangle(\r\n                                    (x + image.image.x),\r\n                                    positionY,\r\n                                    1, extrusion_size,\r\n                                    pixel.color\r\n                                ).setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n                            // Esquinas\r\n                            if (\r\n                                (x === 0 && y === 0) ||\r\n                                (x === src.width - 1 && y === src.height - 1) ||\r\n                                (x === src.width - 1 && y === 0) ||\r\n                                (x === 0 && y === src.height - 1)\r\n                            ) {\r\n                                const pixel_extruded = this.add.rectangle(\r\n                                    positionX,\r\n                                    positionY,\r\n                                    extrusion_size, extrusion_size,\r\n                                    pixel.color\r\n                                ).setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n                this.extrusion_objects.push(extrusion_objects_temp);\r\n            });\r\n        }\r\n    }\r\n\r\n    removeExtrusion() {\r\n        forEach((extrusion_object) => {\r\n            forEach((pixel) => {\r\n                pixel.destroy();\r\n            }, extrusion_object.pixels);\r\n            if (this.textures.get(`map_${extrusion_object.key}`).key !== '__MISSING') {\r\n                this.textures.remove(`map_${extrusion_object.key}`);\r\n            }\r\n        }, this.extrusion_objects);\r\n        this.extrusion_objects = [];\r\n\r\n    }\r\n\r\n    removeTextures(textureName: string) {\r\n        // Buscamos la imágen que se va a remover\r\n        const image_to_destroy = this.images_group.find((image: any) => image.key === textureName);\r\n        \r\n        if(image_to_destroy !== undefined) {\r\n            image_to_destroy.image.destroy(textureName);\r\n        }\r\n        \r\n        this.textures.remove(textureName);\r\n        // Eliminamos la textura que se ha removido\r\n        this.images_group = this.images_group.filter((image: any) => image.key !== textureName);\r\n    }\r\n}\r\n\r\nexport default RenderScene;","const prepareJSON = (data: any) => {\r\n    return data.map((obj: any) => {\r\n        return {\r\n            width: obj.width,\r\n            height: obj.height,\r\n            data: {\r\n                id: obj.id,\r\n                name: obj.name,\r\n                // src: obj.src,\r\n                origin: obj.origin\r\n            }\r\n        };\r\n    });\r\n}\r\nexport default prepareJSON;","export class MaxRectTool {\r\n    spritePerRow: number = 0;\r\n    extrusion: number = 0;\r\n    MaxRect: any;\r\n    bins: Array<any> = [];\r\n    constructor( spritePerRow = 3, extrusion = 0 ) {\r\n        this.spritePerRow = spritePerRow;\r\n        this.extrusion = extrusion;\r\n        this.MaxRect = {\r\n            width: 0,\r\n            height: 0,\r\n            padding: 0,\r\n            rects: []\r\n        };\r\n    }\r\n\r\n    addArray(json: any) {\r\n        const yGrid = Math.ceil(json.length / this.spritePerRow);\r\n\r\n        const rects = [];\r\n        // Nos ayuda a hacer el salto en Y para poder obtener el tamaño máximo del lienzo\r\n        let yJump = false;\r\n        // Nos ayudará a obtener las filas limite\r\n        const maxHeight = [-1];\r\n\r\n        for (let y = 0; y < yGrid; y++) {\r\n            yJump = false;\r\n            maxHeight[y] = 0;\r\n            for (let x = 0; x < this.spritePerRow; x++) {\r\n                if (json[y * this.spritePerRow + x] !== undefined) {\r\n\r\n                    const jsonOutput: any = {\r\n                        x: (rects[y * this.spritePerRow + (x - 1)] !== undefined && yJump) ?\r\n                            rects[y * this.spritePerRow + (x - 1)].x\r\n                            + rects[y * this.spritePerRow + (x - 1)].width\r\n                            + this.extrusion * 2 : this.extrusion,\r\n                        y: (rects[(y - 1) * this.spritePerRow + x] !== undefined) ?\r\n                            (maxHeight[y - 1] === undefined) ? 0 : maxHeight[y - 1] + this.extrusion * 2\r\n                            : this.extrusion,\r\n                        width: json[y * this.spritePerRow + x].width,\r\n                        height: json[y * this.spritePerRow + x].height,\r\n                        data: json[y * this.spritePerRow + x].data\r\n                    };\r\n                    yJump = true;\r\n                    rects.push(jsonOutput);\r\n                    // Obtener el height máximo y el width máximo\r\n                    if (yJump) {\r\n                        if (this.MaxRect.width < (rects[y * this.spritePerRow + x].x + rects[y * this.spritePerRow + x].width)) {\r\n                            this.MaxRect.width = (rects[y * this.spritePerRow + x].x + rects[y * this.spritePerRow + x].width) + this.extrusion;\r\n                        }\r\n                        if (this.MaxRect.height < (rects[y * this.spritePerRow + x].y + rects[y * this.spritePerRow + x].height)) {\r\n                            this.MaxRect.height = (rects[y * this.spritePerRow + x].y + rects[y * this.spritePerRow + x].height) + this.extrusion;\r\n                        }\r\n\r\n                        if (maxHeight[y] < (rects[y * this.spritePerRow + x].y + rects[y * this.spritePerRow + x].height)) {\r\n                            maxHeight[y] = (rects[y * this.spritePerRow + x].y + rects[y * this.spritePerRow + x].height);\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        this.MaxRect.rects = rects;\r\n        this.bins = [this.MaxRect];\r\n    }\r\n}\r\n","import React, { PureComponent } from \"react\";\r\nimport Modal from \"react-responsive-modal\";\r\nimport './ExportModal.scss';\r\nimport clearName from \"../../../../../utils/clearNames\";\r\nimport { isEmpty } from \"ramda\";\r\nimport { Observer, GLOBAL_EVENT } from \"../../../Observer\";\r\n\r\ninterface stateInterface {\r\n    open: boolean,\r\n    form: { name: string, scale: number, type: string }\r\n}\r\n\r\nexport class ExportModal extends PureComponent<{}, stateInterface> {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            form: { name: 'default_name', scale: 1, type: 'export' }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(GLOBAL_EVENT.OPEN_EXPORT_OPTIONS_PC, () => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true\r\n            });\r\n        });\r\n    }\r\n\r\n    handleName = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            ...this.state,\r\n            form: {\r\n                ...this.state.form,\r\n                name: clearName(event.target.value)\r\n            }\r\n        });\r\n    }\r\n\r\n    handleScale = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (this.state.form.scale > 10) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: 10\r\n                }\r\n            });\r\n\r\n        } else if (this.state.form.scale < -10) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: -10\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: Number(event.target.value)\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    handleClickOk = () => {\r\n        if (isEmpty(this.state.form.name)) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    name: 'default_name'\r\n                }\r\n            });\r\n        } else {\r\n            // Emitimos el evento para requerir la imágen de canvas.\r\n            // Cuando todo está listo el ./render/RenderScene.ts emite el evento de GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED\r\n            Observer.emit(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS, this.state.form);\r\n            this.handleCloseModal();\r\n        }\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal open={this.state.open} onClose={this.handleCloseModal} closeOnOverlayClick={false} center classNames={{ outline: '10px solid red' }} styles={{ marginTop: '1000px' }}>\r\n                <div id=\"export-container\">\r\n                    <h3 className=\"noselect\">Export options</h3>\r\n                    <div className=\"noselect export-container--group\">\r\n                        <div className=\"atlasNameForm\">\r\n                            <label htmlFor=\"atlasName\">Atlas Name:</label>\r\n                            <br />\r\n                            <input type=\"text\" id=\"atlasName\" onChange={this.handleName} onBlur={this.handleName} value={this.state.form.name} />\r\n                        </div>\r\n                        <div className=\"atlasScaleForm\">\r\n                            <label htmlFor=\"atlasName\">Atlas scale:</label>\r\n                            <input type=\"number\" id=\"atlasScale\" min={1} max={10} onChange={this.handleScale} onBlur={this.handleScale} value={this.state.form.scale} />\r\n                        </div>\r\n                        <div className=\"exportButtonsForm\">\r\n                            <button onClick={this.handleCloseModal}>Cancel</button>\r\n                            <button onClick={this.handleClickOk}>Ok</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ExportModal;\r\n","import store from '../Redux/Store/store';\r\nimport clearName from './clearNames';\r\n\r\n/**\r\n * Esta funcion nos ayuda para crear nuestro json para el atlas packer\r\n */\r\nconst createAtlasJSON = (scale: number) => {\r\n    const MaxRectData = store.getState().maxrectAtlas\r\n    const atlasJSON = {\r\n        frames: MaxRectData.map(sprite_data => {\r\n            return {\r\n                filename: clearName(sprite_data.data.name),\r\n                frame: {\r\n                    w: sprite_data.width * scale,\r\n                    h: sprite_data.height * scale,\r\n                    x: sprite_data.x * scale,\r\n                    y: sprite_data.y * scale\r\n                },\r\n                anchor: {\r\n                    x: sprite_data.data.origin.x,\r\n                    y: sprite_data.data.origin.y,\r\n                }\r\n\r\n            };\r\n        }),\r\n        meta: {\r\n            description: 'Atlas generado con Atlas Packer Gamma V2',\r\n            web: 'https://gammafp.github.io/atlas-packer-phaser/'\r\n        }\r\n    };\r\n    return JSON.stringify(atlasJSON, null, '    ');\r\n}\r\n\r\nexport default createAtlasJSON;","\r\nimport * as JSZIP from 'jszip';\r\nimport { ImageCanvasData } from '../Views/AtlasPacker/Observer';\r\nimport createAtlasJSON from './createAtlasJSON';\r\n\r\nconst createExportZipAtlas = (data: ImageCanvasData) => {\r\n    const atlas_original = createAtlasJSON(1);\r\n    const atlas_scaled = createAtlasJSON(data.scale);\r\n\r\n    const JSZip = require('jszip');\r\n    \r\n    const zip: JSZIP = new JSZip();\r\n    \r\n    zip.file(`${data.name}.png`, data.src.replace('data:image/png;base64,', ''), { base64: true });\r\n    zip.file(`${data.name}_atlas.json`, atlas_scaled);\r\n\r\n    const folder_original = zip.folder('original');\r\n    folder_original.file(`${data.name}.png`, data.src_original.replace('data:image/png;base64,', ''), { base64: true })\r\n    folder_original.file(`${data.name}_atlas.json`, atlas_original);\r\n    return zip;\r\n}\r\n\r\nexport default createExportZipAtlas;","import * as Phaser from 'phaser';\r\nimport b64toBlob from '../../../../../../utils/b64toBlob';\r\nimport { Observer, GLOBAL_EVENT } from '../../../../Observer';\r\nimport generateId from '../../../../../../utils/generateId';\r\nimport store from '../../../../../../Redux/Store/store';\r\nimport { AddImage, ImageData } from '../../../../../../Redux/Actions/Atlas/images.action';\r\n\r\n// TODO: Mandar calculateGrid a utils/\r\nconst calculateGrid = (grid_options: { width: number, height: number, space: number }, canvas: { width: number, height: number }) => {\r\n    let actual_position = { x: Math.floor(canvas.width / grid_options.width), y: Math.floor(canvas.height / grid_options.height) };\r\n    if (grid_options.space > 1) {\r\n        const x = Math.floor(canvas.width / ((actual_position.x + 1) * grid_options.space / actual_position.x + grid_options.width));\r\n        const y = Math.floor(canvas.height / ((actual_position.y + 1) * grid_options.space / actual_position.y + grid_options.height));\r\n        actual_position = { x, y };\r\n    }\r\n    return actual_position;\r\n}\r\n\r\nclass ImportAtlasRenderScene extends Phaser.Scene {\r\n    // Nos ayuda a obtener el tamaño original\r\n    canvas_size = {\r\n        width: 0,\r\n        height: 0\r\n    }\r\n\r\n    name: string = 'imagen_defecto';\r\n    // Sistema de grid\r\n    graphics: any;\r\n    lineStrike = 2;\r\n    grid_width = 10;\r\n    grid_height = 10;\r\n    space = 0;\r\n\r\n    zoom_scale = 1;\r\n    block: any;\r\n\r\n    constructor() {\r\n        super({ key: 'ImportAtlasRenderScene' })\r\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE);\r\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON);\r\n    }\r\n\r\n    init() {\r\n        this.graphics = this.add.graphics({ lineStyle: { width: 2, color: 0xffffff }, fillStyle: { color: 0xaa0000 } }).setDepth(200);\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE, (options) => {\r\n            if (options.width !== this.grid_width) {\r\n                this.grid_width = options.width;\r\n            }\r\n            if (options.height !== this.grid_height) {\r\n                this.grid_height = options.height;\r\n            }\r\n            if (options.separation !== this.space) {\r\n                this.space = options.separation;\r\n            }\r\n            if (options.zoom !== this.zoom_scale) {\r\n                this.zoom_scale = options.zoom / 100;\r\n                this.setZoom();\r\n            }\r\n            this.createGrid();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON, () => {\r\n            this.cutSprites();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_JSON, (atlas_json) => {\r\n            this.cutSprites(atlas_json);\r\n        });\r\n\r\n        // Evento interno para enviar el nombre\r\n        this.events.on('set_name', (name: string) => {\r\n            this.name = name;\r\n        });\r\n\r\n        this.load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n            this.load_complete();\r\n        });\r\n    }\r\n\r\n    load_complete() {\r\n        this.block = this.add.image(0, 0, this.name)\r\n            .setScale(this.zoom_scale)\r\n            .setOrigin(0);\r\n\r\n        this.scale.setGameSize(this.block.width * this.zoom_scale, this.block.height * this.zoom_scale);\r\n        this.canvas_size.width = this.block.width;\r\n        this.canvas_size.height = this.block.height;\r\n\r\n        this.createGrid();\r\n    }\r\n\r\n    resetZoom() {\r\n        this.block.setScale(1);\r\n        this.scale.setGameSize(this.canvas_size.width, this.canvas_size.height);\r\n    }\r\n\r\n    setZoom() {\r\n        this.block.setScale(this.zoom_scale);\r\n        this.scale.setGameSize(this.block.width * this.zoom_scale, this.block.height * this.zoom_scale);\r\n        this.createGrid();\r\n    }\r\n\r\n    createGrid() {\r\n        const grid_width = this.grid_width * this.zoom_scale;\r\n        const grid_height = this.grid_height * this.zoom_scale;\r\n\r\n        const space = this.space * this.zoom_scale;\r\n        const grid = calculateGrid({ width: this.grid_width, height: this.grid_height, space: this.space }, this.canvas_size);\r\n        // Construimos el grid\r\n        this.graphics.clear();\r\n        this.graphics.lineStyle(this.lineStrike, 0xffffff);\r\n        for (let y = 0; y < grid.y; y++) {\r\n            for (let x = 0; x < grid.x; x++) {\r\n                const pos_x = (x * grid_width + space * (x + 1));\r\n                const pos_y = y * grid_height + space * (y + 1);\r\n                const rect = new Phaser.Geom.Rectangle(pos_x, pos_y, grid_width, grid_height);\r\n\r\n                this.graphics.strokeRectShape(rect);\r\n            }\r\n        }\r\n    }\r\n\r\n    cutSprites(atlas_json = \"no_atlas\") {\r\n        const grid = calculateGrid({ width: this.grid_width, height: this.grid_height, space: this.space }, this.canvas_size);\r\n\r\n        if (((grid.x * grid.y) > 1000) && atlas_json === 'no_atlas') {\r\n            console.log('Esto noe s un atlas');\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, `The limit of frames is 1000 you are superate it in ${(grid.x * grid.y)} (width * height),  reduce it.`)\r\n        } else {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\r\n            this.graphics.clear();\r\n            // Acá recibimos la data de la imagen\r\n            this.load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n                const texturesKeys = Object.keys(this.textures.get(`${this.name}_spritesheet`).frames).filter((key: string) => key !== '__BASE');\r\n                const ImagesData: ImageData[] = texturesKeys.map((key: any, i: number): ImageData => {\r\n                    const frame = this.textures.getFrame(`${this.name}_spritesheet`, key);\r\n                    const src_b64 = this.textures.getBase64(`${this.name}_spritesheet`, key);\r\n                    return {\r\n                        id: generateId(),\r\n                        name: (atlas_json === 'no_atlas') ? `${this.name}_${i}` : frame.name,\r\n                        width: frame.width,\r\n                        height: frame.height,\r\n                        size: 0,\r\n                        active: false,\r\n                        changeName: false,\r\n                        src: src_b64,\r\n                        origin: {\r\n                            x: 0.5,\r\n                            y: 0.5\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT);\r\n                store.dispatch(AddImage(ImagesData));\r\n            });\r\n\r\n            this.resetZoom();\r\n            this.graphics.setDepth(-1);\r\n\r\n            // Se monta la imagen y más arriba se recibe esta imagen\r\n            this.game.renderer.snapshot((image: any) => {\r\n                if (atlas_json !== \"no_atlas\") {\r\n                    this.load.atlas(`${this.name}_spritesheet`, URL.createObjectURL(b64toBlob(image.src)), JSON.parse(atlas_json));\r\n                } else {\r\n                    this.load.spritesheet(`${this.name}_spritesheet`, URL.createObjectURL(b64toBlob(image.src)), { frameWidth: this.grid_width, frameHeight: this.grid_height, margin: this.space, spacing: this.space });\r\n                }\r\n                this.load.start();\r\n            });\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default ImportAtlasRenderScene;","import React, { PureComponent } from \"react\";\r\n\r\n// Componentes\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport ImportAtlasRenderScene from \"./ImportAtlasRenderScene\";\r\n\r\nimport './ImportAtlasRender.scss';\r\nimport { Observer, GLOBAL_EVENT } from \"../../../../Observer\";\r\nimport b64toBlob from \"../../../../../../utils/b64toBlob\";\r\nimport { ImageData } from \"../../../../../../Redux/Actions/Atlas/images.action\";\r\n\r\ninterface stateInterface {\r\n    open: boolean\r\n}\r\n\r\nlet _scrollBarRefAtlas: any = null;\r\n\r\nexport class ImportAtlasRender extends PureComponent<{}, stateInterface> {\r\n    game: any;\r\n    componentDidMount() {\r\n        _scrollBarRefAtlas.updateScroll();\r\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE);\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE, (images: Required<ImageData>[]) => {\r\n            this.game = new Phaser.Game({\r\n                width: 0,\r\n                height: 0,\r\n                parent: 'render-atlas-import',\r\n                type: Phaser.CANVAS,\r\n                backgroundColor: 'rgba(0, 0, 0, 0)',\r\n                banner: {\r\n                    hidePhaser: true\r\n                },\r\n                audio: {\r\n                    noAudio: true\r\n                },\r\n                render: {\r\n                    pixelArt: true\r\n                },\r\n                scene: [ImportAtlasRenderScene],\r\n            });\r\n\r\n            /**\r\n             * Se espera que la escena esté cargada\r\n             * Una vez esté cargada se obtiene la escena\r\n             * Envíamos el evento para setear el nombre que usaremos internamente durante el proceso de cortado\r\n             * Cargamos la imagen e iniciamos el load con start()\r\n             */\r\n            this.game.registry.events.on(Phaser.Scenes.Events.READY, () => {\r\n                const scene = (this.game as Phaser.Game).scene.getScene('ImportAtlasRenderScene');\r\n                scene.events.emit('set_name', images[0].name)\r\n                scene.load.image(images[0].name, URL.createObjectURL(b64toBlob(images[0].src)));\r\n                scene.load.start();\r\n            });\r\n        \r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT, () => {\r\n            this.game.destroy(true);\r\n        });\r\n    }\r\n\r\n    handleDrag(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        if (!!event.buttons) {\r\n            const scroll = document.querySelector('.scrollContainerAtlas') as HTMLDivElement;\r\n            scroll.scrollLeft = scroll.scrollLeft - event.movementX;\r\n            scroll.scrollTop = scroll.scrollTop - event.movementY;\r\n            _scrollBarRefAtlas.updateScroll();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lienzo-render\">\r\n                <PerfectScrollbar className=\"scrollContainerAtlas\" ref={(ref) => { _scrollBarRefAtlas = ref }}>\r\n                    <div id=\"render-atlas-import\" onMouseMove={this.handleDrag}></div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ImportAtlasRender;\r\n","const getFilesText = (files: any) => {\r\n    return new Promise((resolve) => {\r\n        const Files = Array.from(files);\r\n        \r\n        Files.forEach((file: any): void => {\r\n            const reader = new FileReader();\r\n            reader.onload = (fileURL: any) => {\r\n                resolve(fileURL.target.result);\r\n            };\r\n            reader.readAsBinaryString(file);\r\n        });\r\n    });\r\n}\r\n\r\nexport default getFilesText;","/**\r\n * Nos ayuda a comprobar si es un atlas propio de Phaser\r\n */\r\nconst isPhaserAtlas = (data: string): boolean => {\r\n    let isAtlas = false;\r\n    try {\r\n        JSON.parse(data);\r\n        isAtlas = true;\r\n    } catch (error) {\r\n        isAtlas = false;\r\n    }\r\n\r\n    if(isAtlas) {\r\n        const have_frames = (data.search('frames') !== -1);\r\n        const have_frame = (data.search('frame') !== -1);\r\n        const have_filename = (data.search('filename') !== -1);\r\n        if(!have_filename || !have_frame || !have_frames) {\r\n            isAtlas = false;\r\n        } else {\r\n            isAtlas = true;\r\n        }\r\n    }\r\n    return isAtlas;\r\n}\r\n\r\nexport default isPhaserAtlas;","import React, { PureComponent, createRef } from \"react\";\r\nimport Modal from \"react-responsive-modal\";\r\nimport './ImportAtlasModal.scss';\r\nimport { Observer, GLOBAL_EVENT } from \"../../../Observer\";\r\nimport ImportAtlasRender from \"./atlasRender/ImportAtlasRender\";\r\nimport getFilesText from \"../../../../../utils/getFilesText\";\r\nimport isPhaserAtlas from \"../../../../../utils/isPhaserAtlas\";\r\n\r\n// Componentes\r\ninterface stateInterface {\r\n    open: boolean,\r\n    width: number,\r\n    height: number,\r\n    separation: number,\r\n    zoom: number\r\n}\r\n\r\nclass ImportAtlas extends PureComponent<{}, stateInterface> {\r\n    canva_atlas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    zoom_step = 10;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            width: 10,\r\n            height: 10,\r\n            separation: 0,\r\n            zoom: 100\r\n        }\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT, (image) => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true\r\n            });\r\n            setTimeout(() => {\r\n                Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE, image);\r\n            }, 20);\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT, () => { this.handleCloseModal() });\r\n\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false\r\n        });\r\n    }\r\n\r\n    handleWheel(event: any) {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.state.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom > 20 && zoom <= 500) {\r\n                    value = Number((zoom - this.zoom_step * event.deltaY / 100).toPrecision(2));\r\n                    value = value < 20 ? value = 2 : value > 500 ? value = 500 : value;\r\n                }\r\n            }\r\n            this.sendState({\r\n                ...this.state,\r\n                zoom: value\r\n            });\r\n\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    sendState(options: any) {\r\n        this.setState(options);\r\n        Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE, options);\r\n    }\r\n\r\n    handleInputZoom = (parcentInput: number) => {\r\n        const minZoom = 20;\r\n        const maxZoom = 500;\r\n        const numberPercent: number = Math.round(parcentInput);\r\n        const finalZoom: number = (numberPercent <= minZoom)\r\n            ? minZoom\r\n            : (numberPercent >= maxZoom)\r\n                ? maxZoom\r\n                : numberPercent;\r\n\r\n        this.sendState({\r\n            ...this.state,\r\n            zoom: finalZoom\r\n        });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (!!this.state.open) {\r\n            this.canva_atlas_container.current?.addEventListener('wheel', this.handleWheel, { passive: false });\r\n        }\r\n    }\r\n\r\n    async handleImportAltas(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAtlas(files_loaded as string)) {\r\n            Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_JSON, files_loaded);\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\r\n        } else {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, 'Atlas format incorrect');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal open={this.state.open} onClose={this.handleCloseModal} closeOnOverlayClick={false} center classNames={{ outline: '10px solid red' }} styles={{ marginTop: '1000px' }}>\r\n                <h3 className=\"noselect\">Import Atlas Options</h3>\r\n\r\n                <div className=\"noselect import-atlas-container\" ref={this.canva_atlas_container}>\r\n                    <div className=\"import-atlas-container--left\">\r\n                        <div className=\"canvas-atlas-container\">\r\n                            <ImportAtlasRender />\r\n                        </div>\r\n                        <div className=\"canvas-atlas-zoom\">\r\n                            <input type=\"number\" id=\"atlas-container-input--zoom\" value={this.state.zoom} onChange={(event) => {\r\n                                this.handleInputZoom(Number(event.target.value));\r\n                            }} /> %\r\n                            <span id=\"atlas-zoom-minus\" onClick={() => { this.handleInputZoom(this.state.zoom - 10); }}>-</span>\r\n                            <span id=\"atlas-zoom-plus\" onClick={() => { this.handleInputZoom(this.state.zoom + 10); }}>+</span>\r\n                            <span id=\"atlas-zoom-reset\" onClick={() => { this.handleInputZoom(100); }}>Reset</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"import-atlas-container--right\">\r\n                        <div className=\"import-atlas--panel--container\">\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_width\">Width (px): </label>\r\n                                <input type=\"number\" id=\"atlas_width\" min='1' value={this.state.width} onChange={(event) => {\r\n                                    this.sendState({ \r\n                                        ...this.state, \r\n                                        width: Number(event.target.value) > 3 ? Number(event.target.value) : 4\r\n                                    });\r\n                                }} />\r\n                            </div>\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_height\">Height (px): </label>\r\n                                <input type=\"number\" id=\"atlas_height\" min='1' value={this.state.height} onChange={(event) => {\r\n                                       this.sendState({\r\n                                        ...this.state,\r\n                                        height: Number(event.target.value) > 3 ? Number(event.target.value) : 4\r\n                                    });\r\n                                }} />\r\n                            </div>\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_separation\">Space (px): </label>\r\n                                <input type=\"number\" id=\"atlas_separation\" value={this.state.separation} onChange={(event) => {\r\n                                    this.sendState({\r\n                                        ...this.state,\r\n                                        separation: Number(event.target.value)\r\n                                    });\r\n                                }} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"import-atlas-panel--buttons\">\r\n                            <button className=\"fileUpload\">\r\n                                Import atlas\r\n                                <input type=\"file\" className=\"upload cursor-pointer uploadSprites\" accept=\"application/json\" onChange={this.handleImportAltas} />\r\n                            </button>\r\n                            <button onClick={() => {\r\n                                Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON);\r\n                            }\r\n                            }>Import</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ImportAtlas;\r\n","import React, { Component } from 'react';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './ToastNotification.scss';\r\n\r\nclass ToastNotification extends Component {\r\n\r\n    componentDidMount() {\r\n        // TODO: los toast tienen un error cuando son lanzados por segunda vez (posible error de la herramienta de toast)\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, (msg: string) => {\r\n            toast.warn(msg, {\r\n                className: 'toast-warn',\r\n                position: \"top-center\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true\r\n            });\r\n        });\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, (msg: string) => {\r\n            toast.error(msg, {\r\n                className: 'toast-error',\r\n                position: \"top-center\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true\r\n            });\r\n        });\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR, () => {\r\n            toast.dismiss();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ToastContainer />\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToastNotification;","import React, { useRef } from 'react';\r\nimport './DragDropFiles.scss';\r\nimport getImageFiles from '../../../../utils/getImages';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { isEmpty } from 'ramda';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nconst DragDropFiles = (props: any) => {\r\n    const dragBox = useRef<HTMLDivElement>(null);\r\n    const imagesState = useSelector((state: RootState) => state.imagesAtlas);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleDragEnterOver = (event: React.DragEvent<HTMLDivElement>) => {\r\n        dragBox.current?.classList.add('drag-drop-box-over');\r\n        event.preventDefault();\r\n    }\r\n    const handleDargLeave = (event: React.DragEvent<HTMLDivElement>) => {\r\n        dragBox.current?.classList.remove('drag-drop-box-over');\r\n    }\r\n    const handleDrop = async (event: React.DragEvent<HTMLDivElement>) => {\r\n        const files = event.dataTransfer.files;\r\n        const images = await getImageFiles(files) as ImageData[];\r\n        dispatch(AddImage(images));\r\n        dragBox.current?.classList.remove('drag-drop-box-over');\r\n    }\r\n\r\n    return (\r\n        <div ref={dragBox} className={`${props.className} drag-drop-box`}\r\n            onDragEnter={handleDragEnterOver}\r\n            onDragOver={handleDragEnterOver}\r\n            onDragLeave={handleDargLeave}\r\n            onDrop={handleDrop}\r\n        >\r\n            {\r\n                (isEmpty(imagesState)) ?\r\n                    <div className=\"drag-drop-box-notification\">\r\n                        You can drop an image here!\r\n                    </div> : ''\r\n            }\r\n            {props.children}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DragDropFiles;","import React, { useEffect, useState } from \"react\";\r\nimport { css } from \"@emotion/core\";\r\n// First way to import\r\nimport { MoonLoader } from \"react-spinners\";\r\nimport { Observer, GLOBAL_EVENT } from \"../../../Observer\";\r\nimport { css as CSS } from 'glamor';\r\n\r\n// Can be a string as well. Need to ensure each key-value pair ends with ;\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  border-color: red;\r\n`;\r\n\r\nconst spinner_styles = CSS({\r\n    position: 'absolute !important',\r\n    width: '100%',\r\n    height: '100vh',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    zIndex: '2',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n});\r\n\r\nconst SpinnerModal = () => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        Observer.on(GLOBAL_EVENT.SPINNER.OPEN, () => {\r\n            setLoading(true);\r\n        });\r\n        Observer.on(GLOBAL_EVENT.SPINNER.CLOSE, () => {\r\n            setLoading(false);\r\n        });\r\n    });\r\n    return (\r\n        <div className={`${spinner_styles} ${!loading && 'd-none' }`}>\r\n            <div className=\"sweet-loading\">\r\n                <MoonLoader\r\n                    css={override}\r\n                    size={60}\r\n                    color={\"#EC6139\"}\r\n                    loading={loading}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SpinnerModal;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { SplitPane } from 'react-multi-split-pane';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { saveAs } from 'file-saver';\r\n\r\n// Estilos\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport './AtlasPacker.scss';\r\nimport 'animate.css';\r\n\r\n// Componentes\r\nimport MenuComponent from './components/menu/Menu';\r\nimport CardImage from './components/cardImage/CardImage';\r\nimport ContextMenu from './components/contextMenu/ContextMenu';\r\nimport ExportButton from './components/exportButtons/ExportButton';\r\nimport Zoom from './components/zoom/Zoom';\r\nimport Algorithm from './components/algorithm/Algorithm';\r\nimport Render from './components/render/Render';\r\n\r\n// Redux\r\nimport { CloseSideContextMenuAction } from '../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport store from '../../Redux/Store/store';\r\nimport { Observer, GLOBAL_EVENT, ImageCanvasData } from './Observer';\r\nimport ExportModal from './components/modals/exportModal/ExportModal';\r\n\r\n// UI\r\nimport createExportZipAtlas from '../../utils/createExportZipAtlas';\r\nimport ImportAtlas from './components/modals/importAtlas/ImportAtlas';\r\nimport { DesSelectImage, ResetImage } from '../../Redux/Actions/Atlas/images.action';\r\nimport ToastNotification from './components/notifications/ToastNotification';\r\nimport DragDropFiles from './components/dragDropFiles/DragDropFiles';\r\nimport { ResetAlgorithmAction } from '../../Redux/Actions/Atlas/algorithmPanel.action';\r\nimport { ResetMaxRectAction } from '../../Redux/Actions/Atlas/maxrect.action'\r\nimport { ResetZoomAction } from '../../Redux/Actions/Atlas/zoom.action';\r\nimport SpinnerModal from './components/modals/spinnerModal/SpinnerModal';\r\nimport ImportGifs from './components/modals/importGifs/ImportGifs';\r\nimport PatreonModal from './components/modals/patreonModal/PatreonModal';\r\n\r\nlet _scrollBarRef: any;\r\n\r\ninterface dispatchInterface {\r\n    CloseSideContextMenuAction: () => {},\r\n    DesSelectImage: () => {},\r\n    ResetImage: () => {},\r\n    ResetAlgorithmAction: () => {},\r\n    ResetMaxRectAction: () => {},\r\n    ResetZoomAction: () => {}\r\n}\r\n\r\nclass AtlasPacker extends Component<dispatchInterface, { exportModalOpen: boolean }>  {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            exportModalOpen: false\r\n        };\r\n        Observer.removeAllListeners();\r\n    }\r\n\r\n    handleClickContainerAtlas = () => {\r\n        if (store.getState().contextSideMenuAtlas.active) {\r\n            this.props.CloseSideContextMenuAction();\r\n        }\r\n        Observer.emit(GLOBAL_EVENT.IMAGE_DES_SELECTED);\r\n        this.props.DesSelectImage();\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.props.ResetImage();\r\n        this.props.ResetAlgorithmAction();\r\n        this.props.ResetMaxRectAction();\r\n        this.props.ResetZoomAction();\r\n\r\n        Observer.removeAllListeners();\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED, async (image_canvas_data: ImageCanvasData) => {\r\n            const zip = createExportZipAtlas(image_canvas_data);\r\n            const file = await zip.generateAsync({ type: 'blob' });\r\n            saveAs(file, `${image_canvas_data.name}.zip`);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <SpinnerModal />\r\n                <ToastNotification />\r\n\r\n                <div className=\"principal-container\"\r\n                    onContextMenu={(event) => event.preventDefault()}\r\n                    onClickCapture={this.handleClickContainerAtlas}\r\n                    onDrop={e => e.preventDefault()}\r\n                    onDragOver={e => e.preventDefault()}\r\n                >\r\n                    <MenuComponent />\r\n                    <SplitPane split=\"vertical\" className=\"panels-container\" defaultSizes={[20, 60, 20]} minSize={[200, 500, 200]} onDragFinished={() => Observer.emit(GLOBAL_EVENT.PANEL_RESIZE_END)}>\r\n                        <DragDropFiles className=\"left-panel\">\r\n                            <div className=\"left-panel--image_container\">\r\n                                <PerfectScrollbar options={{ suppressScrollX: true }} className=\"texto\" ref={(ref) => { _scrollBarRef = ref }}>\r\n                                    <CardImage />\r\n                                </PerfectScrollbar>\r\n                            </div>\r\n                        </DragDropFiles>\r\n                        <div className=\"center-panel\">\r\n                            <div className=\"center-panel--up\">\r\n                                <Render />\r\n                            </div>\r\n                            <div className=\"center-panel--down\">\r\n                                <Zoom />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"right-panel\">\r\n                            <div className=\"right-panel--up\">\r\n                                <Algorithm />\r\n                            </div>\r\n                            <div className=\"right-panel--down\">\r\n                                <ExportButton title=\"Export\" handleClick={() => {\r\n                                    Observer.emit(GLOBAL_EVENT.OPEN_EXPORT_OPTIONS_PC);\r\n                                }} />\r\n                                <div className=\"d-none\">\r\n                                    <ExportButton title=\"Save in game\" handleClick={() => {\r\n                                        Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, 'This is not a correct Atlas Phaser format')\r\n                                    }} />\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </SplitPane>\r\n                    <ContextMenu onUpdateSize={() => {\r\n                        _scrollBarRef.updateScroll()\r\n                    }} />\r\n                </div>\r\n                <ExportModal />\r\n                <ImportAtlas />\r\n                <ImportGifs />\r\n                <PatreonModal />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    CloseSideContextMenuAction,\r\n    DesSelectImage,\r\n    ResetImage,\r\n    ResetAlgorithmAction,\r\n    ResetMaxRectAction,\r\n    ResetZoomAction\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(AtlasPacker);\r\n","import React from 'react';\r\nimport './Frames.scss';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { ActivateFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { Observer } from '../../../AtlasPacker/Observer';\r\nimport { ReactSortable } from 'react-sortablejs';\r\nimport { equals } from 'ramda';\r\nimport { SwipeFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\n\r\nlet _scrollBarRef: any;\r\nlet last_frame_div: HTMLDivElement;\r\n\r\nexport const Frames = () => {\r\n    // last_frame = '';\r\n    const frames_list_state = useSelector((state: RootState) => state.AnimationList);\r\n    const frames_list = frames_list_state.animations.find((animation: any) => animation.id === frames_list_state.actual_animation)\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    if (last_frame_div !== undefined) {\r\n        last_frame_div.classList.remove('frame-play');\r\n    }\r\n\r\n    // El frame Tracker\r\n    Observer.removeListener(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES);\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES, (frames: string) => {\r\n        const actual_animation_list = store.getState().AnimationList;\r\n        \r\n        if ((frames_list !== undefined) && (actual_animation_list.actual_animation !== '0')) {\r\n            const frame_div = document.getElementById(`${frames}`) as HTMLDivElement;\r\n            \r\n            if (last_frame_div !== undefined) {\r\n                last_frame_div.classList.remove('frame-play');\r\n            }\r\n\r\n            if(frame_div !== undefined) {\r\n                frame_div.classList.add('frame-play');\r\n                last_frame_div = frame_div;\r\n                const perfectScrollFrame = document.querySelector('.perfect-scroll-frames-container') as HTMLDivElement;\r\n                perfectScrollFrame.scrollLeft = frame_div.offsetLeft - 150;\r\n                _scrollBarRef.updateScroll();\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n    return (\r\n        <PerfectScrollbar className=\"perfect-scroll-frames-container\" ref={(e) => _scrollBarRef = e}>\r\n            <div>\r\n                <h4 className=\"ml-2 mt-1 mb-2 text-color-primary\">\r\n                    Frames\r\n            </h4>\r\n                <div className={`frames-container mr-2`}>\r\n                    <ReactSortable list={(frames_list !== undefined) ? frames_list.frames : []}\r\n                        setList={(newState) => {\r\n                            if (!equals(newState, (frames_list !== undefined) ? frames_list.frames : [])) {\r\n                                dispatch(SwipeFrameAction({\r\n                                    id: frames_list_state.actual_animation,\r\n                                    frames: newState\r\n                                }));\r\n                            }\r\n                        }} swap>\r\n                        {\r\n                            (frames_list !== undefined) && frames_list.frames.map((frame: any, key: number) =>\r\n                                <div id={`${frame.name}_${key + 1}`} key={key} className={`images-frames--container ${frame.active ? 'frame-active' : ''}`} onClick={\r\n                                    () => {\r\n                                        dispatch(ActivateFrameAction({ local_id: frame.local_id }));\r\n                                    }\r\n                                }\r\n                                    onContextMenu={(event) => {\r\n                                        dispatch(ActivateSideContextMenuAction({\r\n                                            x: event.clientX,\r\n                                            y: event.clientY,\r\n                                            id: frame.local_id,\r\n                                            options: {\r\n                                                value: 'frames'\r\n                                            },\r\n                                            active: true,\r\n                                        }));\r\n                                    }}\r\n                                >\r\n                                    <div>\r\n                                        <img src={frame.src} alt={frame.name} title={frame.name} />\r\n                                    </div>\r\n                                </div>)\r\n                        }\r\n                    </ReactSortable>\r\n                </div>\r\n            </div>\r\n        </PerfectScrollbar>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Modal from \"react-responsive-modal\";\r\nimport \"./ImportGifs.scss\";\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { Observer, GLOBAL_EVENT, GifImports } from \"../../../Observer\";\r\nimport { AddImage, ImageData } from \"../../../../../Redux/Actions/Atlas/images.action\";\r\nimport { connect } from \"react-redux\";\r\nimport generateId from \"../../../../../utils/generateId\";\r\n\r\nclass ImportGifs extends React.Component<{AddImage: (Images: Array<ImageData>) => {}}, { open: boolean, gifs: GifImports }>{\r\n    default_gifs: GifImports = {\r\n        width: 0,\r\n        height: 0,\r\n        name: '',\r\n        srcs: []\r\n    };\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            gifs: this.default_gifs\r\n        }\r\n        this.handleAddGif = this.handleAddGif.bind(this);\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_GIF, (gifs: GifImports) => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true,\r\n                gifs\r\n            });\r\n        });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n            gifs: this.default_gifs\r\n        });\r\n    }\r\n\r\n    handleAddGif() {\r\n        const ImagesData: ImageData[] = this.state.gifs.srcs.map((src, index: number): ImageData => {\r\n            return {\r\n                id: generateId(),\r\n                name: `${this.state.gifs.name}_${index}`,\r\n                width: this.state.gifs.width,\r\n                height: this.state.gifs.height,\r\n                size: 0,\r\n                active: false,\r\n                changeName: false,\r\n                src: src,\r\n                origin: {\r\n                    x: 0.5,\r\n                    y: 0.5\r\n                }\r\n            }\r\n        });\r\n        \r\n        this.props.AddImage(ImagesData);\r\n        this.handleCloseModal();\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Modal open={this.state.open} onClose={this.handleCloseModal} closeOnOverlayClick={false} center classNames={{ outline: '10px solid red' }} styles={{ marginTop: '1000px' }}>\r\n                <h3 className=\"noselect mb-3\">Import Gif options</h3>\r\n                <div className=\"noselect\">\r\n                    <div className=\"import-gif-container--center pb-2\">\r\n                        {(this.state.gifs.srcs.length >= 1) &&\r\n                            <PerfectScrollbar options={{ suppressScrollX: true }} className={`p-3`} >\r\n                                <div className=\"grid-container-gif pb-4\">\r\n                                    {\r\n                                        this.state.gifs.srcs.map((src: string, i: number) => {\r\n                                            return (<div className=\"grid-item-gif\" key={i}>\r\n                                                <img src={src} alt=\"gif_image\" className=\"w-100\" />\r\n                                            </div>)\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </PerfectScrollbar>\r\n                        }\r\n                    </div>\r\n                    <div className=\"import-gif--buttons mt-2\">\r\n                        <button id=\"btn-accept\" className=\"ml-1\" onClick={this.handleAddGif}>Accept</button>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    AddImage\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(ImportGifs);\r\n","import React, { PureComponent } from \"react\";\r\nimport Modal from \"react-responsive-modal\";\r\nimport GammixOrange from '../../../../../Vendor/gammix_oran.png';\r\n\r\ninterface stateInterface {\r\n    open: boolean,\r\n}\r\n\r\nexport class PatreonModal extends PureComponent<{}, stateInterface> {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: true\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            ...this.state,\r\n            open: true\r\n        });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal open={this.state.open} onClose={this.handleCloseModal} center classNames={{ outline: '10px solid red' }} styles={{ marginTop: '1000px' }}>\r\n                <br />\r\n                <br />\r\n            \r\n                <div style={{fontSize: '1.3rem'}}>\r\n                    <img src={GammixOrange} alt=\"Gammix Logo\" style={{float: 'left', marginTop: '-40px' }}/>\r\n                    <p style={{marginTop: '30px'}}>\r\n                        Please consider supporting me in <a href=\"https://www.patreon.com/gammafp\">Patreon</a> to continue developing these tools: <a href=\"https://www.patreon.com/gammafp\">HERE</a>\r\n                    </p>\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PatreonModal;\r\n","import EventEmitter from 'eventemitter3';\r\n\r\nlet ObserverAnim = new EventEmitter();\r\n\r\nlet GLOBAL_EVENT_ANIM = {\r\n    OPEN_ATLAS_IMPORT_MODAL: 'OPEN_ATLAS_IMPORT_MODAL',\r\n    EDIT_ANIM_NAME: 'EDIT_ANIM_NAME',\r\n\r\n    // Eventos del render de animación\r\n    RENDER: {\r\n        IMPORT_ATLAS: 'IMPORT_ATLAS',\r\n        SET_ZOOM: 'SET_ZOOM',\r\n        CHANGE_OR_CREATE_ANIMATION_CONTAINER: 'CHANGE_OR_CREATE_ANIMATION_CONTAINER',\r\n        ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER: 'ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER',\r\n        UPDATE_FRAMES: 'UPDATE_FRAMES',\r\n    },\r\n    PLAY_STOP_CONTROL: 'PLAY_STOP_CONTROL',\r\n    NOTIFICATION_SYSTEM: {\r\n        WARNING: 'WARNING',\r\n        ERROR: 'ERROR',\r\n        CLEAR: 'CLEAR'\r\n    },\r\n    RESET_ALL: 'RESET_ALL'\r\n};\r\n\r\nexport {\r\n    ObserverAnim,\r\n    GLOBAL_EVENT_ANIM\r\n};","/**\r\n * Nos ayuda a comprobar si es una animación es correcta\r\n */\r\nconst isPhaserAnimationJSON = (data: string): boolean => {\r\n    let isAtlas = false;\r\n    try {\r\n        JSON.parse(data);\r\n        isAtlas = true;\r\n    } catch (error) {\r\n        isAtlas = false;\r\n    }\r\n\r\n    if(isAtlas) {\r\n        const have_anims = (data.search('anims') !== -1);\r\n        const have_frameRate = (data.search('frameRate') !== -1);\r\n        const have_frames = (data.search('frames') !== -1);\r\n\r\n        if(!have_frames || !have_frameRate || !have_anims) {\r\n            isAtlas = false;\r\n        } else {\r\n            isAtlas = true;\r\n        }\r\n    }\r\n    return isAtlas;\r\n}\r\n\r\nexport default isPhaserAnimationJSON;","/**\r\n * Nos ayuda a generar colores aleatoreos de una lista\r\n */\r\nlet actual_color = '0';\r\nconst generateRandomColors = () => {\r\n    const colors = [\r\n        '#1abc9c',\r\n        '#2ecc71',\r\n        '#3498db',\r\n        '#9b59b6',\r\n        '#f1c40f',\r\n        '#16a085',\r\n        '#27ae60',\r\n        '#2980b9',\r\n        '#8e44ad',\r\n        '#f1c40f',\r\n        '#e67e22',\r\n        '#e74c3c',\r\n        '#ecf0f1',\r\n        '#95a5a6',\r\n        '#f39c12',\r\n        '#d35400',\r\n        '#c0392b',\r\n        '#bdc3c7'\r\n    ];\r\n    let final_color = '0';\r\n    while(final_color === actual_color) {\r\n        final_color = colors[Phaser.Math.Between(0, colors.length - 1)]\r\n    }\r\n    return final_color;\r\n}\r\n\r\nexport default generateRandomColors;","import React from 'react';\r\n\r\n// Estilos\r\nimport './Menu.style.scss';\r\n\r\n// Redux\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\n// import { Link } from 'react-router-dom';\r\nimport getFilesText from '../../../../utils/getFilesText';\r\nimport isPhaserAnimationJSON from '../../../../utils/isPhaserAnimationJSON';\r\nimport generateId from '../../../../utils/generateId';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport generateRandomColors from '../../../../utils/generateRandomColors';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { SwipeAnimationsAction, PlayStopAction } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { isEmpty } from 'ramda';\r\nimport { css } from 'glamor';\r\nimport { SetAtlasAnimAnimAction } from '../../../../Redux/Actions/Animator/atlas.anim.action';\r\nimport { ResetAllAnimationAction } from '../../../../Redux/Actions/globals.actions';\r\nimport Patreon from '../../../../Vendor/become_patreon.png';\r\nconst disable = css({\r\n    opacity: 0.2\r\n});\r\n\r\nconst MenuComponent: React.FunctionComponent = () => {\r\n\r\n    const atlas_anim = useSelector((store: RootState) => store.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpenModalAtlasImport = () => {\r\n        ObserverAnim.emit(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL);\r\n    }\r\n\r\n    const inputHandleAnimationJson = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAnimationJSON(files_loaded as string)) {\r\n            const imagesAtlas = store.getState().imagesAtlas;\r\n\r\n            const anim_json = JSON.parse(files_loaded as string);\r\n            const animations = anim_json.anims.map((anim: any) => ({\r\n                id: generateId('anim'),\r\n                name: anim.key,\r\n                color: generateRandomColors(),\r\n                play: false,\r\n                key_controls: {\r\n                    repeat: anim.repeat,\r\n                    frame_rate: anim.frameRate,\r\n                    yoyo: false\r\n                },\r\n                frames: anim.frames.reduce((prevFrame: any, currentFrame: any) => {\r\n                    const local_frame = imagesAtlas.find((image: any) => image.name === currentFrame.frame);\r\n                    if (local_frame !== undefined) {\r\n                        prevFrame.push({\r\n                            id: local_frame.id,\r\n                            local_id: generateId('sprite'),\r\n                            name: currentFrame.frame,\r\n                            src: local_frame.src,\r\n                            active: false\r\n                        })\r\n                    }\r\n                    return prevFrame;\r\n                }, [])\r\n            }));\r\n\r\n            // Se ha usado swipeanimationaction ya que provee la posibilidad de insertar un array de animaciones\r\n            dispatch(SwipeAnimationsAction(animations));\r\n            dispatch(SetAtlasAnimAnimAction(files_loaded));\r\n\r\n        } else {\r\n            ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR, 'Atlas anim incorrect json');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className=\"menu noselect\">\r\n            <ul>\r\n                <li className=\"icon\">\r\n                    <a href=\"https://gammafp.com\" className=\"material-icons\">\r\n                        home\r\n                    </a>\r\n                </li>\r\n                {\r\n                    (!isEmpty(atlas_anim.image) && !isEmpty(atlas_anim.json))\r\n                        ?\r\n                        <li className={`${disable}`} onClick={() => {\r\n                            ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, 'You have already imported an atlas');\r\n                        }}>Import Atlas</li>\r\n                        :\r\n                        <li onClick={handleClickOpenModalAtlasImport}>Import Atlas</li>\r\n                }\r\n                {\r\n                    (!isEmpty(atlas_anim.image) && !isEmpty(atlas_anim.json) && isEmpty(atlas_anim.animation))\r\n                        ?\r\n                        <li className=\"fileUpload\">\r\n                            Import Animation\r\n                            <input type=\"file\" className=\"upload cursor-pointer uploadSprites\" accept=\"application/json\" onChange={inputHandleAnimationJson} />\r\n                        </li>\r\n                        :\r\n                        <li className={`${disable}`} onClick={() => {\r\n                            (isEmpty(atlas_anim.animation))\r\n                                ? ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, 'You must import an atlas')\r\n                                : ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, 'You have already imported animations')\r\n                        }}>\r\n                            Import Animation\r\n                        </li>\r\n\r\n                }\r\n                {/* TODO: Refactor reset */}\r\n                <li onClick={() => {\r\n                    dispatch(PlayStopAction({ id: '0', play: false }));\r\n                    dispatch(ResetAllAnimationAction());\r\n                    ObserverAnim.emit(GLOBAL_EVENT_ANIM.RESET_ALL);\r\n                }}>\r\n                    Reset\r\n                </li>\r\n                <li>\r\n                    <a href=\"https://www.patreon.com/join/gammafp?\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                        <img src={Patreon} alt=\"Patreon\"/>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default MenuComponent;","/**\r\n * Nos ayudará a generar una lista de nombre\r\n */\r\n\r\nconst getImagesNamesGroup = (images_list: any) => {\r\n\r\n    let image_list_end = images_list.reduce((prev: any, current: any) => {\r\n        const current_name: string = current.name.split('_')[0];\r\n        if (!(prev as Array<string>).includes(current_name)) {\r\n            prev.push(current.name.split('_')[0]);\r\n        }\r\n        return prev;\r\n    }, []);\r\n    return image_list_end;\r\n}\r\n\r\nexport default getImagesNamesGroup;","import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport getImagesNamesGroup from '../../../../utils/getImagesNameGroup';\r\nimport { AddSpriteToFramesAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\nimport generateId from '../../../../utils/generateId';\r\nimport { find, propEq, isEmpty } from 'ramda';\r\n\r\n// Se usa para evitar el salto involuntario de una animación seleccionada\r\nlet click_selected = false;\r\n\r\nconst ImgList = () => {\r\n    const images_list = useSelector((state: RootState) => state.imagesAtlas);\r\n    const images_name = getImagesNamesGroup(images_list);\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const dispatch = useDispatch();\r\n\r\n    // Buscamos por el frame activo en la caja de frames para mostrar la selección\r\n    const actual_animation = find(propEq('id', animation_list.actual_animation), animation_list.animations);\r\n    const active_frame = find(propEq('active', true), (actual_animation !== undefined) ? actual_animation.frames : [] );\r\n\r\n    // Obtenemos la posición del elemento para mover el scroll\r\n    useEffect(() => {\r\n        if(active_frame !== undefined && !isEmpty(active_frame) && click_selected) {\r\n            const perfect_scroll = document.querySelector('.perfect_scroll_imglist') as HTMLDivElement;\r\n            const frame_position = document.querySelector(`#${active_frame.id}`) as HTMLDivElement;\r\n            perfect_scroll.scrollTop = frame_position.offsetTop - 150;\r\n        } else if (!click_selected) {\r\n            click_selected = true;\r\n        }\r\n    });\r\n\r\n    const html_element = images_name.map((name: string, key: any) => {\r\n        return (\r\n            <div className=\"animate_tool-container noselect\" key={key}>\r\n                <div className=\"text-color-primary mb-2\">{name}</div>\r\n                {\r\n                    images_list.reduce((prev: any, current: any, key: number) => {\r\n                        if (current.name?.startsWith(name)) {\r\n                            prev.push(\r\n                                <div className=\"ml-3\" key={key} onClick={() => {\r\n                                    const actual_animation = store.getState().AnimationList.actual_animation;\r\n                                    if(actual_animation !== '0') {\r\n                                        // Corrección de salto involuntario de animación.\r\n                                        click_selected = false;\r\n                                        dispatch(AddSpriteToFramesAction({\r\n                                            id: actual_animation,\r\n                                            sprite: {\r\n                                                id: current.id,\r\n                                                local_id: generateId('sprite'),\r\n                                                name: current.name,\r\n                                                src: current.src,\r\n                                                active: true,\r\n                                            }\r\n                                        }));\r\n                                    }\r\n                                }}>\r\n                                    <div className={`animated bounceInRight card-image ${(active_frame !== undefined && active_frame.id === current.id) && 'card-image-active'}`} id={current.id}>\r\n                                        <div className=\"card-image--image\">\r\n                                            <img src={current.src} alt={current.name} className=\"noselect\" />\r\n                                        </div>\r\n                                        <div className=\"card-image--nameImage\">{current.name}</div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        }\r\n                        return prev;\r\n                    }, [])\r\n                }\r\n            </div>\r\n        );\r\n    });\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {html_element}\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ImgList;","import React, { useState } from 'react';\r\nimport { AddButton } from '../buttons/Buttons';\r\nimport { isEmpty, equals } from 'ramda';\r\nimport clearName from '../../../../utils/clearNames';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AddAnimationAction, EditNameAnimationAction, ActivateAnimation, SwipeAnimationsAction, AddAnimationPayloadInterface } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport generateId from '../../../../utils/generateId';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport generateRandomColors from '../../../../utils/generateRandomColors';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { ReactSortable } from \"react-sortablejs\";\r\nimport { css } from 'glamor';\r\n\r\nconst button_disable = css({\r\n    opacity: 0.2\r\n});\r\n\r\nconst AnimationList = () => {\r\n    // States\r\n    const [AddAnimation, setAddAnimation] = useState(false);\r\n    const [EditAnimationName, setEditAnimationName] = useState('0');\r\n\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.EDIT_ANIM_NAME, (id) => {\r\n        setEditAnimationName(id);\r\n    });\r\n\r\n    // Store\r\n    const animation_list = useSelector((store: RootState) => store.AnimationList);\r\n    const atlas_anim = useSelector((store: RootState) => store.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    // Local vars\r\n    const actualBoxColor = generateRandomColors();\r\n\r\n    const handleClickAddAnimation = () => {\r\n        setAddAnimation(true);\r\n    }\r\n\r\n    // Add new animation\r\n    const handleKeyPressAddAnimation = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.key === 'Enter') {\r\n            saveText(event.currentTarget.value)\r\n        }\r\n    }\r\n    const handleInputBlurAddAnimation = (event: React.FocusEvent<HTMLInputElement>) => {\r\n        const name_trimmed = event.currentTarget.value.trim().trimLeft().trimRight().trimEnd();\r\n        saveText(name_trimmed);\r\n        setAddAnimation(false);\r\n    }\r\n    // Edit animation name\r\n    const handleKeyPressEditName = (id: string, event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.key === 'Enter') {\r\n            editText({ id, name: event.currentTarget.value })\r\n        }\r\n    }\r\n    const handleInputBlurEditName = (id: string, event: React.FocusEvent<HTMLInputElement>) => {\r\n        const name_trimmed = event.currentTarget.value.trim().trimLeft().trimRight().trimEnd();\r\n        setEditAnimationName('0');\r\n        editText({ name: name_trimmed, id });\r\n    }\r\n\r\n    // Save Add and Edit image\r\n    const saveText = (name_in: string) => {\r\n        if (!isEmpty(name_in)) {\r\n            const id = `anim_${generateId()}`;\r\n            const name = clearName(name_in);\r\n            dispatch(AddAnimationAction({\r\n                id,\r\n                name,\r\n                color: actualBoxColor,\r\n                play: false,\r\n                key_controls: {\r\n                    repeat: -1,\r\n                    frame_rate: 12,\r\n                    yoyo: false\r\n                },\r\n                frames: [],\r\n            }));\r\n            setAddAnimation(false);\r\n\r\n        } else {\r\n            console.log('Está vacío')\r\n        }\r\n    }\r\n\r\n    const editText = (options: { name: string, id: string }) => {\r\n        if (!isEmpty(options.name)) {\r\n            dispatch(EditNameAnimationAction({\r\n                id: options.id,\r\n                name: clearName(options.name)\r\n            }))\r\n            setEditAnimationName('0');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"animate_tool-container\">\r\n                <div className=\"my-2 w-100 d-flex justify-content-between align-items-center\">\r\n                    <h3 className=\"text-color-primary\">\r\n                        Animations\r\n                    </h3>\r\n                    <span className=\"mr-3\">\r\n                        {\r\n                            (isEmpty(atlas_anim.image) || isEmpty(atlas_anim.json))\r\n                                ?\r\n                                <AddButton className={button_disable} onClick={() => {\r\n                                    ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, 'You must import an atlas');\r\n                                }}>\r\n                                    +\r\n                                </AddButton>\r\n                                :\r\n                                <AddButton onClick={handleClickAddAnimation}>\r\n                                    +\r\n                                </AddButton>\r\n                        }\r\n                    </span>\r\n                </div>\r\n                {\r\n                    AddAnimation &&\r\n                    <div className=\"ml-3\">\r\n                        <div className={`m-0 my-2 animated fadeIn card-image`} style={{ height: '30px' }}>\r\n                            <div className=\"card-image--image\">\r\n                                <div className=\"block-color-animate-card\" style={{ width: '30px', height: '30px', borderRadius: '5px', backgroundColor: actualBoxColor }}></div>\r\n                            </div>\r\n\r\n                            <div className=\"w-100 card-image--nameImage\">\r\n                                <input type=\"text\" className=\"card-image--nameImage_input\"\r\n                                    autoFocus={true}\r\n                                    onFocus={(event) => { event.target.select() }}\r\n                                    onKeyDown={handleKeyPressAddAnimation}\r\n                                    onBlur={handleInputBlurAddAnimation}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                }\r\n\r\n                {/* Estos estilos están heredados del Atlas packer */}\r\n                {/* Esto se repetirá para importar muchas imágenes */}\r\n                <ReactSortable list={animation_list.animations}\r\n                    setList={(newState) => {\r\n                        if (!isEmpty(atlas_anim.image) && !isEmpty(atlas_anim.json)) {\r\n                            if(!equals(newState, animation_list.animations)) {\r\n                                dispatch(SwipeAnimationsAction(newState as Array<AddAnimationPayloadInterface>));\r\n                            }\r\n                        }\r\n                    }} swap>\r\n                    {\r\n                        animation_list.animations.map((animation: any) =>\r\n                            <div className=\"ml-3\" key={animation.id}\r\n                                onContextMenu={(event) => {\r\n                                    dispatch(ActivateAnimation({ id: animation.id }));\r\n                                    dispatch(ActivateSideContextMenuAction({\r\n                                        x: event.clientX,\r\n                                        y: event.clientY,\r\n                                        id: animation.id,\r\n                                        active: true,\r\n                                    }));\r\n                                }}\r\n                                onClick={() => {\r\n                                    dispatch(ActivateAnimation({ id: animation.id }));\r\n                                }}\r\n                            >\r\n                                <div className={`m-0 my-2 animated fadeIn card-image ${(animation_list.actual_animation === animation.id) && 'card-image-active'}`} style={{ height: '30px' }}>\r\n                                    <div className=\"card-image--image\">\r\n                                        <div className=\"block-color-animate-card\" style={{ width: '30px', height: '30px', borderRadius: '5px', backgroundColor: animation.color }}></div>\r\n                                    </div>\r\n                                    <div className=\"w-100 card-image--nameImage\">\r\n                                        {\r\n                                            (EditAnimationName === animation.id)\r\n                                                ?\r\n                                                <input type=\"text\" className=\"card-image--nameImage_input\"\r\n                                                    autoFocus={true}\r\n                                                    onFocus={(e) => { e.target.select() }}\r\n                                                    onKeyDown={(e) => handleKeyPressEditName(animation.id, e)}\r\n                                                    onBlur={(e) => handleInputBlurEditName(animation.id, e)}\r\n                                                />\r\n                                                :\r\n                                                <span onDoubleClick={() => setEditAnimationName(animation.id)}>{animation.name}</span>\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </ReactSortable>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default AnimationList;","import React from 'react'\r\nimport { AddButton } from '../../buttons/Buttons'\r\nimport { RootState } from '../../../../../Redux/Store/store';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setZoomAnimAction } from '../../../../../Redux/Actions/Animator/zoom.anim.action';\r\nimport { AddAnimationPayloadInterface } from '../../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { find, propEq } from 'ramda';\r\nimport { css } from 'glamor';\r\n\r\nconst disable = css({\r\n    opacity: 0.2\r\n});\r\n\r\nexport const ZoomSection = () => {\r\n\r\n    const zoomPercent: number = useSelector((state: RootState) => state.zoomAnim.value);\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(propEq('id', animation_list.actual_animation), animation_list.animations);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const minZoom = 20;\r\n    const maxZoom = 500;\r\n    const zoomStep = 10;\r\n\r\n    const handleInputZoom = (percentInput: number) => {\r\n        const numberPercent: number = Math.round(percentInput);\r\n        const finalZoom: number = (numberPercent <= minZoom)\r\n            ? minZoom\r\n            : (numberPercent >= maxZoom)\r\n                ? maxZoom\r\n                : numberPercent;\r\n        dispatch(setZoomAnimAction({ value: finalZoom }));\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                ((actual_animation === undefined))\r\n                    ?\r\n                    <React.Fragment>\r\n                        <span className={`zoom-input-view ${disable}`}>\r\n                            <input type=\"number\" onChange={(event) => {}} value={zoomPercent} />\r\n                            <span className=\"ml-1\">%</span>\r\n                        </span>\r\n                        <AddButton className={`ml-2 ${disable}`}><span className=\"px-2\" style={{ fontSize: '1rem' }}>Reset</span></AddButton>\r\n                        <AddButton className={`ml-1 ${disable}`}>-</AddButton>\r\n                        <AddButton className={`ml-1 ${disable}`}>+</AddButton>\r\n                    </React.Fragment>\r\n                    :\r\n                    <React.Fragment>\r\n                        <span className={`zoom-input-view`}>\r\n                            <input type=\"number\" onChange={(event) => handleInputZoom((Number(event.target.value)))} value={zoomPercent} />\r\n                            <span className=\"ml-1\">%</span>\r\n                        </span>\r\n                        <AddButton className=\"ml-2\" onClick={() => handleInputZoom(100)}><span className=\"px-2\" style={{ fontSize: '1rem' }}>Reset</span></AddButton>\r\n                        <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent - zoomStep)}>-</AddButton>\r\n                        <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent + zoomStep)}>+</AddButton>\r\n                    </React.Fragment>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport './KeyTools.scss';\r\nimport { AddButton } from '../buttons/Buttons';\r\nimport { ZoomSection } from './zoomSection/ZoomSection';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface, PlayStopAction } from '../../../../Redux/Actions/Animator/animation.list.action';\r\n\r\nimport { css } from 'glamor';\r\nimport { propEq, find } from 'ramda';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\n\r\nconst button_disable = css({\r\n    opacity: 0.2\r\n});\r\n\r\nconst KeyTools = () => {\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(propEq('id', animation_list.actual_animation), animation_list.animations);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <div className=\"key-tools d-flex justify-content-between align-item-center\">\r\n            <div className=\"zoom-section ml-5 pr-3 my-2\">\r\n                <ZoomSection />\r\n            </div>\r\n            <div className=\"media-section mr-5 pl-3 my-2\">\r\n                {\r\n                    ((actual_animation === undefined) || actual_animation.frames.length < 1)\r\n                        ?\r\n                        <AddButton className={`ml-1 ${button_disable}`} onClick={() => {\r\n                            ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, 'You must create animations and import frames');\r\n                        }}>\r\n                            <span className=\"material-icons\">\r\n                                play_arrow\r\n                            </span>\r\n                        </AddButton>\r\n                        :\r\n                        <AddButton className=\"ml-1\" onClick={() => {\r\n                            dispatch(PlayStopAction({\r\n                                id: animation_list.actual_animation,\r\n                                play: !actual_animation.play\r\n                            }));\r\n                        }}>\r\n                            <span className=\"material-icons\">\r\n                                {(actual_animation.play) ? 'stop' : 'play_arrow'}\r\n                            </span>\r\n                        </AddButton>\r\n\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KeyTools;\r\n","import React from 'react';\r\nimport { css } from 'glamor';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface, ChangeKeyControlsAction, PlayStopAction } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { find, propEq } from 'ramda';\r\n\r\nconst FramesKeyControlInput = css({\r\n    width: '40px',\r\n    border: 'none',\r\n    borderRadius: '3px',\r\n    textAlign: 'right'\r\n});\r\nconst disable = css({\r\n    opacity: 0.2\r\n});\r\n\r\nconst FramesKeyControls = () => {\r\n\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(propEq('id', animation_list.actual_animation), animation_list.animations);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const change_key_controls = (key_controls: any) => {\r\n        dispatch(PlayStopAction({ id: '0', play: false }));\r\n        dispatch(ChangeKeyControlsAction({\r\n            id: animation_list.actual_animation,\r\n            key_controls\r\n        }));\r\n    }\r\n    return (\r\n        <div className=\"mt-2\">\r\n            <h4 className=\"text-color-primary\">Key Controls</h4>\r\n            {\r\n                (actual_animation !== undefined) &&\r\n                <div className={`ml-2 mt-2 ${(actual_animation === undefined) && disable}`}>\r\n                    <div className={`d-flex align-items-center justify-content-between mb-1 hiden_input_spin`}>\r\n                        Repeat\r\n                    <input type=\"number\" className={`${FramesKeyControlInput}`} value={actual_animation.key_controls.repeat} onChange={(e) => {\r\n                            change_key_controls({\r\n                                ...actual_animation.key_controls,\r\n                                repeat: (Number(e.target.value) > 99) ? 100 : (Number(e.target.value) < -2) ? -1 : Number(e.target.value)\r\n                            });\r\n                        }} />\r\n                    </div>\r\n                    <div className=\"d-flex align-items-center justify-content-between mb-1 hiden_input_spin\">\r\n                        Frame Rate\r\n                    <input type=\"number\" className={`${FramesKeyControlInput}`} value={actual_animation.key_controls.frame_rate} min={1} max={100}\r\n                            onKeyDown={(e) => {\r\n                                if (e.keyCode === 38 || e.keyCode === 40) {\r\n                                    e.preventDefault();\r\n                                }\r\n                            }}\r\n                            onChange={(e) => {\r\n                                change_key_controls({\r\n                                    ...actual_animation.key_controls,\r\n                                    frame_rate: (Number(e.target.value) > 199) ? 200 : (Number(e.target.value) < 1) ? 1 : Number(e.target.value)\r\n                                });\r\n                            }} />\r\n                    </div>\r\n                    {(false) &&\r\n                        <div className=\"d-flex align-items-center justify-content-between mb-1\">\r\n                            YoYo\r\n                        <input type=\"checkbox\" checked={actual_animation.key_controls.yoyo} onChange={(e) => {\r\n\r\n                                change_key_controls({\r\n                                    ...actual_animation.key_controls,\r\n                                    yoyo: e.target.value\r\n                                });\r\n                            }} />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            }\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FramesKeyControls;","import b64toBlob from \"../../../../utils/b64toBlob\";\r\nimport { GLOBAL_EVENT_ANIM, ObserverAnim } from \"../../Observer\";\r\nimport { propEq, find, findIndex } from \"ramda\";\r\nimport { AddAnimationPayloadInterface } from '../../../../Redux/Actions/Animator/animation.list.action';\r\n\r\nexport default class RenderAnimationScene extends Phaser.Scene {\r\n    // El nombre por defecto del atlas\r\n    name_atlas: string = '';\r\n\r\n    animate_atlas!: Phaser.GameObjects.Sprite;\r\n    // El nombre de la animación por defecto (solo hay una en esta versión)\r\n    animation_name = 'default_tool_animation';\r\n    // Animación actual (para setear la animación)\r\n    actual_animation!: any;\r\n\r\n    // Esto nos ayuda a enviar el frame que se está ejecutando actualmente\r\n    actual_frame = '0';\r\n\r\n    // Pintamos la imagen para mostrar que no se puede animar\r\n    tint = 0xff0000;\r\n\r\n    constructor() {\r\n        super({ key: 'RenderAnimationScene' });\r\n    }\r\n\r\n    init() {\r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.RENDER.SET_ZOOM, (zoom_size: number) => {\r\n            this.scale.setZoom(zoom_size);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n        });\r\n    }\r\n\r\n    preload() {\r\n        this.load.image('empty_frame', './assets/canvas-background.png');\r\n    }\r\n\r\n    create() {\r\n        this.registry.events.once(GLOBAL_EVENT_ANIM.RENDER.IMPORT_ATLAS, (atlas_object: any) => {\r\n            this.name_atlas = atlas_object.image.name;\r\n            this.load.atlas(atlas_object.image.name, URL.createObjectURL(b64toBlob(atlas_object.image.src)), JSON.parse(atlas_object.json));\r\n            this.load.start();\r\n        });\r\n        this.load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n            // Configurar el tamaño máximo del lienzo\r\n            this.setCanvasSize();\r\n            this.animate_atlas = this.add.sprite(this.scale.width / 2, this.scale.height / 2, this.name_atlas).setTint(this.tint);\r\n        });\r\n\r\n        // Se agrega o cambia animación actual\r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.RENDER.CHANGE_OR_CREATE_ANIMATION_CONTAINER, (animation_in: any) => {\r\n            const actual_animation = find(propEq('id', animation_in.actual_animation), animation_in.animations) as AddAnimationPayloadInterface;\r\n            // Comprobamos si se ha creado una animación o no\r\n            if (actual_animation !== undefined) {\r\n                this.create_animation(actual_animation);\r\n                if (actual_animation.frames.length < 1) {\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.RENDER.ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER, (animation_in: any) => {\r\n            const actual_animation = find(propEq('id', animation_in.actual_animation), animation_in.animations);\r\n            if(actual_animation !== undefined) {\r\n                this.create_animation(actual_animation);\r\n            }\r\n        });\r\n\r\n        // Observadores: \r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.PLAY_STOP_CONTROL, (state: boolean) => {\r\n            if (!state) {\r\n                this.animate_atlas.anims.play(this.animation_name);\r\n            } else {\r\n                this.animate_atlas.anims.stop();\r\n            }\r\n        });\r\n    }\r\n\r\n    create_animation(animation_in: any) {\r\n        this.animate_atlas.anims.stop();\r\n        const frames_name = (animation_in !== undefined) ?\r\n            animation_in.frames.map((frame: any) => frame.name) :\r\n            [];\r\n\r\n        const frames = this.anims.generateFrameNames(this.name_atlas, {\r\n            frames: frames_name\r\n        });\r\n\r\n        this.anims.remove(this.animation_name);\r\n        this.anims.create({\r\n            key: this.animation_name,\r\n            frameRate: Number(animation_in.key_controls.frame_rate),\r\n            repeat: Number(animation_in.key_controls.repeat),\r\n            frames: frames\r\n        });\r\n\r\n        this.actual_animation = this.anims.get(this.animation_name);\r\n\r\n        if (animation_in.play) {\r\n            this.animate_atlas.anims.play(this.animation_name);\r\n        }\r\n\r\n        if (this.actual_animation.frames.length >= 1) {\r\n            const frame_active_index = findIndex(propEq('active', true), animation_in.frames);\r\n            const verify_active_index = (frame_active_index !== -1) ? frame_active_index : 0;\r\n            \r\n            const newTexture = this.actual_animation.frames[verify_active_index].textureFrame;\r\n            this.animate_atlas.setTexture(this.name_atlas, newTexture);\r\n            this.animate_atlas.clearTint();\r\n        } else {\r\n            this.animate_atlas.setTint(this.tint);\r\n        }\r\n    }\r\n\r\n    setCanvasSize() {\r\n        const texturesKeys = Object.keys(this.textures.get(this.name_atlas).frames);\r\n        const size = texturesKeys.reduce((prev: any, current: any) => {\r\n            const actual_frame = this.textures.getFrame(this.name_atlas, current);\r\n            let output = prev;\r\n            if (current !== '__BASE') {\r\n                output = {\r\n                    width: (prev.width < actual_frame.width) ? actual_frame.width : prev.width,\r\n                    height: (prev.height < actual_frame.height) ? actual_frame.height : prev.height\r\n                };\r\n            }\r\n            return output;\r\n        }, { width: 0, height: 0 })\r\n        this.scale.resize(size.width + 40, size.height + 40);\r\n    }\r\n\r\n    update() {\r\n        if (this.animate_atlas !== undefined) {\r\n            if (this.animate_atlas.anims.isPlaying && this.actual_frame !== this.animate_atlas.frame.name) {\r\n                this.actual_frame = this.animate_atlas.frame.name;\r\n                const current_frame = this.animate_atlas.anims.currentFrame;\r\n                // Enviamos el ID generado por el current frame name y el index\r\n                const id_to_frame = `${current_frame.textureFrame}_${current_frame.index}`;\r\n                ObserverAnim.emit(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES, id_to_frame);\r\n            }\r\n        }\r\n    }\r\n\r\n}","import React, { Component, createRef } from 'react';\r\nimport RenderAnimationScene from './RenderAnimationScene';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport './RenderAnimation.scss';\r\nimport { ZoomDataAnim, setZoomAnimAction } from '../../../../Redux/Actions/Animator/zoom.anim.action';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { ActionAnimationList } from '../../../../Redux/Reducers/Animator/animation.list.reducer';\r\n\r\ninterface propsData {\r\n    zoom: number;\r\n    setZoomAnimAction: (value: ZoomDataAnim) => void;\r\n    atlasAnim: any;\r\n    animationList: ActionAnimationList,\r\n}\r\n\r\nclass RenderAnimation extends Component<propsData> {\r\n    canvas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    canvas: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    game_config = {\r\n        width: 200,\r\n        height: 200,\r\n        parent: 'canvas-animation',\r\n        type: Phaser.WEBGL,\r\n        dom: {\r\n            createContainer: true\r\n        },\r\n        banner: {\r\n            hidePhaser: true\r\n        },\r\n        audio: {\r\n            noAudio: true\r\n        },\r\n        render: {\r\n            pixelArt: true\r\n        },\r\n        scene: [RenderAnimationScene]\r\n    }\r\n    game!: Phaser.Game;\r\n\r\n    zoom_step = 20;\r\n\r\n    scrollBarAnimRef: any = createRef<any>();\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.game = new Phaser.Game(this.game_config);\r\n        this.canvas_container.current?.addEventListener('wheel', this.handleWheel, { passive: false });\r\n    }\r\n\r\n    handleWheel(event: any): void {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.props.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom >= 20 && zoom <= 500) {\r\n                    value = Number((zoom - this.zoom_step * event.deltaY / Math.abs(event.deltaY)).toPrecision(2));\r\n                    value = value < 20 ? value = 20 : value > 500 ? value = 500 : value;\r\n                }\r\n            }\r\n            this.comprobateSize();\r\n            this.props.setZoomAnimAction({ value });\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(state: propsData) {\r\n        if (state.zoom !== this.props.zoom) {\r\n            const new_zoom: number = this.props.zoom / 100;\r\n            this.game.registry.events.emit(GLOBAL_EVENT_ANIM.RENDER.SET_ZOOM, new_zoom);\r\n        }\r\n\r\n        if (state.atlasAnim.image !== this.props.atlasAnim.image || state.atlasAnim.json !== this.props.atlasAnim.json) {\r\n            if (!isEmpty(this.props.atlasAnim.image) && !isEmpty(this.props.atlasAnim.json)) {\r\n                this.game.registry.events.emit(GLOBAL_EVENT_ANIM.RENDER.IMPORT_ATLAS, this.props.atlasAnim);\r\n            }\r\n        }\r\n\r\n        // Se cambia de animación y si no existe se crea un contenedor\r\n        if (state.animationList.actual_animation !== this.props.animationList.actual_animation) {\r\n            this.game.registry.events.emit(GLOBAL_EVENT_ANIM.RENDER.CHANGE_OR_CREATE_ANIMATION_CONTAINER, this.props.animationList);\r\n        }\r\n\r\n        // Agregamos los frames\r\n        if (state.animationList.animations !== this.props.animationList.animations && this.props.animationList.actual_animation !== '0') {\r\n            this.game.registry.events.emit(GLOBAL_EVENT_ANIM.RENDER.ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER, this.props.animationList);\r\n        }\r\n\r\n        this.scrollBarAnimRef?.updateScroll();\r\n\r\n        this.game.scene.getScene('RenderAnimationScene').load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n            this.comprobateSize();\r\n        });\r\n    }\r\n\r\n    comprobateSize() {\r\n        const container_panel = document.querySelector('#center-anim-panel--up') as HTMLDivElement;\r\n        const canvas_width = this.canvas.current!.clientWidth || 0;\r\n        const canvas_height = this.canvas.current!.clientHeight || 0;\r\n\r\n        if (canvas_width > container_panel?.clientWidth) {\r\n            this.canvas.current?.classList.add('pl-2');\r\n            this.canvas.current?.querySelector('canvas')!.classList.add('mr-2');\r\n        } else {\r\n            this.canvas.current?.classList.remove('pl-2');\r\n            this.canvas.current?.querySelector('canvas')!.classList.remove('mr-2');\r\n        }\r\n        if (canvas_height > container_panel?.clientHeight) {\r\n            this.canvas.current!.style.paddingTop = ((canvas_height - container_panel?.clientHeight) / 2) + 20 + 'px';\r\n            this.canvas.current!.style.paddingBottom = 10 + 'px';\r\n            // this.canvas.current?.querySelector('canvas')?.classList.add('mt-4');\r\n        } else {\r\n            // this.canvas.current?.classList.remove('padding-100');\r\n            this.canvas.current!.style.paddingTop = '0px';\r\n            this.canvas.current!.style.paddingBottom = '0px';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const frames_list_state = this.props.animationList;\r\n        const frames_list = frames_list_state.animations.find((animation) => animation.id === frames_list_state.actual_animation)\r\n\r\n        return (\r\n            <div ref={this.canvas_container} className={`render-animation-container d-flex justify-content-center align-items-center debug-white}`}>\r\n                <PerfectScrollbar className=\"scrollContainerAnimator\" ref={(ref) => this.scrollBarAnimRef = ref}>\r\n                    {\r\n                        ((frames_list === undefined) || frames_list.frames.length < 1)\r\n                            ?\r\n                            <div className=\"logo noselect\">\r\n                                <img src={require('../../../../Vendor/logo.gif')} alt=\"logo\" draggable={false} style={{ display: ((frames_list === undefined) || frames_list.frames.length < 1) ? 'block' : 'none' }} />\r\n                            </div>\r\n                            : null\r\n                    }\r\n                    <div id=\"canvas-animation\" ref={this.canvas} style={{ display: ((frames_list === undefined) || frames_list.frames.length < 1) ? 'none' : 'block' }}></div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {\r\n        zoom: state.zoomAnim.value,\r\n        atlasAnim: state.atlasAnim,\r\n        animationList: state.AnimationList,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setZoomAnimAction,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RenderAnimation);","import b64toBlob from \"./b64toBlob\";\r\nimport generateId from \"./generateId\";\r\n\r\nclass GetImagesFromAtlasPhaser extends Phaser.Scene {\r\n    name_spritesheet = '';\r\n    constructor() {\r\n        super({key: 'GetImagesFromAtlasPhaser'});\r\n    }\r\n    preload() {\r\n        const output: any = [];\r\n        let parent_id = '';\r\n        this.registry.events.on('CHARGE_ATLAS', (image_config: any) => {\r\n            parent_id = image_config.image.id;\r\n            this.name_spritesheet = image_config.image.name;\r\n            this.load.atlas(this.name_spritesheet, URL.createObjectURL(b64toBlob(image_config.image.src)), JSON.parse(image_config.json));\r\n            this.load.start();\r\n        });\r\n\r\n        this.load.on(Phaser.Loader.Events.COMPLETE, () => {\r\n            const texturesKeys = Object.keys(this.textures.get(this.name_spritesheet).frames);\r\n            for (let i = 1; i < texturesKeys.length; i++) {\r\n                let name = texturesKeys[i];\r\n                \r\n                const texture = this.textures.getFrame(this.name_spritesheet, name);\r\n                const textureB64 = this.textures.getBase64(this.name_spritesheet, name);\r\n                output.push({\r\n                    parent_id,\r\n                    id: generateId(),\r\n                    name,\r\n                    width: texture.width,\r\n                    height: texture.height,\r\n                    src: textureB64,\r\n                    origin: { x: 0.5, y: 0.5 }\r\n                });\r\n            }\r\n            this.registry.events.emit('ATLAS_COMPLETE', output);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Esta función nos ayudará a obtener un array de imágenes a partir de un atlas\r\n * @returns Promise(atlas_group)\r\n */\r\nconst getImagesFromAtlas = (image_config: any) => {\r\n    const divElement = document.createElement('div');\r\n    divElement.setAttribute('id', 'container_phase_spritesheet');\r\n    divElement.setAttribute('style', 'position: absolute;top: -2000px;visibility: hidden');\r\n    document.body.appendChild(divElement);\r\n    const game = new Phaser.Game({\r\n        width: 100,\r\n        height: 100,\r\n        type: Phaser.CANVAS,\r\n        banner: {\r\n            hidePhaser: true\r\n        },\r\n        parent: 'container_phase_spritesheet',\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        render: {\r\n            pixelArt: true\r\n        },\r\n        scene: [GetImagesFromAtlasPhaser]\r\n    });\r\n\r\n    game.events.on(Phaser.Scenes.Events.READY, () => {\r\n        game.registry.events.emit('CHARGE_ATLAS', image_config);\r\n    });\r\n\r\n    return new Promise((resolve) => {\r\n        game.events.on('ATLAS_COMPLETE', (atlas_group: any) => {\r\n            game.destroy(true);\r\n            document.body.removeChild(divElement);\r\n            resolve(atlas_group);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nexport default getImagesFromAtlas;","import React, { useState } from 'react';\r\nimport Modal from \"react-responsive-modal\";\r\nimport './ImportAtlasForm.scss';\r\nimport getFilesText from '../../../../utils/getFilesText';\r\nimport isPhaserAtlas from '../../../../utils/isPhaserAtlas';\r\nimport acceptFormatImages from '../../../../constants/acceptFormatImages';\r\nimport getImageFiles from '../../../../utils/getImages';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { SetAtlasImageAnimAction, SetAtlasJSONAnimAction, ResetAtlasAction } from '../../../../Redux/Actions/Animator/atlas.anim.action';\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport getImagesFromAtlas from '../../../../utils/getImagesFromAtlas';\r\n\r\nlet isImportComplete = true;\r\n\r\nconst ImportAtlasForm = () => {\r\n    let open_modal_import_atlas = true;\r\n    const [open_by_state, setOpen_by_state] = useState(false);\r\n\r\n    ObserverAnim.removeListener(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL);\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL, () => {\r\n        open_modal_import_atlas = true;\r\n        setOpen_by_state(true);\r\n    });\r\n\r\n    const atlas_state = useSelector((state: RootState) => state.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleImportImage = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded: any = await getImageFiles(files);\r\n        dispatch(SetAtlasImageAnimAction(files_loaded[0]));\r\n    }\r\n\r\n    const handleImportAtlasJSON = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAtlas(files_loaded as string)) {\r\n            dispatch(SetAtlasJSONAnimAction(files_loaded as string));\r\n        } else {\r\n            ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR, 'Atlas json incorrect');\r\n        }\r\n    }\r\n\r\n    const handleCloseModalByX = () => {\r\n        setOpen_by_state(false);\r\n        dispatch(ResetAtlasAction());\r\n    }\r\n\r\n    const is_all_complete = async () => {\r\n        if (!isEmpty(atlas_state.image) && !isEmpty(atlas_state.json) && !isImportComplete && isEmpty(atlas_state.animation)) {\r\n            isImportComplete = true;\r\n            const atlas_group = await getImagesFromAtlas(atlas_state) as ImageData[];\r\n            setOpen_by_state(false);\r\n            dispatch(AddImage(atlas_group));\r\n        }\r\n        if(isImportComplete) {\r\n            isImportComplete = false;\r\n        }\r\n    }\r\n\r\n    is_all_complete();\r\n\r\n    return (\r\n        <Modal open={open_modal_import_atlas && open_by_state} onClose={handleCloseModalByX} closeOnOverlayClick={false}>\r\n            <h3 className=\"noselect mt-3 mb-3 mx-5\">Import Atlas</h3>\r\n            <div className=\"import_animate_atlas\">\r\n                {\r\n                    (isEmpty(atlas_state.image)) ?\r\n                        <button className=\"fileUpload mb-3\">\r\n                            Import Atlas Image\r\n                        <input type=\"file\" className=\"upload cursor-pointer uploadSprites\" onChange={handleImportImage} accept={acceptFormatImages.join(',')} />\r\n                        </button>\r\n                        : ''\r\n                }\r\n                {\r\n                    (isEmpty(atlas_state.json)) ?\r\n                        <button className=\"fileUpload\">\r\n                            Import Atlas JSON\r\n                            <input type=\"file\" className=\"upload cursor-pointer uploadSprites\" accept=\"application/json\" onChange={handleImportAtlasJSON} />\r\n                        </button>\r\n                        : ''\r\n                }\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ImportAtlasForm;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { CloseSideContextMenuAction, ContextMenuData } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\n\r\nimport './ContextMenu.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { DeleteAnimationAction } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { DeleteFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\n\r\nlet cambio = true;\r\n\r\nconst ContextMenu = (props: any) => {\r\n    \r\n    const sideMenuContext: ContextMenuData = useSelector((state: RootState) => state.contextSideMenuAtlas);\r\n    const dispatch = useDispatch();\r\n    \r\n    let fadeIn = (cambio) ? 'fadeIn' : 'fadeIn2';\r\n    let contextMenuClassName = `context-menu animated ${(sideMenuContext.active) ? 'active ' + (cambio = !cambio, fadeIn) : ''}`;\r\n    \r\n    const is_frames_secction = (sideMenuContext.options !== undefined && sideMenuContext.options.value === 'frames');\r\n    // Colocamos la posición, en el top se corrige \r\n\r\n    const positionXYMenu = {\r\n        top: ((sideMenuContext.y + 80) > globalThis.innerHeight) ? `${sideMenuContext.y - 100}px` : `${sideMenuContext.y}px`,\r\n        left: ((sideMenuContext.x + 200) > globalThis.innerWidth) ? `${sideMenuContext.x - 200}px` : `${sideMenuContext.x}px` \r\n    };\r\n\r\n    const handleClickChangeName = () => {\r\n        ObserverAnim.emit(GLOBAL_EVENT_ANIM.EDIT_ANIM_NAME, sideMenuContext.id);\r\n        closeMenu();\r\n    }\r\n\r\n    const handleClickDelete = () => {\r\n        if (is_frames_secction) {\r\n            dispatch(DeleteFrameAction({ local_id: sideMenuContext.id }));\r\n        } else {\r\n            dispatch(DeleteAnimationAction({ id: sideMenuContext.id }));\r\n        }\r\n        closeMenu();\r\n    }\r\n\r\n    const closeMenu = () => {\r\n        dispatch(CloseSideContextMenuAction());\r\n    }\r\n\r\n    return (\r\n        <div className={contextMenuClassName} style={positionXYMenu} onContextMenu={(e) => { e.preventDefault() }}>\r\n            {\r\n                !is_frames_secction &&\r\n                <div className=\"options\" onClick={handleClickChangeName}>\r\n                    Change Name\r\n                </div>\r\n            }\r\n            <div className=\"options\" onClick={handleClickDelete}>\r\n                Delete {is_frames_secction ? 'frame' : 'animation'}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ContextMenu\r\n","import React, { Component } from 'react';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './ToastNotificationAnimation.scss';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\n\r\nclass ToastNotificationAnimation extends Component {\r\n\r\n    componentDidMount() {\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, (msg: string) => {\r\n            toast.warn(msg, {\r\n                className: 'toast-warn',\r\n                position: \"top-center\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true\r\n            });\r\n        });\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR, (msg: string) => {\r\n            toast.error(msg, {\r\n                className: 'toast-error',\r\n                position: \"top-center\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true\r\n            });\r\n        });\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.CLEAR, () => {\r\n            toast.dismiss();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ToastContainer />\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToastNotificationAnimation;","import React from 'react';\r\nimport './ExportButton.style.scss';\r\nimport { useSelector } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport * as JSZIP from 'jszip';\r\n\r\nconst ExportButton = (props: any) => {\r\n    const JSZip = require('jszip');\r\n    const zip: JSZIP = new JSZip();\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const handleClick = async () => {\r\n        const atlas_name = store.getState().atlasAnim.image.name;\r\n        const anim_json = {\r\n            anims: animation_list.animations.map((animation: AddAnimationPayloadInterface) => {\r\n                return {\r\n                    key: animation.name,\r\n                    type: \"frames\",\r\n                    repeat: animation.key_controls.repeat,\r\n                    frameRate: animation.key_controls.frame_rate,\r\n                    frames: animation.frames.map((frame: any) => {\r\n                        return {\r\n                            key: atlas_name,\r\n                            frame: frame.name\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        };\r\n        zip.file(`${atlas_name}_anim.json`, JSON.stringify(anim_json, null, '    '));\r\n        const file = await zip.generateAsync({ type: 'blob' });\r\n        saveAs(file, `${atlas_name}_anim.zip`);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                (animation_list.animations.length < 1)\r\n                    ?\r\n                    <button className={`save-export-disable noselect`}>\r\n                        {props.title}\r\n                    </button>\r\n                    :\r\n                    <button className={`save-export noselect`} onClick={handleClick}>\r\n                        {props.title}\r\n                    </button>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ExportButton;\r\n","import React, { createRef } from 'react';\r\nimport MenuComponent from './components/menu/Menu';\r\nimport './AnimationTool.scss';\r\nimport { SplitPane } from 'react-multi-split-pane';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n// Estilos\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport ImgList from './components/imgList/ImgList';\r\nimport AnimationList from './components/animationList/AnimationList';\r\nimport KeyTools from './components/keyTools/KeyTools';\r\nimport FramesKeyControls from './components/framesKeyControls/FramesKeyControls';\r\nimport { Frames } from './components/frames/Frames';\r\nimport RenderAnimation from './components/renderAnimation/RenderAnimation';\r\n\r\nimport ImportAtlasForm from './components/modals/ImportAtlasForm';\r\nimport ContextMenu from './components/contextMenu/ContextMenu';\r\nimport store from '../../Redux/Store/store';\r\nimport { CloseSideContextMenuAction } from '../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ResetAllAnimationAction } from '../../Redux/Actions/globals.actions';\r\nimport { connect } from 'react-redux';\r\nimport ToastNotificationAnimation from './components/notifications/ToastNotificationAnimation';\r\nimport { ObserverAnim } from './Observer';\r\nimport ExportButton from './components/exportButtons/ExportButton';\r\nimport PatreonModal from '../AtlasPacker/components/modals/patreonModal/PatreonModal';\r\n\r\nconst _scrollBarRef = createRef<any>();\r\n\r\nclass AnimationTool extends React.Component<{ CloseSideContextMenuAction: any, ResetAllAnimationAction: () => {} }> {\r\n\r\n    constructor(props: { CloseSideContextMenuAction: any, ResetAllAnimationAction: () => {} }) {\r\n        super(props);\r\n\r\n        this.handleClickContainerAtlas = this.handleClickContainerAtlas.bind(this);\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        ObserverAnim.removeAllListeners();\r\n        this.props.ResetAllAnimationAction();\r\n    }\r\n\r\n    handleClickContainerAtlas() {\r\n        if (store.getState().contextSideMenuAtlas.active) {\r\n            this.props.CloseSideContextMenuAction();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"principal-anim-container\"\r\n                    onContextMenu={(event) => event.preventDefault()}\r\n                    onClickCapture={this.handleClickContainerAtlas}\r\n                    onDrop={e => e.preventDefault()}\r\n                    onDragOver={e => e.preventDefault()}\r\n                >\r\n                    <MenuComponent />\r\n                    <SplitPane split=\"vertical\" className=\"panels-anim-container\" defaultSizes={[20, 60, 20]} minSize={[200, 500, 200]}\r\n                    // onDragFinished={() => Observer.emit(GLOBAL_EVENT.PANEL_RESIZE_END)}\r\n                    >\r\n                        <div className=\"left-anim-panel\">\r\n                            <div className=\"left-anim-panel-image--container\">\r\n                                <PerfectScrollbar options={{ suppressScrollX: true }} ref={_scrollBarRef} className=\"perfect_scroll_imglist\">\r\n                                    <ImgList />\r\n                                </PerfectScrollbar>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"center-anim-panel\">\r\n                            <div className=\"center-anim-panel--up\" id=\"center-anim-panel--up\">\r\n                                <RenderAnimation />\r\n                            </div>\r\n                            <div className=\"center-anim-panel--down\">\r\n                                <KeyTools />\r\n                                <div className=\"frames-section--container d-flex justify-content-between align-items-center\">\r\n                                    <div className=\"frames-section\">\r\n                                        <Frames />\r\n                                    </div>\r\n                                    <div className=\"frames-key-control pl-2 mr-2\">\r\n                                        <FramesKeyControls />\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"right-anim-panel\">\r\n                            <div className=\"right-anim-panel--up\">\r\n                                <div className=\"right-anim-panel-animationList--container\">\r\n                                    <PerfectScrollbar options={{ suppressScrollX: true }} ref={_scrollBarRef}>\r\n                                        <AnimationList />\r\n                                    </PerfectScrollbar>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"right-anim-panel--down\">\r\n                                <ExportButton title=\"Save animation\" handleClick={() => {\r\n                                    alert('Exorta carallo');\r\n                                }} />\r\n                            </div>\r\n                        </div>\r\n                    </SplitPane>\r\n                    <ContextMenu onUpdateSize={() => { }} />\r\n                </div>\r\n                <ImportAtlasForm />\r\n                <ToastNotificationAnimation />\r\n                <PatreonModal />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    ResetAllAnimationAction,\r\n    CloseSideContextMenuAction\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(AnimationTool);","import React from 'react';\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\n\r\n\r\nimport { Provider } from 'react-redux'\r\n\r\nimport 'normalize.css';\r\nimport './App.scss';\r\nimport './Vendor/styles/bootstrap-utilities.min.css';\r\nimport store from './Redux/Store/store';\r\nimport AtlasPacker from './Views/AtlasPacker/AtlasPacker';\r\nimport AnimationTool from './Views/AnimationTool/AnimationTool';\r\n// import HomePage from './Views/HomePage';\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <Switch>\r\n          {/* <Route exact path=\"/\" component={AnimationTool} /> */}\r\n          <Route exact path=\"/tool/animator\" component={AnimationTool} />\r\n          {/* <Route exact path=\"/\" component={AtlasPacker} /> */}\r\n          <Route exact path=\"/tool/atlas-packer\" component={AtlasPacker} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAAoCAIAAAC95rUiAAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXRaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAzLTA0VDE0OjQyOjMwKzAxOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxZmEwMmQyLTcwMDYtYTI0My1iZDBkLTY0ZWFlZDI4MDVmZSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjQ5YjczM2I3LTZlN2EtZTI0OS05MGIxLTM2ZjUyNDFmZTAyZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmQyNTYyZmNlLTU0NTQtYTA0Ny04OGE0LTg4Y2JlZGM5YTM0NiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyNTYyZmNlLTU0NTQtYTA0Ny04OGE0LTg4Y2JlZGM5YTM0NiIgc3RFdnQ6d2hlbj0iMjAyMC0wMy0wNFQxNDo0MjozMCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMWZhMDJkMi03MDA2LWEyNDMtYmQwZC02NGVhZWQyODA1ZmUiIHN0RXZ0OndoZW49IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1w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\"","module.exports = __webpack_public_path__ + \"static/media/logo.d7026897.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKQAAACkCAYAAAAZtYVBAAAC7ElEQVR42u3cvWoUYRSA4Qgh2dyDxcSdxvRKZtJM6wWojcRYKlqIBMV2DYKlV+EfauE1eAV2EQLxDmxV1j2BQIokBOfb9ZuZ54VTBcaznKcaN1lakiRJkiRJkiRJkiRJkiRJkiSpdx00TVFu3ZvmNLGTywy0701T5gYydnKZgbZf1+PcQMZOLgMkkAISSAEpIIEUkAISSAEpIIEUkAISSAEJJJBACkggBaSy7jBDkIdADrdXu6+zAxk7ucxAezT5NH724v30ycvPWczjvY8/YyeXGWi7kzdHIHOa2MllgARSQAIpIAUkkLpQDyfv1gPB070PR3MWkuOfz3vi34qdXKan7Zfl6kHTjE6bbxsbK19uP7h6Et7zydv/OrFD7BS7nbV3fCaX7WBxvNxeeif8cysjF+5YX6tqra8g47O5MJBACkgggQRSQAIJJJBa5GufosevfQqvfbpYX0G67IL7cf/W1Mx/SAMSSCANkEACCaQBEkgggTRAAgkkkAZIIOc+bQMSyGwwpkZJ2sBB/vr9B0gggQQSSCCB7A/I8756BiSQCwV5ke9DAgkkkEACCSSQQApIIIEEEkgggQQSSCCB9GIcSP91CCSQQALp+5BAAukb40D6nRe/UwMkkAISSCANkEACCaQBEkgggTRAAgkkkAZIIIEULEACCaSABBJIAySQQAJpgAQSSCANkEACCaQBEkggBSSQQAIpIIEE0gAJJJBAGiCBBBJIAySQQAJpgAQSSAEJJJBACkgggTRAAgkkkAZIIIEE0gAJJJBAGiCBBFLHXYIFyB7WLKc63Hq1fb3tNvGMdJCaZfftWuWN1VQAynq7ar3O7BnJQM4+mwN3rMvVzbVUAMbVnbrtPvGMVPvEZ3NhIIEUkEACCaSABBJIIAUkkEACKSCBFJACEkgBCSSQQApIIIE8FeTm3a3WIGfPAHLAFcXOKBWAK/XOtbb7xDNS7ROfzYUlSZIkSZIkSZIkSZIkSZIkSZL+ub9e8drVPL3AuQAAAABJRU5ErkJggg==\""],"sourceRoot":""}