{"version":3,"sources":["Views/AtlasPacker/components/render/Render.tsx","Redux/Actions/Atlas/images.action.ts","utils/checkImageRepeatedName.ts","utils/preventImageNameDuplicate.ts","Redux/Actions/globals.actions.ts","Redux/Reducers/Atlas/imagesAtlas.reducer.ts","Redux/Actions/Atlas/zoom.action.ts","Redux/Reducers/Atlas/zoom.reducer.ts","Redux/Actions/Atlas/contextSideMenu.action.ts","Redux/Reducers/Atlas/contextSideMenu.reducer.ts","Redux/Actions/Atlas/algorithmPanel.action.ts","Redux/Reducers/Atlas/algorithmPanel.reducer.ts","Redux/Actions/Animator/zoom.anim.action.ts","Redux/Reducers/Animator/zoom.anim.reducer.ts","Redux/Reducers/Animator/background.anim.reducer.ts","Redux/Actions/Animator/background.anim.action.ts","Redux/Reducers/Animator/atlas.anim.reducer.ts","Redux/Actions/Animator/atlas.anim.action.ts","Redux/Actions/Animator/animation.list.action.ts","utils/checkAnimationRepeatedName.ts","utils/preventAnimationNameDuplicate.ts","Redux/Reducers/Animator/animation.list.reducer.ts","Redux/Actions/Animator/frames.list.action.ts","Redux/Reducers/index.ts","Redux/Reducers/Atlas/maxrect.reducer.ts","Redux/Actions/Atlas/maxrect.action.ts","Redux/Store/store.ts","utils/clearNames.ts","utils/generateId.ts","constants/acceptFormatImages.ts","Views/AtlasPacker/Observer.ts","utils/getImages.ts","Views/AtlasPacker/components/menu/ImportButton.component.tsx","utils/getGifFrames.ts","Views/AtlasPacker/components/menu/Menu.tsx","Views/AtlasPacker/components/cardImage/CardImage.tsx","Views/AtlasPacker/components/contextMenu/ContextMenu.tsx","Views/AtlasPacker/components/exportButtons/ExportButton.tsx","Views/AnimationTool/components/buttons/Buttons.jsx","Views/AtlasPacker/components/zoom/Zoom.tsx","Views/AtlasPacker/components/algorithm/Algorithm.tsx","utils/b64toBlob.ts","Views/AtlasPacker/components/render/RenderScene.ts","utils/prepareJSON.ts","utils/maxRectTool.ts","Views/AtlasPacker/components/modals/exportModal/ExportModal.tsx","utils/createAtlasJSON.ts","utils/createExportZipAtlas.ts","Views/AtlasPacker/components/modals/importAtlas/atlasRender/ImportAtlasRenderScene.ts","Views/AtlasPacker/components/modals/importAtlas/atlasRender/ImportAtlasRender.tsx","utils/getFilesText.ts","utils/isPhaserAtlas.ts","Views/AtlasPacker/components/modals/importAtlas/ImportAtlas.tsx","Views/AtlasPacker/components/notifications/ToastNotification.tsx","Views/AtlasPacker/components/dragDropFiles/DragDropFiles.tsx","Views/AtlasPacker/components/modals/spinnerModal/SpinnerModal.tsx","Views/AtlasPacker/AtlasPacker.tsx","Views/AnimationTool/components/frames/Frames.tsx","Views/AtlasPacker/components/modals/importGifs/ImportGifs.tsx","Views/AtlasPacker/components/modals/patreonModal/PatreonModal.tsx","Views/AnimationTool/Observer.ts","utils/isPhaserAnimationJSON.ts","utils/generateRandomColors.ts","Views/AnimationTool/components/menu/Menu.tsx","utils/getImagesNameGroup.ts","Views/AnimationTool/components/imgList/ImgList.tsx","Views/AnimationTool/components/animationList/AnimationList.tsx","Views/AnimationTool/components/keyTools/zoomSection/ZoomSection.tsx","Views/AnimationTool/components/colorPicker/ColorPicker.tsx","Views/AnimationTool/components/keyTools/KeyTools.tsx","Views/AnimationTool/components/framesKeyControls/FramesKeyControls.tsx","Views/AnimationTool/components/renderAnimation/RenderAnimationScene.ts","Views/AnimationTool/components/renderAnimation/RenderAnimation.tsx","utils/getImagesFromAtlas.ts","Views/AnimationTool/components/modals/ImportAtlasForm.tsx","Views/AnimationTool/components/contextMenu/ContextMenu.tsx","Views/AnimationTool/components/notifications/ToastNotificationAnimation.tsx","Views/AnimationTool/components/exportButtons/ExportButton.tsx","Views/AnimationTool/AnimationTool.tsx","Views/HomePage.tsx","App.tsx","serviceWorker.ts","index.tsx","Vendor/become_patreon.png","Vendor/logo.gif","Vendor/gammix_oran.png"],"names":["_scrollBarRef","AddImage","payload","type","EditingImageName","SelectImage","checkImageRepeatedName","image","imageAtlas","store","getState","imagesAtlas","find","compImage","name","id","preventImageNameDuplicate","imageData","imageCopy","iterations","initialName","RESET_ALL","ResetAllAnimationAction","defaultImagesData","setZoomAction","defaultZoomData","value","ActivateSideContextMenuAction","CloseSideContextMenuAction","defaultContextMenuData","x","y","active","actionAlgorithmPanel","defaultAlgorithmPanelData","width","height","size","extrusion","separation","setZoomAnimAction","zoomAnim","state","action","defaultBackground","backgroundAnim","defaultAtlasData","json","animation","atlasAnim","ActivateAnimation","SwipeAnimationsAction","PlayStopAction","checkAnimationRepeatedName","animationList","AnimationList","animations","compAnimation","preventAnimationNameDuplicate","animationData","animationCopy","defaultAnimationList","actual_animation","map","play","key_controls","new_state","filter","length","frames","frame","push","sprite","local_id","state_animations","rootReducer","combineReducers","forEach","newState","changeName","contextSideMenuAtlas","zoomAtlas","algorithmPanelAtlas","maxrectAtlas","createStore","composeWithDevTools","clearName","letters","chars","á","é","í","ó","ú","ñ","toString","toLowerCase","replace","m","split","trim","trimLeft","trimRight","trimEnd","generateId","i","out","Math","random","Date","now","pref","nextId","round","acceptFormatImages","Observer","EventEmitter","GLOBAL_EVENT","OPEN_ATLAS_IMPORT","OPEN_ATLAS_IMPORT_SEND_IMAGE","CLOSE_ATLAS_IMPORT","CHANGE_IMPORT_ATLAS_STATE","IMPORT_ATLAS_GRID_BUTTON","IMPORT_ATLAS_JSON","SUCCESS","WARNING","ERROR","CLEAR","OPEN","CLOSE","getImageFiles","files","Promise","resolve","reject","Files","Array","from","file","emit","append","includes","FilesOut","reader","FileReader","onload","fileURL","finalFile","target","img","Image","src","result","origin","URL","createObjectURL","readAsDataURL","ImportButton","props","inputHandle","event","a","files_loaded","loadImages","Fragment","className","children","accept","multiple","onChange","gifFrames","require","getGifFrames","url","success","error","quality","outputType","cumulative","err","frameData","getImage","toDataURL","MenuComponent","dispatch","useDispatch","receiveGif","gif","all_gifs","gif_object","srcs","isElectron","to","href","images","join","onClick","rel","Patreon","alt","CardImage","useSelector","handleInputBlur","options","name_trimmed","isEmpty","handleSelectImage","index","key","onContextMenu","clientX","clientY","autoFocus","onFocus","select","defaultValue","onKeyPress","currentTarget","handleKeyPress","onBlur","maxLength","onDoubleClick","cambio","ContextMenu","sideMenuContext","fadeIn","contextMenuClassName","positionXYMenu","top","globalThis","innerHeight","left","closeMenu","style","e","preventDefault","document","querySelector","classList","add","setTimeout","onUpdateSize","ExportButton","imagesFiles","handleClick","title","button_styles","css","color","border","borderRadius","lineHeight","fontSize","minWidth","textAlign","cursor","AddButton","text_button","undefined","Zoom","zoomPercent","handleInputZoom","percentInput","numberPercent","Number","Algorithm","algorithmPanel","min","max","b64toBlob","b64DataIn","contentType","sliceSize","b64Data","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","RenderScene","images_group","extrusion_objects","temp_images_key","new_images","graphics","removeListener","this","lineStyle","fillStyle","setDepth","tweens","targets","alpha","ease","yoyo","repeat","duration","on","scale","resize","refresh","updateScale","image_group","setScale","extrusion_object","pixels","pixel","game","renderer","snapshot","src_original","data","zoom_size","setZoom","textures","each","textures_key","startsWith","load","start","MaxRectGrid","different","symmetricDifference","removeTextures","new_image","setOrigin","setName","setInteractive","Phaser","Events","POINTER_DOWN","event_mouse","buttons","select_a_image","activate_context_menu","setGameSize","rects","rect","createExtrusion","reset_images_selected","button","create_image_selected","Rectangle","strokeRectShape","clear","removeExtrusion","extrusion_size","get","getSourceImage","canvas","createCanvas","draw","Color","extrusion_objects_temp","getPixel","positionX","positionY","pixel_extruded","rectangle","destroy","remove","textureName","image_to_destroy","prepareJSON","obj","MaxRectTool","spritePerRow","MaxRect","bins","padding","yGrid","ceil","yJump","maxHeight","jsonOutput","Render","canvas_container","createRef","zoom_step","handleWheel","bind","updateScroll","deleteGame","setGame","scroll","scrollLeft","movementX","scrollTop","movementY","ctrlKey","zoom","abs","deltaY","toPrecision","stopPropagation","algorithm","smart","pot","square","allowRotation","tag","packer","MaxRectsPacker","Entrada","addArray","MaxRectRedux","setMaxRect","renderConfig","parent","CANVAS","backgroundColor","dom","createContainer","banner","hidePhaser","audio","noAudio","render","pixelArt","scene","Game","current","addEventListener","passive","registry","events","Scenes","READY","getScene","maxRectPacker","algorithm_panel_change","difference","new_zoom","ref","onMouseMove","handleDrag","display","draggable","Component","mapDispatchToProps","connect","ExportModal","handleName","setState","form","handleScale","handleClickOk","handleCloseModal","open","onClose","closeOnOverlayClick","center","classNames","outline","styles","marginTop","htmlFor","PureComponent","createAtlasJSON","atlasJSON","sprite_data","filename","w","h","anchor","meta","description","web","JSON","stringify","createExportZipAtlas","atlas_original","atlas_scaled","zip","base64","folder_unpack","folder","folder_original","calculateGrid","grid_options","actual_position","floor","space","ImportAtlasRenderScene","canvas_size","lineStrike","grid_width","grid_height","zoom_scale","block","createGrid","cutSprites","atlas_json","once","COMPLETE","load_complete","grid","pos_x","pos_y","ImagesData","Object","keys","getFrame","src_b64","getBase64","resetZoom","atlas","parse","spritesheet","frameWidth","frameHeight","margin","spacing","_scrollBarRefAtlas","ImportAtlasRender","getFilesText","readAsBinaryString","isPhaserAtlas","isAtlas","have_frames","search","have_frame","ImportAtlas","canva_atlas_container","parcentInput","finalZoom","sendState","handleImportAltas","ToastNotification","msg","toast","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","dismiss","DragDropFiles","dragBox","useRef","imagesState","handleDragEnterOver","handleDrop","dataTransfer","onDragEnter","onDragOver","onDragLeave","onDrop","last_frame_div","override","spinner_styles","CSS","zIndex","justifyContent","alignItems","SpinnerModal","useState","loading","setLoading","useEffect","ImportGifs","default_gifs","gifs","handleAddGif","suppressScrollX","React","PatreonModal","GammixOrange","float","AtlasPacker","handleClickContainerAtlas","DesSelectImage","exportModalOpen","removeAllListeners","ResetImage","ResetAlgorithmAction","ResetMaxRectAction","ResetZoomAction","image_canvas_data","generateAsync","saveAs","onClickCapture","Menu","defaultSizes","minSize","onDragFinished","ObserverAnim","GLOBAL_EVENT_ANIM","IMPORT_ATLAS","SET_ZOOM","CHANGE_OR_CREATE_ANIMATION_CONTAINER","ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER","UPDATE_FRAMES","isPhaserAnimationJSON","have_anims","have_frameRate","generateRandomColors","colors","final_color","Between","disable","opacity","atlas_anim","inputHandleAnimationJson","anim_json","anims","anim","frame_rate","frameRate","reduce","prevFrame","currentFrame","local_frame","getImagesNamesGroup","images_list","prev","current_name","click_selected","ImgList","images_name","animation_list","propEq","active_frame","perfect_scroll","frame_position","offsetTop","html_element","button_disable","AddAnimation","setAddAnimation","EditAnimationName","setEditAnimationName","actualBoxColor","saveText","name_in","console","log","editText","onKeyDown","list","setList","equals","swap","handleInputBlurEditName","ZoomSection","ColorPicker","onColorChange","disabled","isPickerVisible","setIsPickerVisible","r","g","b","pickerColor","setPickerColor","rgb","KeyTools","hasNoAnimations","FramesKeyControlInput","FramesKeyControls","change_key_controls","keyCode","Frames","frames_list_state","frames_list","actual_animation_list","frame_div","getElementById","offsetLeft","RenderAnimationScene","name_atlas","animate_atlas","animation_name","actual_frame","tint","atlas_object","Loader","setCanvasSize","setTint","animation_in","create_animation","stop","frames_name","generateFrameNames","create","frame_active_index","findIndex","verify_active_index","newTexture","textureFrame","setTexture","clearTint","output","isPlaying","current_frame","id_to_frame","Scene","RenderAnimation","game_config","WEBGL","transparent","scrollBarAnimRef","comprobateSize","cameras","main","setBackgroundColor","container_panel","canvas_width","clientWidth","canvas_height","clientHeight","paddingTop","paddingBottom","GetImagesFromAtlasPhaser","name_spritesheet","parent_id","image_config","texturesKeys","texture","textureB64","getImagesFromAtlas","divElement","createElement","setAttribute","body","appendChild","atlas_group","removeChild","isImportComplete","ImportAtlasForm","open_modal_import_atlas","open_by_state","setOpen_by_state","atlas_state","handleImportImage","handleImportAtlasJSON","is_all_complete","is_frames_secction","innerWidth","DeleteAnimationAction","ToastNotificationAnimation","atlas_name","AnimationTool","alert","HomePage","App","exact","path","component","Boolean","window","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.9c84562c.chunk.js","sourcesContent":["import React, { Component, createRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n// Libs\r\nimport { difference } from 'ramda';\r\nimport { MaxRectsPacker, IOption, Rectangle } from 'maxrects-packer';\r\n\r\n// CSS\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport './Render.scss';\r\n\r\n// Componentes\r\nimport RenderScene from './RenderScene';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// Redux\r\nimport { setZoomAction, ZoomData } from '../../../../Redux/Actions/Atlas/zoom.action';\r\nimport { ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { payloadAlgorithmPanel } from '../../../../Redux/Actions/Atlas/algorithmPanel.action';\r\nimport { setMaxRect } from '../../../../Redux/Actions/Atlas/maxrect.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\n// Utils\r\nimport prepareJSON from '../../../../utils/prepareJSON';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { MaxRectTool } from '../../../../utils/maxRectTool';\r\n\r\ninterface propsData {\r\n    zoom: number;\r\n    images: ImageData[];\r\n    algorithmPanel: payloadAlgorithmPanel;\r\n    setZoomAction: (value: ZoomData) => void;\r\n    setMaxRect: (value: any) => void;\r\n}\r\n\r\nlet _scrollBarRef: any;\r\nclass Render extends Component<propsData> {\r\n    game: any;\r\n    canvas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    // Zoom step\r\n    zoom_step: number = 20;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n\r\n        Observer.on(GLOBAL_EVENT.PANEL_RESIZE_END, () => {\r\n            _scrollBarRef.updateScroll();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.RESET_ATLAS, () => {\r\n            this.deleteGame();\r\n            this.setGame();\r\n        });\r\n    }\r\n\r\n    handleDrag(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        if (!!event.buttons) {\r\n            const scroll = document.querySelector('.scrollContainer') as HTMLDivElement;\r\n            scroll.scrollLeft = scroll.scrollLeft - event.movementX;\r\n            scroll.scrollTop = scroll.scrollTop - event.movementY;\r\n            _scrollBarRef.updateScroll();\r\n        }\r\n    }\r\n\r\n    handleWheel(event: any): void {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.props.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom >= 20 && zoom <= 500) {\r\n                    value = Number(\r\n                        (\r\n                            zoom -\r\n                            (this.zoom_step * event.deltaY) / Math.abs(event.deltaY)\r\n                        ).toPrecision(2)\r\n                    );\r\n                    value = value < 20 ? (value = 20) : value > 500 ? (value = 500) : value;\r\n                }\r\n            }\r\n            this.props.setZoomAction({ value });\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    maxRectPacker(data: any, algorithm: string) {\r\n        const extrusion =\r\n            this.props.algorithmPanel.separation + this.props.algorithmPanel.extrusion * 2;\r\n        const border = this.props.algorithmPanel.separation + this.props.algorithmPanel.extrusion;\r\n        const options: IOption = {\r\n            smart: true,\r\n            pot: false,\r\n            square: false,\r\n            allowRotation: false,\r\n            tag: false,\r\n            border,\r\n        };\r\n\r\n        let packer =\r\n            algorithm === 'maxrect'\r\n                ? new MaxRectsPacker(\r\n                      this.props.algorithmPanel.width,\r\n                      this.props.algorithmPanel.height,\r\n                      extrusion,\r\n                      options\r\n                  )\r\n                : new MaxRectTool(this.props.algorithmPanel.size, border);\r\n\r\n        let Entrada: Rectangle[] = prepareJSON(data);\r\n        packer.addArray(Entrada);\r\n        const MaxRectGrid: any = packer.bins[0];\r\n        const MaxRectRedux = MaxRectGrid.rects;\r\n        this.props.setMaxRect(MaxRectRedux);\r\n\r\n        return MaxRectGrid;\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.deleteGame();\r\n    }\r\n\r\n    deleteGame() {\r\n        if (this.game !== undefined) {\r\n            (this.game as Phaser.Game).destroy(true);\r\n            this.game = undefined;\r\n        }\r\n    }\r\n\r\n    setGame() {\r\n        const renderConfig = {\r\n            width: 0,\r\n            height: 0,\r\n            parent: 'render',\r\n            type: Phaser.CANVAS,\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            dom: {\r\n                createContainer: true,\r\n            },\r\n            banner: {\r\n                hidePhaser: true,\r\n            },\r\n            audio: {\r\n                noAudio: true,\r\n            },\r\n            render: {\r\n                pixelArt: true,\r\n            },\r\n            scene: [RenderScene],\r\n        };\r\n        this.game = new Phaser.Game(renderConfig);\r\n        // Sistema de zoom, se agrega el evento para escuchar la rueda del ratón\r\n        this.canvas_container.current?.addEventListener('wheel', this.handleWheel, {\r\n            passive: false,\r\n        });\r\n        // Evento de carga para Phaser canvas\r\n        /**\r\n         * Cuando se cargan las escenas Phaser nos envía el evento Ready.\r\n         * Nosotros emitimos el evento de IMAGE_CHARGED para cargar elas imágenes.\r\n         * Cuando se complete Phaser nos responde con que las imágenes están completas en su cache\r\n         * Nosotros emitimos el evento IMAGE_CHARGED_COMPLETE para asignar el maxrect\r\n         */\r\n        this.game.registry.events.on(Phaser.Scenes.Events.READY, () => {\r\n            Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED, this.props.images);\r\n            this.game.scene.getScene('RenderScene').load.on('complete', () => {\r\n                // Corrección cuando se borran todas las imagenes para que no falle la aplicación.\r\n                if (this.props.images.length >= 1) {\r\n                    const MaxRectGrid = this.maxRectPacker(\r\n                        this.props.images,\r\n                        this.props.algorithmPanel.type\r\n                    );\r\n                    Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, MaxRectGrid);\r\n                } else if (this.props.images.length <= 0) {\r\n                    this.props.setMaxRect([]);\r\n                    Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, undefined);\r\n                }\r\n                _scrollBarRef.updateScroll();\r\n            });\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setGame();\r\n    }\r\n\r\n    componentDidUpdate(state: propsData) {\r\n        const algorithm_panel_change = difference(\r\n            [state.algorithmPanel],\r\n            [this.props.algorithmPanel]\r\n        ).length;\r\n        if (state.images.length !== this.props.images.length || algorithm_panel_change >= 1) {\r\n            Observer.emit(GLOBAL_EVENT.IMAGE_CHARGED, this.props.images);\r\n        }\r\n        if (state.zoom !== this.props.zoom) {\r\n            const new_zoom: number = this.props.zoom / 100;\r\n            Observer.emit(GLOBAL_EVENT.ZOOM_CHANGED, new_zoom);\r\n        }\r\n        _scrollBarRef.updateScroll();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lienzo\" ref={this.canvas_container}>\r\n                <PerfectScrollbar\r\n                    className=\"scrollContainer\"\r\n                    ref={(ref) => {\r\n                        _scrollBarRef = ref;\r\n                    }}\r\n                >\r\n                    <div\r\n                        id=\"render\"\r\n                        onMouseMove={this.handleDrag}\r\n                        style={{ display: this.props.images.length <= 0 ? 'none' : 'block' }}\r\n                    ></div>\r\n                    <div className=\"logo noselect\">\r\n                        <img\r\n                            src={require('../../../../Vendor/logo.gif')}\r\n                            alt=\"logo\"\r\n                            draggable={false}\r\n                            style={{ display: this.props.images.length >= 1 ? 'none' : 'block' }}\r\n                        />\r\n                    </div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {\r\n        zoom: state.zoomAtlas.value,\r\n        images: state.imagesAtlas,\r\n        algorithmPanel: state.algorithmPanelAtlas,\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    setZoomAction,\r\n    setMaxRect,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Render);\r\n","export const CHANGE_NAME = 'CHANGE_NAME';\nexport const ADD_IMAGES = 'ADD_IMAGES';\nexport const SELECT_IMAGE = 'SELECT_IMAGE';\nexport const DELETE_IMAGE = 'DELETE_IMAGE';\n\nexport const DES_SELECT_IMAGE = 'DES_SELECT_IMAGE';\nexport const EDITING_IMAGE_NAME = 'EDITING_IMAGE';\nexport const CLOSE_EDITING_IMAGE = 'CLOSE_EDITING_IMAGE';\nexport const RESET_IMAGES = 'RESET_IMAGES';\n\n// Interfaces\nexport interface ImageData {\n    id: string;\n    name?: string;\n    width: number;\n    height: number;\n    size: number;\n    src: string;\n    active: boolean;\n    changeName: boolean;\n    origin: { x: number; y: number };\n}\n\nexport interface AddImageAction {\n    type: string;\n    payload: ImageData[];\n}\n\nexport type ImageDataCRUD = Pick<ImageData, 'id' | 'name'>;\n\nexport interface ImageCRUD {\n    type: string;\n    payload: ImageDataCRUD;\n}\n\n// Constantes de las acciones\nexport const AddImage = (payload: ImageData[]): AddImageAction => {\n    return {\n        type: ADD_IMAGES,\n        payload,\n    };\n};\n\n/**\n * Nos ayuda a cambiar el nombre de las cards de imágenes\n * @param payload \\{ id: string, name: string }\n */\nexport const ChangeImageName = (payload: ImageDataCRUD): ImageCRUD => {\n    return {\n        type: CHANGE_NAME,\n        payload,\n    };\n};\n/**\n * Nos ayuda a seleccionar el nombre para editarlo\n * @param payload \\{ id: string }\n */\nexport const EditingImageName = (payload: ImageDataCRUD): ImageCRUD => {\n    return {\n        type: EDITING_IMAGE_NAME,\n        payload,\n    };\n};\n\n/**\n * Ayuda a cerrar el input de edición del nombre\n */\nexport const CloseEditingImage = () => {\n    return {\n        type: CLOSE_EDITING_IMAGE,\n    };\n};\n\n/**\n * Nos ayuda a seleccionar una imagen\n */\nexport const SelectImage = (payload: ImageDataCRUD): ImageCRUD => {\n    return {\n        type: SELECT_IMAGE,\n        payload,\n    };\n};\n\n/**\n * Nos ayuda a des-seleccionar una imagen\n */\nexport const DesSelectImage = () => {\n    return {\n        type: DES_SELECT_IMAGE,\n    };\n};\n/**\n * Nos ayuda a borrar una imagen\n * @param payload \\{ id: string }\n */\nexport const DeleteImage = (payload: ImageDataCRUD): ImageCRUD => {\n    return {\n        type: DELETE_IMAGE,\n        payload,\n    };\n};\n/**\n * El reset local de animaciones\n */\nexport const ResetImage = () => {\n    return {\n        type: RESET_IMAGES,\n    };\n};\n","import store from '../Redux/Store/store';\r\nimport { ImageData } from '../Redux/Actions/Atlas/images.action';\r\n\r\nconst checkImageRepeatedName = (image: ImageData, imageAtlas?: ImageData[]) => {\r\n    const imageData = imageAtlas ? imageAtlas : store.getState().imagesAtlas;\r\n    return imageData.find(\r\n        (compImage) => image.name === compImage.name && image.id !== compImage.id\r\n    );\r\n};\r\n\r\nexport default checkImageRepeatedName;\r\n","import store from '../Redux/Store/store';\r\nimport checkImageRepeatedName from './checkImageRepeatedName';\r\nimport { ImageData } from '../Redux/Actions/Atlas/images.action';\r\n\r\nconst preventImageNameDuplicate = (image: ImageData, imageAtlas?: ImageData[]) => {\r\n    let imageData = imageAtlas ? imageAtlas : store.getState().imagesAtlas;\r\n    let imageCopy = image;\r\n    let iterations = 0;\r\n    let initialName = image.name;\r\n    while (checkImageRepeatedName(image, imageData)) {\r\n        iterations++;\r\n        imageCopy.name = `${initialName}${iterations}`;\r\n    }\r\n    return imageCopy.name;\r\n};\r\n\r\nexport default preventImageNameDuplicate;\r\n","export const RESET_ALL: string = 'RESET_ALL';\r\n\r\nexport const ResetAllAnimationAction = () => ({\r\n    type: RESET_ALL,\r\n});\r\n","import {\r\n    ImageData,\r\n    CHANGE_NAME,\r\n    SELECT_IMAGE,\r\n    EDITING_IMAGE_NAME,\r\n    DELETE_IMAGE,\r\n    CLOSE_EDITING_IMAGE,\r\n    ADD_IMAGES,\r\n    ImageCRUD,\r\n    AddImageAction,\r\n    DES_SELECT_IMAGE,\r\n    RESET_IMAGES,\r\n} from '../../Actions/Atlas/images.action';\r\nimport preventImageNameDuplicate from '../../../utils/preventImageNameDuplicate';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\n// import images_default from '../anim_images_test.json';\r\n\r\n// const defaultImagesData: ImageData[] = images_default;\r\nconst defaultImagesData: ImageData[] = [];\r\n\r\nexport default (state: ImageData[] = defaultImagesData, action: ImageCRUD & AddImageAction) => {\r\n    switch (action.type) {\r\n        case ADD_IMAGES: {\r\n            action.payload.forEach((image) => {\r\n                image.name = preventImageNameDuplicate(image, state);\r\n            });\r\n            return [...state, ...action.payload];\r\n        }\r\n        case CHANGE_NAME: {\r\n            const newState = state.map((image) =>\r\n                image.id === action.payload.id ? ((image.name = action.payload.name), image) : image\r\n            );\r\n            return newState;\r\n        }\r\n        case SELECT_IMAGE: {\r\n            const newState = state.map((image) =>\r\n                image.id === action.payload.id\r\n                    ? ((image.active = true), image)\r\n                    : ((image.active = false), image)\r\n            );\r\n            return newState;\r\n        }\r\n        case DES_SELECT_IMAGE: {\r\n            const newState = state.map((image) => {\r\n                return ((image.active = false), image);\r\n            });\r\n            return newState;\r\n        }\r\n        case EDITING_IMAGE_NAME: {\r\n            const newState = state.map((image) =>\r\n                image.id === action.payload.id\r\n                    ? ((image.changeName = true), image)\r\n                    : ((image.changeName = false), image)\r\n            );\r\n            return newState;\r\n        }\r\n        case CLOSE_EDITING_IMAGE: {\r\n            const newState = state.map((image) => {\r\n                if (image.changeName) {\r\n                    image.name = preventImageNameDuplicate(image, state);\r\n                }\r\n                image.changeName = false;\r\n                return image;\r\n            });\r\n            return newState;\r\n        }\r\n        case DELETE_IMAGE: {\r\n            return state.filter((image) => image.id !== action.payload.id);\r\n        }\r\n        case RESET_IMAGES: {\r\n            return defaultImagesData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultImagesData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const SET_ZOOM: String = 'SET_ZOOM';\r\nexport const RESET_ZOOM: String = 'RESET_ZOOM';\r\n\r\nexport interface ZoomData {\r\n    value: number;\r\n}\r\n\r\nexport interface ZoomAction {\r\n    type: typeof SET_ZOOM;\r\n    payload: ZoomData;\r\n}\r\n\r\nexport const setZoomAction = (payload: ZoomData): ZoomAction => {\r\n    return {\r\n        type: SET_ZOOM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetZoomAction = () => {\r\n    return {\r\n        type: RESET_ZOOM,\r\n    };\r\n};\r\n","import { SET_ZOOM, ZoomAction, ZoomData, RESET_ZOOM } from '../../Actions/Atlas/zoom.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultZoomData: ZoomData = {\r\n    value: 100,\r\n};\r\n\r\nexport default (state: ZoomData = defaultZoomData, action: ZoomAction) => {\r\n    switch (action.type) {\r\n        case SET_ZOOM: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultZoomData;\r\n        }\r\n        case RESET_ZOOM: {\r\n            return defaultZoomData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const ACTIVATE_SIDE_CONTEXTMENU = 'ACTIVATE_SIDE_CONTEXTMENU';\r\nexport const CLOSE_SIDE_CONTEXTMENU = 'CLOSE_SIDE_CONTEXTMENU';\r\n\r\nexport interface ContextMenuData {\r\n    x: number;\r\n    y: number;\r\n    options?: {\r\n        value: string;\r\n    };\r\n    active: boolean;\r\n    id: string;\r\n}\r\n\r\nexport interface actionContextMenu {\r\n    type: string;\r\n    payload: ContextMenuData;\r\n}\r\n\r\n/**\r\n * Nos ayuda a activar y desactivar el menú\r\n * @param payload\r\n */\r\nexport const ActivateSideContextMenuAction = (payload: ContextMenuData): actionContextMenu => {\r\n    return {\r\n        type: ACTIVATE_SIDE_CONTEXTMENU,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const CloseSideContextMenuAction = () => {\r\n    return {\r\n        type: CLOSE_SIDE_CONTEXTMENU,\r\n    };\r\n};\r\n","import {\r\n    ContextMenuData,\r\n    actionContextMenu,\r\n    ACTIVATE_SIDE_CONTEXTMENU,\r\n    CLOSE_SIDE_CONTEXTMENU,\r\n} from '../../Actions/Atlas/contextSideMenu.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultContextMenuData: ContextMenuData = {\r\n    id: '0',\r\n    x: 0,\r\n    y: 0,\r\n    active: false,\r\n};\r\n\r\nexport default (state: ContextMenuData = defaultContextMenuData, action: actionContextMenu) => {\r\n    switch (action.type) {\r\n        case ACTIVATE_SIDE_CONTEXTMENU: {\r\n            return action.payload;\r\n        }\r\n        case CLOSE_SIDE_CONTEXTMENU: {\r\n            return defaultContextMenuData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultContextMenuData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const ALGORITHM_PANEL_CHANGE = 'ALGORITHM_PANEL_CHANGE';\r\nexport const RESET_ALGORITHM_PANEL = 'RESET_ALGORITHM_PANEL';\r\n\r\nexport interface payloadAlgorithmPanel {\r\n    type: string;\r\n    width?: number;\r\n    height?: number;\r\n    size?: number;\r\n    extrusion: number;\r\n    separation: number;\r\n}\r\n\r\nexport interface actionAlgorithmPanel {\r\n    type: string;\r\n    payload: payloadAlgorithmPanel;\r\n}\r\n\r\nexport const actionAlgorithmPanel = (payload: payloadAlgorithmPanel): actionAlgorithmPanel => {\r\n    return {\r\n        type: ALGORITHM_PANEL_CHANGE,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetAlgorithmAction = () => {\r\n    return {\r\n        type: RESET_ALGORITHM_PANEL,\r\n    };\r\n};\r\n","import {\r\n    ALGORITHM_PANEL_CHANGE,\r\n    actionAlgorithmPanel,\r\n    payloadAlgorithmPanel,\r\n    RESET_ALGORITHM_PANEL,\r\n} from '../../Actions/Atlas/algorithmPanel.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultAlgorithmPanelData: payloadAlgorithmPanel = {\r\n    type: 'maxrect',\r\n    width: 1024,\r\n    height: 1024,\r\n    size: 1,\r\n    extrusion: 0,\r\n    separation: 0,\r\n};\r\n\r\nexport default (\r\n    state: payloadAlgorithmPanel = defaultAlgorithmPanelData,\r\n    action: actionAlgorithmPanel\r\n) => {\r\n    switch (action.type) {\r\n        case ALGORITHM_PANEL_CHANGE: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultAlgorithmPanelData;\r\n        }\r\n        case RESET_ALGORITHM_PANEL: {\r\n            return defaultAlgorithmPanelData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const SET_ZOOM_ANIM: String = 'SET_ZOOM_ANIM';\r\nexport const RESET_ZOOM_ANIM: String = 'RESET_ZOOM_ANIM';\r\n\r\nexport interface ZoomDataAnim {\r\n    value: number;\r\n}\r\n\r\nexport interface ZoomAnimAction {\r\n    type: typeof SET_ZOOM_ANIM;\r\n    payload: ZoomDataAnim;\r\n}\r\n\r\nexport const setZoomAnimAction = (payload: ZoomDataAnim): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ZOOM_ANIM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetZoomAction = () => {\r\n    return {\r\n        type: RESET_ZOOM_ANIM,\r\n    };\r\n};\r\n","import {\r\n    SET_ZOOM_ANIM,\r\n    ZoomAnimAction,\r\n    ZoomDataAnim,\r\n    RESET_ZOOM_ANIM,\r\n} from '../../Actions/Animator/zoom.anim.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultZoomData: ZoomDataAnim = {\r\n    value: 100,\r\n};\r\n\r\nconst zoomAnim = (state: ZoomDataAnim = defaultZoomData, action: ZoomAnimAction) => {\r\n    switch (action.type) {\r\n        case SET_ZOOM_ANIM: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ZOOM_ANIM: {\r\n            return defaultZoomData;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultZoomData;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default zoomAnim;\r\n","import {\r\n    BackgroundDataAnim,\r\n    BackgroundAnimAction,\r\n    SET_BACKGROUND_ANIM,\r\n    RESET_BACKGROUND_ANIM,\r\n} from '../../Actions/Animator/background.anim.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultBackground: BackgroundDataAnim = {\r\n    value: 'rgba(0,0,0,0)',\r\n};\r\n\r\nconst backgroundAnim = (\r\n    state: BackgroundDataAnim = defaultBackground,\r\n    action: BackgroundAnimAction\r\n) => {\r\n    switch (action.type) {\r\n        case SET_BACKGROUND_ANIM: {\r\n            return action.payload;\r\n        }\r\n        case RESET_BACKGROUND_ANIM: {\r\n            return defaultBackground;\r\n        }\r\n        case RESET_ALL: {\r\n            return defaultBackground;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default backgroundAnim;\r\n","export const SET_BACKGROUND_ANIM: String = 'SET_BACKGROUND_ANIM';\r\nexport const RESET_BACKGROUND_ANIM: String = 'RESET_BACKGROUND_ANIM';\r\n\r\nexport interface BackgroundDataAnim {\r\n    value: string;\r\n}\r\n\r\nexport interface BackgroundAnimAction {\r\n    type: typeof SET_BACKGROUND_ANIM;\r\n    payload: BackgroundDataAnim;\r\n}\r\n\r\nexport const setBackgroundAnimAction = (payload: BackgroundDataAnim): BackgroundAnimAction => {\r\n    return {\r\n        type: SET_BACKGROUND_ANIM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetBackgroundAction = () => {\r\n    return {\r\n        type: RESET_BACKGROUND_ANIM,\r\n    };\r\n};\r\n","import {\r\n    SET_ATLAS_IMAGE_ANIM,\r\n    SET_ATLAS_JSON_ANIM,\r\n    RESET_ATLAS_ANIM,\r\n    SET_ATLAS_ANIM_ANIM,\r\n} from '../../Actions/Animator/atlas.anim.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nconst defaultAtlasData: any = {\r\n    image: {},\r\n    json: '',\r\n    animation: '',\r\n};\r\n\r\nconst atlasAnim = (state = defaultAtlasData, action: any) => {\r\n    switch (action.type) {\r\n        case SET_ATLAS_IMAGE_ANIM: {\r\n            return {\r\n                ...state,\r\n                image: action.payload,\r\n            };\r\n        }\r\n        case SET_ATLAS_JSON_ANIM: {\r\n            return {\r\n                ...state,\r\n                json: action.payload,\r\n            };\r\n        }\r\n        case SET_ATLAS_ANIM_ANIM: {\r\n            return {\r\n                ...state,\r\n                animation: action.payload,\r\n            };\r\n        }\r\n        case RESET_ATLAS_ANIM: {\r\n            return defaultAtlasData;\r\n        }\r\n\r\n        case RESET_ALL: {\r\n            return defaultAtlasData;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default atlasAnim;\r\n","export const SET_ATLAS_IMAGE_ANIM: String = 'SET_ATLAS_ANIM';\r\nexport const SET_ATLAS_JSON_ANIM: String = 'SET_ATLAS_JSON_ANIM';\r\nexport const SET_ATLAS_ANIM_ANIM: String = 'SET_ATLAS_ANIM_ANIM';\r\nexport const RESET_ATLAS_ANIM: String = 'RESET_ATLAS_ANIM';\r\n\r\nexport interface ZoomAnimAction {\r\n    type: typeof SET_ATLAS_IMAGE_ANIM;\r\n    payload: [];\r\n}\r\n\r\nexport const SetAtlasImageAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_IMAGE_ANIM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const SetAtlasJSONAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_JSON_ANIM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const SetAtlasAnimAnimAction = (payload: any): ZoomAnimAction => {\r\n    return {\r\n        type: SET_ATLAS_ANIM_ANIM,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetAtlasAction = () => {\r\n    return {\r\n        type: RESET_ATLAS_ANIM,\r\n    };\r\n};\r\n","import { AddSpriteToFramesPayload } from './frames.list.action';\r\n\r\nexport const ACTIVATE_ANIMATION: String = 'ACTIVATE_ANIMATION';\r\nexport const ADD_ANIMATION: String = 'ADD_ANIMATION';\r\nexport const SWIPE_ANIMATION: String = 'SWIPE_ANIMATION';\r\nexport const CHANGE_KEY_CONTROLS: String = 'CHANGE_KEY_CONTROLS';\r\nexport const EDIT_NAME_ANIMATION: String = 'EDIT_NAME_ANIMATION';\r\nexport const DELETE_ANIMATION: String = 'DELETE_ANIMATION';\r\nexport const RESET_ANIMATION: String = 'RESET_ANIMATION';\r\nexport const PLAY_STOP: String = 'PLAY_STOP';\r\n\r\n// #### INTERFACES\r\n\r\n// Add\r\nexport interface AddAnimationPayloadInterface {\r\n    color: string;\r\n    id: string;\r\n    name: string;\r\n    key_controls: KeyControlsInterface;\r\n    play: boolean;\r\n    frames: Array<AddSpriteToFramesPayload>;\r\n}\r\n// Swipe animations\r\nexport interface SwipeAnimations {\r\n    type: typeof SWIPE_ANIMATION;\r\n    payload: Array<AddAnimationPayloadInterface>;\r\n}\r\n\r\nexport interface KeyControlsInterface {\r\n    repeat: number;\r\n    frame_rate: number;\r\n    yoyo?: boolean;\r\n}\r\n// Update key_controls\r\nexport interface ChangeKeyControlsPayload {\r\n    id: string;\r\n    key_controls: KeyControlsInterface;\r\n}\r\nexport interface ChangeKeyControls {\r\n    type: typeof CHANGE_KEY_CONTROLS;\r\n    payload: ChangeKeyControlsPayload;\r\n}\r\n\r\n// Activate animation\r\nexport interface ActivateAnimationPayloadInterface {\r\n    id: string;\r\n}\r\nexport interface ActivateAnimationActionInterface {\r\n    type: typeof ACTIVATE_ANIMATION;\r\n    payload: ActivateAnimationPayloadInterface;\r\n}\r\n\r\nexport interface AddAnimationActionInterface {\r\n    type: typeof ADD_ANIMATION;\r\n    payload: AddAnimationPayloadInterface;\r\n}\r\n\r\n// Edit\r\nexport interface EditNameAnimationPayloadInterface {\r\n    id: string;\r\n    name: string;\r\n}\r\nexport interface EditAnimationActionInterface {\r\n    type: typeof EDIT_NAME_ANIMATION;\r\n    payload: EditNameAnimationPayloadInterface;\r\n}\r\n\r\n// Delete\r\nexport interface DeleteAnimationPayloadInterface {\r\n    id: string;\r\n}\r\nexport interface DeleteAnimationActionInterface {\r\n    type: typeof EDIT_NAME_ANIMATION;\r\n    payload: DeleteAnimationPayloadInterface;\r\n}\r\n\r\n// Play stop\r\nexport interface PayloadStop {\r\n    id: string;\r\n    play: boolean;\r\n}\r\n\r\nexport type AnimationActionTypes = ChangeKeyControls &\r\n    DeleteAnimationActionInterface &\r\n    AddAnimationActionInterface &\r\n    EditAnimationActionInterface &\r\n    ActivateAnimationActionInterface &\r\n    SwipeAnimations;\r\n\r\n// #### ACTIONS\r\nexport const ChangeKeyControlsAction = (payload: ChangeKeyControlsPayload): ChangeKeyControls => {\r\n    return {\r\n        type: CHANGE_KEY_CONTROLS,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ActivateAnimation = (\r\n    payload: ActivateAnimationPayloadInterface\r\n): ActivateAnimationActionInterface => {\r\n    return {\r\n        type: ACTIVATE_ANIMATION,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const AddAnimationAction = (\r\n    payload: AddAnimationPayloadInterface\r\n): AddAnimationActionInterface => {\r\n    return {\r\n        type: ADD_ANIMATION,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const SwipeAnimationsAction = (\r\n    payload: Array<AddAnimationPayloadInterface>\r\n): SwipeAnimations => {\r\n    return {\r\n        type: SWIPE_ANIMATION,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const EditNameAnimationAction = (\r\n    payload: EditNameAnimationPayloadInterface\r\n): EditAnimationActionInterface => {\r\n    return {\r\n        type: EDIT_NAME_ANIMATION,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const DeleteAnimationAction = (\r\n    payload: DeleteAnimationPayloadInterface\r\n): DeleteAnimationActionInterface => {\r\n    return {\r\n        type: DELETE_ANIMATION,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetAnimation = () => {\r\n    return {\r\n        type: RESET_ANIMATION,\r\n    };\r\n};\r\n\r\nexport const PlayStopAction = (payload: PayloadStop) => {\r\n    return {\r\n        type: PLAY_STOP,\r\n        payload,\r\n    };\r\n};\r\n","import store from '../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface } from '../Redux/Actions/Animator/animation.list.action';\r\n\r\nconst checkAnimationRepeatedName = (\r\n    animation: AddAnimationPayloadInterface,\r\n    animationList?: Array<AddAnimationPayloadInterface>\r\n) => {\r\n    const animationData = animationList ? animationList : store.getState().AnimationList.animations;\r\n    return animationData.find(\r\n        (compAnimation) =>\r\n            animation.name === compAnimation.name && animation.id !== compAnimation.id\r\n    );\r\n};\r\n\r\nexport default checkAnimationRepeatedName;\r\n","import store from '../Redux/Store/store';\r\nimport checkAnimationRepeatedName from './checkAnimationRepeatedName';\r\nimport { AddAnimationPayloadInterface } from '../Redux/Actions/Animator/animation.list.action';\r\nimport { ActionAnimationList } from '../Redux/Reducers/Animator/animation.list.reducer';\r\n\r\nconst preventAnimationNameDuplicate = (\r\n    animation: AddAnimationPayloadInterface,\r\n    animationList?: ActionAnimationList\r\n) => {\r\n    let animationData = animationList ? animationList : store.getState().AnimationList;\r\n    let animationCopy = animation;\r\n    let iterations = 0;\r\n    let initialName = animationCopy.name;\r\n    while (checkAnimationRepeatedName(animationCopy, animationData.animations)) {\r\n        iterations++;\r\n        animationCopy.name = `${initialName}${iterations}`;\r\n    }\r\n    return animationCopy.name;\r\n};\r\n\r\nexport default preventAnimationNameDuplicate;\r\n","import {\r\n    AnimationActionTypes,\r\n    ADD_ANIMATION,\r\n    EDIT_NAME_ANIMATION,\r\n    DELETE_ANIMATION,\r\n    RESET_ANIMATION,\r\n    ACTIVATE_ANIMATION,\r\n    AddAnimationPayloadInterface,\r\n    CHANGE_KEY_CONTROLS,\r\n    PLAY_STOP,\r\n    SWIPE_ANIMATION,\r\n} from '../../Actions/Animator/animation.list.action';\r\nimport {\r\n    ADD_SPRITE_TO_FRAMES,\r\n    ACTIVATE_FRAME,\r\n    DELETE_FRAME,\r\n    FrameListTypes,\r\n    SWIPE_FRAME,\r\n} from '../../Actions/Animator/frames.list.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\nimport preventAnimationNameDuplicate from '../../../utils/preventAnimationNameDuplicate';\r\n\r\nexport type ActionAnimationList = {\r\n    actual_animation: string;\r\n    animations: Array<AddAnimationPayloadInterface>;\r\n};\r\n\r\nconst defaultAnimationList: ActionAnimationList = {\r\n    actual_animation: '0',\r\n    animations: [],\r\n};\r\n\r\ntype ActionsTypes = AnimationActionTypes & FrameListTypes;\r\n\r\nconst AnimationList = (state = defaultAnimationList, action: ActionsTypes) => {\r\n    switch (action.type) {\r\n        case ACTIVATE_ANIMATION: {\r\n            return {\r\n                ...state,\r\n                actual_animation: action.payload.id,\r\n                animations: state.animations.map((animation: any) => {\r\n                    return ((animation.play = false), animation);\r\n                }),\r\n            };\r\n        }\r\n\r\n        case ADD_ANIMATION: {\r\n            let animation = action.payload;\r\n            animation.name = preventAnimationNameDuplicate(action.payload, state);\r\n            return {\r\n                actual_animation: action.payload.id,\r\n                animations: [action.payload, ...state.animations],\r\n            };\r\n        }\r\n\r\n        case SWIPE_ANIMATION: {\r\n            return {\r\n                ...state,\r\n                animations: action.payload,\r\n            };\r\n        }\r\n\r\n        case CHANGE_KEY_CONTROLS: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) =>\r\n                    animation.id === action.payload.id\r\n                        ? ((animation.key_controls = action.payload.key_controls), animation)\r\n                        : animation\r\n                ),\r\n            };\r\n        }\r\n\r\n        case EDIT_NAME_ANIMATION: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) =>\r\n                    animation.id === action.payload.id\r\n                        ? ((animation.name = preventAnimationNameDuplicate(action.payload, state)),\r\n                          animation)\r\n                        : animation\r\n                ),\r\n            };\r\n        }\r\n\r\n        case DELETE_ANIMATION: {\r\n            const new_state = {\r\n                ...state,\r\n                animations: state.animations.filter(\r\n                    (animation: any) => animation.id !== action.payload.id\r\n                ),\r\n            };\r\n            new_state.actual_animation = state.animations.length > 1 ? state.animations[0].id : '0';\r\n            return new_state;\r\n        }\r\n\r\n        // Frames\r\n        case ADD_SPRITE_TO_FRAMES: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    frames.frames = frames.frames.map((frame: any) => {\r\n                        frame.active = false;\r\n                        return frame;\r\n                    });\r\n\r\n                    if (action.payload.id === frames.id) {\r\n                        frames.frames.push(action.payload.sprite);\r\n                    }\r\n                    return frames;\r\n                }),\r\n            };\r\n        }\r\n\r\n        case SWIPE_FRAME: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    if (frames.id === action.payload.id) {\r\n                        frames.frames = action.payload.frames;\r\n                    }\r\n                    return frames;\r\n                }),\r\n            };\r\n        }\r\n\r\n        case ACTIVATE_FRAME: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((frames: any) => {\r\n                    frames.frames = frames.frames.map((frame: any) => {\r\n                        if (frame.local_id === action.payload.local_id) {\r\n                            frame.active = true;\r\n                        } else {\r\n                            frame.active = false;\r\n                        }\r\n                        return frame;\r\n                    });\r\n                    return frames;\r\n                }),\r\n            };\r\n        }\r\n\r\n        case PLAY_STOP: {\r\n            return {\r\n                ...state,\r\n                animations: state.animations.map((animation: any) => {\r\n                    if (animation.id === action.payload.id) {\r\n                        animation.play = action.payload.play;\r\n                    } else {\r\n                        animation.play = false;\r\n                    }\r\n                    return animation;\r\n                }),\r\n            };\r\n        }\r\n\r\n        case DELETE_FRAME: {\r\n            const state_animations = state.animations.map((frames: any) => {\r\n                frames.frames = frames.frames.filter(\r\n                    (frame: any) => frame.local_id !== action.payload.local_id\r\n                );\r\n                return frames;\r\n            });\r\n            return { ...state, animations: state_animations };\r\n        }\r\n\r\n        case RESET_ANIMATION: {\r\n            return defaultAnimationList;\r\n        }\r\n\r\n        case RESET_ALL: {\r\n            return defaultAnimationList;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default AnimationList;\r\n","export const ADD_SPRITE_TO_FRAMES: String = 'ADD_SPRITE_TO_FRAMES';\r\nexport const ACTIVATE_FRAME: String = 'ACTIVATE_FRAME';\r\nexport const SWIPE_FRAME: String = 'SWIPE_FRAME';\r\nexport const DELETE_FRAME: String = 'DELETE_FRAME';\r\n\r\n// TODO: Reservar la acción reset\r\nexport const RESET_ANIMATION: String = 'RESET_ANIMATION';\r\n\r\n// #### INTERFACES\r\n// Agregar sprite al frame container\r\nexport interface AddSpriteToFramesPayload {\r\n    id: string;\r\n    sprite: {\r\n        id: string;\r\n        local_id: string;\r\n        name: string;\r\n        src: string;\r\n        active: boolean;\r\n    };\r\n}\r\nexport interface AddSpriteToFrames {\r\n    type: typeof ADD_SPRITE_TO_FRAMES;\r\n    payload: AddSpriteToFramesPayload;\r\n}\r\n\r\n// Swipe\r\nexport interface SwipeFramePayload {\r\n    id: string;\r\n    frames: Array<any>;\r\n}\r\n\r\nexport interface SwipeFrame {\r\n    type: typeof SWIPE_FRAME;\r\n    payload: SwipeFramePayload;\r\n}\r\n\r\n// Activate frame\r\nexport interface ActivateFramePayload {\r\n    local_id: string;\r\n}\r\n\r\nexport interface ActivateFrame {\r\n    type: typeof ACTIVATE_FRAME;\r\n    payload: ActivateFramePayload;\r\n}\r\n\r\n// Delete Frame\r\nexport interface DeleteFramePayload {\r\n    local_id: string;\r\n}\r\nexport interface DeleteFrame {\r\n    type: typeof DELETE_FRAME;\r\n    payload: DeleteFramePayload;\r\n}\r\n\r\nexport type FrameListTypes = AddSpriteToFrames & ActivateFrame & DeleteFrame;\r\n\r\n// #### ACTIONS\r\n\r\nexport const AddSpriteToFramesAction = (payload: AddSpriteToFramesPayload): AddSpriteToFrames => {\r\n    return {\r\n        type: ADD_SPRITE_TO_FRAMES,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ActivateFrameAction = (payload: ActivateFramePayload): ActivateFrame => {\r\n    return {\r\n        type: ACTIVATE_FRAME,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const SwipeFrameAction = (payload: SwipeFramePayload): SwipeFrame => {\r\n    return {\r\n        type: SWIPE_FRAME,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const DeleteFrameAction = (payload: DeleteFramePayload): DeleteFrame => {\r\n    return {\r\n        type: DELETE_FRAME,\r\n        payload,\r\n    };\r\n};\r\n","import { combineReducers } from 'redux';\r\n\r\nimport imagesAtlas from './Atlas/imagesAtlas.reducer';\r\nimport zoomAtlas from './Atlas/zoom.reducer';\r\nimport contextSideMenuAtlas from './Atlas/contextSideMenu.reducer';\r\nimport algorithmPanelAtlas from './Atlas/algorithmPanel.reducer';\r\nimport maxrectAtlas from './Atlas/maxrect.reducer';\r\nimport zoomAnim from './Animator/zoom.anim.reducer';\r\nimport backgroundAnim from './Animator/background.anim.reducer';\r\nimport atlasAnim from './Animator/atlas.anim.reducer';\r\nimport AnimationList from './Animator/animation.list.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    imagesAtlas,\r\n    contextSideMenuAtlas,\r\n    zoomAtlas,\r\n    algorithmPanelAtlas,\r\n    maxrectAtlas,\r\n    // Sescción de reducers para animación\r\n    zoomAnim,\r\n    backgroundAnim,\r\n    atlasAnim,\r\n    AnimationList,\r\n});\r\n\r\nexport default rootReducer;\r\n","import {\r\n    MaxRectAction,\r\n    SET_MAXRECT,\r\n    MaxRectData,\r\n    RESET_MAXRECT,\r\n} from '../../Actions/Atlas/maxrect.action';\r\nimport { RESET_ALL } from '../../Actions/globals.actions';\r\n\r\nexport default (state: MaxRectData[] = [], action: MaxRectAction) => {\r\n    switch (action.type) {\r\n        case SET_MAXRECT: {\r\n            return action.payload;\r\n        }\r\n        case RESET_ALL: {\r\n            return [];\r\n        }\r\n        case RESET_MAXRECT: {\r\n            return [];\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","export const SET_MAXRECT = 'SET_MAXRECT';\r\nexport const RESET_MAXRECT: String = 'RESET_MAXRECT';\r\n\r\nexport interface MaxRectData {\r\n    width: number;\r\n    height: number;\r\n    data: {\r\n        id: string;\r\n        name: string;\r\n        origin: {\r\n            x: number;\r\n            y: number;\r\n        };\r\n    };\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface MaxRectAction {\r\n    type: typeof SET_MAXRECT;\r\n    payload: MaxRectData[];\r\n}\r\n\r\nexport const setMaxRect = (payload: MaxRectData[]): MaxRectAction => {\r\n    return {\r\n        type: SET_MAXRECT,\r\n        payload,\r\n    };\r\n};\r\n\r\nexport const ResetMaxRectAction = () => {\r\n    return {\r\n        type: RESET_MAXRECT,\r\n    };\r\n};\r\n","import { createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport rootReducer from '../Reducers';\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools());\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport default store;\r\n","const clearName = (letters: string) => {\r\n    const chars: any = {\r\n        á: 'a',\r\n        é: 'e',\r\n        í: 'i',\r\n        ó: 'o',\r\n        ú: 'u',\r\n        ñ: 'n',\r\n        ' ': '_',\r\n        ',': '',\r\n        ';': '',\r\n        '&': '',\r\n        '/': '',\r\n    };\r\n    return letters\r\n        .toString()\r\n        .toLowerCase()\r\n        .replace(/[áéíóúñ&;,// ]/g, (m: string) => chars[m])\r\n        .split(/(.png|.gif)/)[0]\r\n        .trim()\r\n        .trimLeft()\r\n        .trimRight()\r\n        .trimEnd();\r\n};\r\n\r\nexport default clearName;\r\n","import nextId from 'react-id-generator';\r\n\r\nconst generateId = (value = ''): string => {\r\n    let i = 10;\r\n    let out = Math.random();\r\n    while (--i) {\r\n        out += Math.random() * (1000 - 100) + 100 + Date.now();\r\n    }\r\n    const pref = value !== '' ? `${value}_` : ``;\r\n\r\n    return nextId(`${pref}${Math.round(out).toString(32)}`);\r\n};\r\n\r\nexport default generateId;\r\n","/**\r\n * Nos ayudará a devolver el grupo de imágenes que aceptaremos en la herramienta\r\n */\r\n\r\nconst acceptFormatImages: Array<string> = ['image/jpg', 'image/jpeg', 'image/png'];\r\n\r\nexport default acceptFormatImages;\r\n","import EventEmitter from 'eventemitter3';\r\n\r\nlet Observer = new EventEmitter();\r\n\r\nlet GLOBAL_EVENT = {\r\n    // Eventos de comunicación con el CANVAS\r\n    IMAGE_CHARGED: 'IMAGE_CHARGED',\r\n    IMAGE_CHARGED_COMPLETE: 'IMAGE_CHARGED_COMPLETE',\r\n    ZOOM_CHANGED: 'ZOOM_CHANGED',\r\n    EXTRUSION_CHANGED: 'EXTRUSION_CHANGED',\r\n    PANEL_RESIZE_END: 'PANEL_RESIZE_END',\r\n    IMAGE_SELECTED: 'IMAGE_SELECTED', // Esto recivirá el ID de la imagen seleccionada\r\n    IMAGE_DES_SELECTED: 'IMAGE_DES_SELECTED',\r\n\r\n    // Export\r\n    OPEN_EXPORT_OPTIONS_PC: 'OPEN_EXPORT_OPTIONS_PC',\r\n    // El export solicita la imágen al canvas y cuando está lista ejecuta image_canvas_expoted\r\n    REQUEST_IMAGE_CANVAS: 'REQUEST_IMAGE_CANVAS',\r\n    IMAGE_CANVAS_EXPORTED: 'IMAGE_CANVAS_EXPORTED',\r\n\r\n    IMPORT_ATLAS: {\r\n        // Abrir modal de import atlas\r\n        OPEN_ATLAS_IMPORT: 'OPEN_ATLAS_IMPORT',\r\n        OPEN_ATLAS_IMPORT_SEND_IMAGE: 'OPEN_ATLAS_IMPORT_SEND_IMAGE',\r\n        CLOSE_ATLAS_IMPORT: 'CLOSE_ATLAS_IMPORT',\r\n        // Estado de import atlas\r\n        CHANGE_IMPORT_ATLAS_STATE: 'CHANGE_IMPORT_ATLAS_STATE',\r\n        // Botón de importación\r\n        IMPORT_ATLAS_GRID_BUTTON: 'IMPORT_ATLAS_GRID_BUTTON',\r\n        // Lo usamos para enviar el atlas JSON al render\r\n        IMPORT_ATLAS_JSON: 'IMPORT_ATLAS_JSON',\r\n    },\r\n    IMPORT_GIF: 'IMPORT_GIF',\r\n    // Sistema de notificaciones\r\n    NOTIFICATION_SYSTEM: {\r\n        SUCCESS: 'SUCCESS',\r\n        WARNING: 'WARNING',\r\n        ERROR: 'ERROR',\r\n        CLEAR: 'CLEAR',\r\n    },\r\n    // Sistema de loading\r\n    SPINNER: {\r\n        OPEN: 'OPEN_SPINNER',\r\n        CLOSE: 'CLOSE_SPINNER',\r\n    },\r\n    RESET_ATLAS: 'RESET_ATLAS',\r\n};\r\n\r\n// Tipados\r\nexport interface ImageCanvasData {\r\n    name: string;\r\n    src: string;\r\n    src_original: string;\r\n    type: string;\r\n    scale: number;\r\n}\r\n\r\nexport interface GifImports {\r\n    name: string;\r\n    width: number;\r\n    height: number;\r\n    srcs: Array<string>;\r\n}\r\n\r\nexport { Observer, GLOBAL_EVENT };\r\n","import clearName from './clearNames';\r\nimport generateId from './generateId';\r\nimport acceptFormatImages from '../constants/acceptFormatImages';\r\nimport { Observer, GLOBAL_EVENT } from '../Views/AtlasPacker/Observer';\r\nimport { append } from 'ramda';\r\n\r\n// Nos ayuda a tener la/las imágenes a partir de un file input\r\nconst getImageFiles = (files: any) => {\r\n    return new Promise((resolve, reject) => {\r\n        const Files = Array.from(files).filter((file: any) => {\r\n            if (file.size > 1600000) {\r\n                Observer.emit(\r\n                    GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR,\r\n                    `The file is too big. The minimun is: 1.6MB`\r\n                );\r\n            }\r\n            const newAcceptFormImages = append('image/gif', acceptFormatImages);\r\n            return newAcceptFormImages.includes(file.type) && file.size < 1650000;\r\n        });\r\n\r\n        const FilesOut: any = [];\r\n\r\n        Files.forEach((file: any): void => {\r\n            const name = clearName(file.name);\r\n            const reader = new FileReader();\r\n            reader.onload = (fileURL: any) => {\r\n                const finalFile = fileURL.target;\r\n                const img = new Image();\r\n                img.onload = () => {\r\n                    FilesOut.push({\r\n                        id: generateId(),\r\n                        name,\r\n                        width: img.width,\r\n                        height: img.height,\r\n                        src: finalFile.result,\r\n                        active: false,\r\n                        changeName: false,\r\n                        origin: { x: 0.5, y: 0.5 },\r\n                    });\r\n                    if (Files.length === FilesOut.length) {\r\n                        resolve(FilesOut);\r\n                    }\r\n                };\r\n                img.src = URL.createObjectURL(file);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    });\r\n};\r\n\r\nexport default getImageFiles;\r\n","import React from 'react';\r\nimport getImageFiles from '../../../../utils/getImages';\r\n\r\nconst ImportButton = (props: any) => {\r\n    const inputHandle = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getImageFiles(files);\r\n        props.loadImages(files_loaded);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <li className=\"fileUpload\">\r\n                {props.children}\r\n                <input\r\n                    type=\"file\"\r\n                    className=\"upload cursor-pointer uploadSprites\"\r\n                    accept={props.accept}\r\n                    multiple={props.multiple}\r\n                    onChange={inputHandle}\r\n                />\r\n            </li>\r\n        </React.Fragment>\r\n    );\r\n};\r\nexport default ImportButton;\r\n","const gifFrames = require('gif-frames');\r\nconst getGifFrames = (url: string) => {\r\n    return new Promise((success, error) => {\r\n        gifFrames(\r\n            { url: url, quality: '100', frames: 'all', outputType: 'canvas', cumulative: true },\r\n            (err: any, frameData: any) => {\r\n                if (err) {\r\n                    error(err);\r\n                } else {\r\n                    success(\r\n                        frameData.map((frame: any) =>\r\n                            (frame.getImage() as HTMLCanvasElement).toDataURL()\r\n                        )\r\n                    );\r\n                }\r\n            }\r\n        );\r\n    });\r\n};\r\n\r\nexport default getGifFrames;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// Componentes\r\nimport ImportButton from './ImportButton.component';\r\n\r\n// Estilos\r\nimport './Menu.style.scss';\r\n\r\n// Redux\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { Link } from 'react-router-dom';\r\nimport { ResetAllAnimationAction } from '../../../../Redux/Actions/globals.actions';\r\nimport acceptFormatImages from '../../../../constants/acceptFormatImages';\r\nimport getGifFrames from '../../../../utils/getGifFrames';\r\n\r\nimport Patreon from '../../../../Vendor/become_patreon.png';\r\nimport isElectron from 'is-electron';\r\n\r\nconst MenuComponent: React.FunctionComponent = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const receiveImages = (images: ImageData[]) => {\r\n        dispatch(AddImage(images));\r\n    };\r\n\r\n    const receiveAtlasImage = (images: ImageData[]) => {\r\n        // Ejeutamos el evento para el atlas ya que se abre el modal que modifica el atlas\r\n        Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT, images);\r\n    };\r\n\r\n    const receiveGif = async (gif: ImageData[]) => {\r\n        if (gif[0].src?.includes('image/gif')) {\r\n            Observer.emit(GLOBAL_EVENT.SPINNER.OPEN);\r\n            try {\r\n                const all_gifs = await getGifFrames(gif[0].src);\r\n                const gif_object = {\r\n                    name: gif[0].name,\r\n                    width: gif[0].width,\r\n                    height: gif[0].height,\r\n                    srcs: all_gifs,\r\n                };\r\n                Observer.emit(GLOBAL_EVENT.IMPORT_GIF, gif_object);\r\n            } catch (err) {\r\n                Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, `Gif error`);\r\n            }\r\n            Observer.emit(GLOBAL_EVENT.SPINNER.CLOSE);\r\n        } else {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, 'It is not a gif file');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav className=\"menu noselect\">\r\n            <ul>\r\n                <li className=\"icon\">\r\n                    {isElectron() ? (\r\n                        <Link to=\"/\" className=\"material-icons\">\r\n                            home\r\n                        </Link>\r\n                    ) : (\r\n                        <a href=\"https://gammafp.com\" className=\"material-icons\">\r\n                            home\r\n                        </a>\r\n                    )}\r\n                </li>\r\n                <ImportButton\r\n                    loadImages={receiveImages}\r\n                    multiple={true}\r\n                    accept={acceptFormatImages.join(',')}\r\n                >\r\n                    Import\r\n                </ImportButton>\r\n                <ImportButton\r\n                    loadImages={receiveAtlasImage}\r\n                    multiple={false}\r\n                    accept={acceptFormatImages.join(',')}\r\n                >\r\n                    Import Atlas\r\n                </ImportButton>\r\n                <ImportButton loadImages={receiveGif} multiple={false} accept={'image/gif'}>\r\n                    Import Gif\r\n                </ImportButton>\r\n                <li\r\n                    onClick={() => {\r\n                        // ObserverAnim.removeAllListeners();\r\n                        dispatch(ResetAllAnimationAction());\r\n                        Observer.emit(GLOBAL_EVENT.RESET_ATLAS);\r\n                    }}\r\n                >\r\n                    Reset\r\n                </li>\r\n                <li>\r\n                    <a\r\n                        href=\"https://www.patreon.com/join/gammafp?\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                    >\r\n                        <img src={Patreon} alt=\"Patreon\" />\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default MenuComponent;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport './CardImages.style.scss';\r\n\r\nimport {\r\n    ChangeImageName,\r\n    SelectImage,\r\n    EditingImageName,\r\n    CloseEditingImage,\r\n    ImageData,\r\n} from '../../../../Redux/Actions/Atlas/images.action';\r\n\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport clearName from '../../../../utils/clearNames';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\n\r\nconst CardImage: React.FunctionComponent = () => {\r\n    const images = useSelector((state: RootState): ImageData[] => state.imagesAtlas);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleInputBlur = (options: { id: string; name: string }) => {\r\n        const name_trimmed = options.name.trim().trimLeft().trimRight().trimEnd();\r\n        if (!isEmpty(name_trimmed)) {\r\n            dispatch(ChangeImageName({ id: options.id, name: clearName(name_trimmed) }));\r\n        }\r\n        dispatch(CloseEditingImage());\r\n    };\r\n\r\n    // Cambiamos el nombre de una imagen\r\n    const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>, id: string) => {\r\n        if (event.key === 'Enter') {\r\n            handleInputBlur({ id, name: event.currentTarget.value });\r\n        }\r\n    };\r\n\r\n    // Seleccionamos una imagen\r\n    const handleSelectImage = (id: string) => {\r\n        Observer.emit(GLOBAL_EVENT.IMAGE_SELECTED, id);\r\n        dispatch(SelectImage({ id }));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {images.map((image: ImageData, index: number) => {\r\n                return (\r\n                    <div\r\n                        className={`animated bounceInLeft card-image ${\r\n                            image.active ? 'card-image-active' : ''\r\n                        }`}\r\n                        id={`id_${image.id}`}\r\n                        key={index}\r\n                        onClick={() => {\r\n                            handleSelectImage(image.id);\r\n                        }}\r\n                        onContextMenu={(event) => {\r\n                            handleSelectImage(image.id);\r\n                            dispatch(\r\n                                ActivateSideContextMenuAction({\r\n                                    x: event.clientX,\r\n                                    y: event.clientY,\r\n                                    id: image.id,\r\n                                    active: true,\r\n                                })\r\n                            );\r\n                        }}\r\n                    >\r\n                        <div className=\"card-image--image\">\r\n                            <img src={image.src} alt=\"Imagen base\" className=\"noselect\" />\r\n                        </div>\r\n                        <div className=\"card-image--nameImage\">\r\n                            {image.changeName ? (\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"card-image--nameImage_input\"\r\n                                    autoFocus={true}\r\n                                    onFocus={(event) => {\r\n                                        event.target.select();\r\n                                    }}\r\n                                    defaultValue={image.name}\r\n                                    onKeyPress={(event) => handleKeyPress(event, image.id)}\r\n                                    onBlur={(event) =>\r\n                                        handleInputBlur({ name: event.target.value, id: image.id })\r\n                                    }\r\n                                    maxLength={50}\r\n                                />\r\n                            ) : (\r\n                                <span\r\n                                    onDoubleClick={() => {\r\n                                        dispatch(EditingImageName({ id: image.id }));\r\n                                    }}\r\n                                >\r\n                                    {image.name}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default CardImage;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { EditingImageName, DeleteImage } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport {\r\n    CloseSideContextMenuAction,\r\n    ContextMenuData,\r\n} from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\n\r\nimport './ContextMenu.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nlet cambio = true;\r\n\r\nconst ContextMenu = (props: any) => {\r\n    const sideMenuContext: ContextMenuData = useSelector(\r\n        (state: RootState) => state.contextSideMenuAtlas\r\n    );\r\n    const dispatch = useDispatch();\r\n\r\n    let fadeIn = cambio ? 'fadeIn' : 'fadeIn2';\r\n    let contextMenuClassName = `context-menu animated ${\r\n        sideMenuContext.active ? 'active ' + ((cambio = !cambio), fadeIn) : ''\r\n    }`;\r\n\r\n    // Colocamos la posición, en el top se corrige\r\n    const positionXYMenu = {\r\n        top:\r\n            sideMenuContext.y + 80 > globalThis.innerHeight\r\n                ? `${sideMenuContext.y - 200}px`\r\n                : `${sideMenuContext.y}px`,\r\n        left: `${sideMenuContext.x}px`,\r\n    };\r\n\r\n    const closeMenu = () => {\r\n        dispatch(CloseSideContextMenuAction());\r\n    };\r\n\r\n    const handleClickChangeName = () => {\r\n        dispatch(EditingImageName({ id: sideMenuContext.id }));\r\n        closeMenu();\r\n    };\r\n\r\n    const handleClickDelete = () => {\r\n        const image = document.querySelector('#id_' + sideMenuContext.id) as HTMLDivElement;\r\n        image.classList.add('zoomOut');\r\n        setTimeout(() => {\r\n            dispatch(DeleteImage({ id: sideMenuContext.id }));\r\n            props.onUpdateSize();\r\n        }, 400);\r\n        closeMenu();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={contextMenuClassName}\r\n            style={positionXYMenu}\r\n            onContextMenu={(e) => {\r\n                e.preventDefault();\r\n            }}\r\n        >\r\n            <div className=\"options\" onClick={handleClickChangeName}>\r\n                Change Name\r\n            </div>\r\n            <div className=\"options\" onClick={handleClickDelete}>\r\n                Delete image\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContextMenu;\r\n","import React from 'react';\r\nimport './ExportButton.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst ExportButton = (props: any) => {\r\n    const imagesFiles = useSelector((store: RootState) => store.imagesAtlas);\r\n    // const emit_click = useSelector((store: RootState) => (store.imagesAtlas.length != 0));\r\n    if (!isEmpty(imagesFiles)) {\r\n        Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\r\n    }\r\n\r\n    const handleClick = () => {\r\n        if (isEmpty(imagesFiles)) {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, 'Please import an image');\r\n        } else {\r\n            // Subimos el evento al padre para guardar la imagen.\r\n            props.handleClick();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <button\r\n            className={(isEmpty(imagesFiles) ? `save-export-disable` : `save-export`) + ` noselect`}\r\n            onClick={handleClick}\r\n        >\r\n            {props.title}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default ExportButton;\r\n","// Acá solo hay componentes de estilos para botones de la aplicación que devuelven un evento determinado\r\nimport React from 'react';\r\nimport { css } from 'glamor';\r\n\r\nconst button_styles = css({\r\n    color: 'var(--main-light)',\r\n    border: '1px solid var(--main-light)',\r\n    borderRadius: '4px',\r\n    lineHeight: '21px',\r\n    fontSize: '1.3rem',\r\n    minWidth: '25px',\r\n    height: '25px',\r\n    textAlign: 'center',\r\n    cursor: 'pointer',\r\n    ':hover': {\r\n        color: 'var(--main-primary)',\r\n        border: '1px solid var(--main-primary)'\r\n    },\r\n    ':active': {\r\n        color:'var(--main-light)',\r\n        border: '1px solid var(--main-light)'\r\n    }\r\n});\r\n\r\nexport const AddButton = (props) => {\r\n    const text_button = (props.children !== undefined) ? props.children : '+';\r\n    return ( \r\n        <div className={`${button_styles} noselect ${props.className}`} onClick={props.onClick}>\r\n            {text_button}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setZoomAction } from '../../../../Redux/Actions/Atlas/zoom.action';\r\n\r\nimport './Zoom.style.scss';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { AddButton } from '../../../AnimationTool/components/buttons/Buttons';\r\n\r\nconst Zoom = () => {\r\n    const zoomPercent: number = useSelector((state: RootState) => state.zoomAtlas.value);\r\n    const dispatch = useDispatch();\r\n\r\n    const minZoom = 20;\r\n    const maxZoom = 500;\r\n    const zoomStep = 10;\r\n\r\n    const handleInputZoom = (percentInput: number) => {\r\n        const numberPercent: number = Math.round(percentInput);\r\n        const finalZoom: number =\r\n            numberPercent <= minZoom ? minZoom : numberPercent >= maxZoom ? maxZoom : numberPercent;\r\n        dispatch(setZoomAction({ value: finalZoom }));\r\n    };\r\n\r\n    Observer.emit(GLOBAL_EVENT.ZOOM_CHANGED, zoomPercent);\r\n\r\n    return (\r\n        <div className=\"zoom-tools\">\r\n            <input\r\n                type=\"number\"\r\n                onChange={(event) => handleInputZoom(Number(event.target.value))}\r\n                value={zoomPercent}\r\n            />\r\n            <span className=\"noselect\">%</span>\r\n            <div className=\"btns-container\">\r\n                <AddButton className=\"ml-2\" onClick={() => handleInputZoom(100)}>\r\n                    <span className=\"px-2\" style={{ fontSize: '1rem' }}>\r\n                        Reset\r\n                    </span>\r\n                </AddButton>\r\n                <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent - zoomStep)}>\r\n                    -\r\n                </AddButton>\r\n                <AddButton className=\"ml-1\" onClick={() => handleInputZoom(zoomPercent + zoomStep)}>\r\n                    +\r\n                </AddButton>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Zoom;\r\n","import React from 'react';\r\nimport './Algorithm.scss';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n    actionAlgorithmPanel,\r\n    payloadAlgorithmPanel,\r\n} from '../../../../Redux/Actions/Atlas/algorithmPanel.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nconst Algorithm = () => {\r\n    const algorithmPanel: payloadAlgorithmPanel = useSelector(\r\n        (state: RootState) => state.algorithmPanelAtlas\r\n    );\r\n    const dispatch = useDispatch();\r\n    const type = ['maxrect', 'tool'];\r\n    return (\r\n        <div className=\"algorithm-tab-container\">\r\n            <h3 className=\"noselect\">Algorithm</h3>\r\n            <div className=\"algorithm-tab-container--inputs\">\r\n                <span className=\"noselect\">Type</span>\r\n                <select\r\n                    value={algorithmPanel.type}\r\n                    onChange={(event) =>\r\n                        dispatch(\r\n                            actionAlgorithmPanel({ ...algorithmPanel, type: event.target.value })\r\n                        )\r\n                    }\r\n                >\r\n                    <option value={type[0]}>MaxRect</option>\r\n                    <option value={type[1]}>Tool</option>\r\n                </select>\r\n            </div>\r\n            {algorithmPanel.type === type[0] ? (\r\n                <div>\r\n                    <div className=\"algorithm-tab-container--inputs\">\r\n                        <span className=\"noselect\">Width (px)</span>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={algorithmPanel.width}\r\n                            onChange={(event) =>\r\n                                dispatch(\r\n                                    actionAlgorithmPanel({\r\n                                        ...algorithmPanel,\r\n                                        width: Math.round(Number(event.target.value)),\r\n                                    })\r\n                                )\r\n                            }\r\n                            min={0}\r\n                            max={2000}\r\n                        />\r\n                    </div>\r\n                    <div className=\"algorithm-tab-container--inputs\">\r\n                        <span className=\"noselect\">Height (px)</span>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={algorithmPanel.height}\r\n                            onChange={(event) =>\r\n                                dispatch(\r\n                                    actionAlgorithmPanel({\r\n                                        ...algorithmPanel,\r\n                                        height: Math.round(Number(event.target.value)),\r\n                                    })\r\n                                )\r\n                            }\r\n                            min={0}\r\n                            max={2000}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"algorithm-tab-container--inputs\">\r\n                    <span className=\"noselect\">Size (row)</span>\r\n                    <input\r\n                        type=\"number\"\r\n                        value={algorithmPanel.size}\r\n                        onChange={(event) =>\r\n                            dispatch(\r\n                                actionAlgorithmPanel({\r\n                                    ...algorithmPanel,\r\n                                    size: Math.round(Number(event.target.value)),\r\n                                })\r\n                            )\r\n                        }\r\n                        min={1}\r\n                        max={100}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"algorithm-tab-container--inputs\">\r\n                <span className=\"noselect\">Extrusion (px)</span>\r\n                <input\r\n                    type=\"number\"\r\n                    value={algorithmPanel.extrusion}\r\n                    onChange={(event) =>\r\n                        dispatch(\r\n                            actionAlgorithmPanel({\r\n                                ...algorithmPanel,\r\n                                extrusion: Math.round(Number(event.target.value)),\r\n                            })\r\n                        )\r\n                    }\r\n                    min={0}\r\n                    max={10}\r\n                />\r\n            </div>\r\n            {algorithmPanel.type === type[0] && (\r\n                <div className=\"algorithm-tab-container--inputs\">\r\n                    <span className=\"noselect\">Separation (px)</span>\r\n                    <input\r\n                        type=\"number\"\r\n                        value={algorithmPanel.separation}\r\n                        onChange={(event) =>\r\n                            dispatch(\r\n                                actionAlgorithmPanel({\r\n                                    ...algorithmPanel,\r\n                                    separation: Math.round(Number(event.target.value)),\r\n                                })\r\n                            )\r\n                        }\r\n                        min={0}\r\n                        max={10}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Algorithm;\r\n","/** Used by atlas packer */\r\nconst b64toBlob = (b64DataIn: string, contentType = 'image/png', sliceSize = 512) => {\r\n    const b64Data = b64DataIn.replace(/^data:(\\w*\\/\\w*;)base64,/, '');\r\n    contentType = contentType || '';\r\n    sliceSize = sliceSize || 512;\r\n\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n\r\n        byteArrays.push(byteArray);\r\n    }\r\n\r\n    const blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n};\r\n\r\nexport default b64toBlob;\r\n","import * as Phaser from 'phaser';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport b64toBlob from '../../../../utils/b64toBlob';\r\nimport { symmetricDifference, forEach } from 'ramda';\r\nimport store from '../../../../Redux/Store/store';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { SelectImage } from '../../../../Redux/Actions/Atlas/images.action';\r\n\r\ninterface extrusion_object_interface {\r\n    key: string;\r\n    pixels: Array<Phaser.GameObjects.Rectangle>;\r\n}\r\n\r\nclass RenderScene extends Phaser.Scene {\r\n    // Grupo de imagenes que se van creando con this.add.image\r\n    images_group: { key: string; image: any }[] = [];\r\n\r\n    // Grupo de extrusión\r\n    extrusion_objects: Array<extrusion_object_interface> = [];\r\n\r\n    // Grupos de imagenes para comprobar si se agregan o no y si se eliminan\r\n    temp_images_key: string[] = [];\r\n    new_images: string[] = [];\r\n\r\n    // Imagen seleccionada\r\n    graphics: any;\r\n\r\n    constructor() {\r\n        super({\r\n            key: 'RenderScene',\r\n        });\r\n\r\n        Observer.removeListener(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS);\r\n        Observer.removeListener(GLOBAL_EVENT.ZOOM_CHANGED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_CHARGED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE);\r\n        Observer.removeListener(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_DES_SELECTED);\r\n        Observer.removeListener(GLOBAL_EVENT.IMAGE_SELECTED);\r\n    }\r\n    init() {\r\n        this.graphics = this.add\r\n            .graphics({ lineStyle: { width: 2, color: 0xff0000 }, fillStyle: { color: 0xaa0000 } })\r\n            .setDepth(200);\r\n\r\n        this.tweens.add({\r\n            targets: this.graphics,\r\n            // ease: (e: number) => (Math.floor(e) === 0),\r\n            alpha: 0,\r\n            ease: (e: number) => Math.round(e),\r\n            yoyo: true,\r\n            repeat: -1,\r\n            duration: 1000,\r\n        });\r\n\r\n        // Obtenemos los datos de la imagen del CANVAS\r\n        Observer.on(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS, (options: any) => {\r\n            this.scale.resize(this.scale.width * options.scale, this.scale.height * options.scale);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n\r\n            // Obtenemos la imagen escalada\r\n            this.images_group.forEach((image_group: { key: string; image: any }) => {\r\n                image_group.image.setScale(options.scale);\r\n                image_group.image.x *= options.scale;\r\n                image_group.image.y *= options.scale;\r\n            });\r\n            this.extrusion_objects.forEach((extrusion_object: extrusion_object_interface) => {\r\n                extrusion_object.pixels.forEach((pixel: Phaser.GameObjects.Rectangle) => {\r\n                    pixel.setScale(options.scale);\r\n                    pixel.x *= options.scale;\r\n                    pixel.y *= options.scale;\r\n                });\r\n            });\r\n\r\n            this.game.renderer.snapshot((image: any) => {\r\n                const src = image.src;\r\n                this.scale.resize(\r\n                    this.scale.width / options.scale,\r\n                    this.scale.height / options.scale\r\n                );\r\n                this.scale.refresh();\r\n                this.scale.updateScale();\r\n\r\n                // Reiniciamos el escalado\r\n                this.images_group.forEach((image_group: { key: string; image: any }) => {\r\n                    image_group.image.setScale(1);\r\n                    image_group.image.x /= options.scale;\r\n                    image_group.image.y /= options.scale;\r\n                });\r\n                this.extrusion_objects.forEach((extrusion_object: extrusion_object_interface) => {\r\n                    extrusion_object.pixels.forEach((pixel: Phaser.GameObjects.Rectangle) => {\r\n                        pixel.setScale(1);\r\n                        pixel.x /= options.scale;\r\n                        pixel.y /= options.scale;\r\n                    });\r\n                });\r\n\r\n                this.game.renderer.snapshot((image: any) => {\r\n                    // Todo está listo y se emite el evento IMAGE_CANVAS_EXPORTED\r\n                    const src_original = image.src;\r\n                    const data = { ...options, src_original, src };\r\n                    Observer.emit(GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED, data);\r\n                });\r\n            });\r\n        });\r\n\r\n        // El Zoom visual\r\n        Observer.on(GLOBAL_EVENT.ZOOM_CHANGED, (zoom_size) => {\r\n            this.scale.setZoom(zoom_size);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n        });\r\n    }\r\n\r\n    preload(): void {\r\n        // #------------- Cargamos imágenes\r\n        Observer.on(GLOBAL_EVENT.IMAGE_CHARGED, (images) => {\r\n            this.temp_images_key = [];\r\n            this.new_images = [];\r\n            this.textures.each((textures) => {\r\n                const textures_key = textures.key;\r\n                if (\r\n                    textures_key !== '__DEFAULT' &&\r\n                    textures_key !== '__MISSING' &&\r\n                    !textures_key.startsWith('map')\r\n                ) {\r\n                    this.temp_images_key.push(textures_key);\r\n                }\r\n            }, this);\r\n\r\n            this.new_images = images.map((image: any) => {\r\n                this.load.image(image.id, URL.createObjectURL(b64toBlob(image.src)));\r\n                return image.id;\r\n            });\r\n\r\n            this.load.start();\r\n        });\r\n    }\r\n\r\n    create() {\r\n        Observer.on(GLOBAL_EVENT.IMAGE_CHARGED_COMPLETE, (MaxRectGrid: any) => {\r\n            const different = symmetricDifference(this.new_images, this.temp_images_key);\r\n            if (this.new_images.length < this.temp_images_key.length) {\r\n                this.removeTextures(different[0]);\r\n            } else {\r\n                // Acá agregamos solo las imagenes nuevas\r\n                different.forEach((new_image: string) => {\r\n                    const image = this.add\r\n                        .image(0, 0, new_image)\r\n                        .setOrigin(0, 0)\r\n                        .setName(new_image)\r\n                        .setInteractive({ cursor: 'pointer' });\r\n\r\n                    image.on(\r\n                        Phaser.Input.Events.POINTER_DOWN,\r\n                        (event_mouse: any) => {\r\n                            if (event_mouse.buttons === 1) {\r\n                                this.select_a_image(image.name);\r\n                            } else {\r\n                                this.activate_context_menu(event_mouse, image);\r\n                            }\r\n                        },\r\n                        this\r\n                    );\r\n\r\n                    this.images_group.push({\r\n                        key: new_image,\r\n                        image,\r\n                    });\r\n                });\r\n            }\r\n            if (MaxRectGrid !== undefined) {\r\n                this.scale.setGameSize(MaxRectGrid.width, MaxRectGrid.height);\r\n                this.scale.resize(MaxRectGrid.width, MaxRectGrid.height);\r\n                this.scale.refresh();\r\n                this.scale.updateScale();\r\n\r\n                MaxRectGrid.rects.forEach((rect: any) => {\r\n                    const image = this.images_group.find((image) => image.key === rect.data.id);\r\n                    if (image !== undefined) {\r\n                        image.image.x = rect.x;\r\n                        image.image.y = rect.y;\r\n                    }\r\n                });\r\n            }\r\n            this.createExtrusion();\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMAGE_DES_SELECTED, () => {\r\n            this.reset_images_selected();\r\n        });\r\n        Observer.on(GLOBAL_EVENT.IMAGE_SELECTED, (id) => {\r\n            this.select_a_image(id);\r\n        });\r\n    }\r\n\r\n    activate_context_menu(event_mouse: any, image: any) {\r\n        if (event_mouse.button === 2) {\r\n            const x = event_mouse.event.clientX;\r\n            const y = event_mouse.event.clientY;\r\n            store.dispatch(\r\n                ActivateSideContextMenuAction({\r\n                    x,\r\n                    y,\r\n                    id: image.name,\r\n                    active: true,\r\n                })\r\n            );\r\n            this.select_a_image(image.name);\r\n        }\r\n    }\r\n\r\n    select_a_image(id: string) {\r\n        const image = this.images_group.find((image: any) => image.key === id)?.image;\r\n        setTimeout(() => {\r\n            this.create_image_selected({\r\n                x: image.x,\r\n                y: image.y,\r\n                width: image.width,\r\n                height: image.height,\r\n            });\r\n            // TODO: Debido a que se deshabilita la seleccion de imagen debido al click estarior he puesto este tiempo\r\n            // Debería analizarse para futuras versiones\r\n            store.dispatch(SelectImage({ id: image.name }));\r\n        }, 100);\r\n    }\r\n\r\n    create_image_selected({ x = 10, y = 10, width = 100, height = 100 }) {\r\n        this.reset_images_selected();\r\n        const rect = new Phaser.Geom.Rectangle(x, y, width, height);\r\n        this.graphics.strokeRectShape(rect);\r\n    }\r\n\r\n    reset_images_selected() {\r\n        this.graphics.clear();\r\n    }\r\n\r\n    createExtrusion() {\r\n        this.removeExtrusion();\r\n        const extrusion_size = store.getState().algorithmPanelAtlas.extrusion;\r\n\r\n        if (extrusion_size > 0 && this.images_group.length > 0) {\r\n            this.images_group.forEach((image) => {\r\n                const texture = this.textures.get(image.key);\r\n                const src = texture.getSourceImage();\r\n                const canvas = this.textures\r\n                    .createCanvas(`map_${image.key}`, src.width, src.height)\r\n                    .draw(0, 0, src as HTMLImageElement);\r\n                const pixel = new Phaser.Display.Color();\r\n                // Extrusión\r\n                const extrusion_objects_temp: extrusion_object_interface = {\r\n                    key: image.key,\r\n                    pixels: [],\r\n                };\r\n\r\n                for (let y = 0; y < src.height; y++) {\r\n                    for (let x = 0; x < src.width; x++) {\r\n                        // Arriba y abajo\r\n                        canvas.getPixel(x, y, pixel);\r\n                        if (\r\n                            (x === 0 || y === 0 || x === src.width - 1 || y === src.height - 1) &&\r\n                            !!pixel.alpha\r\n                        ) {\r\n                            const positionX =\r\n                                x === 0\r\n                                    ? x + image.image.x - extrusion_size\r\n                                    : x + image.image.x + 1;\r\n                            const positionY =\r\n                                y === 0\r\n                                    ? y + image.image.y - extrusion_size\r\n                                    : y + image.image.y + 1;\r\n\r\n                            // Izquierda y derecha\r\n                            if (x === 0 || x === src.width - 1) {\r\n                                const pixel_extruded = this.add\r\n                                    .rectangle(\r\n                                        positionX,\r\n                                        y + image.image.y,\r\n                                        extrusion_size,\r\n                                        1,\r\n                                        pixel.color\r\n                                    )\r\n                                    .setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n\r\n                            // Arriba y abajo\r\n                            if (y === src.height - 1 || y === 0) {\r\n                                const pixel_extruded = this.add\r\n                                    .rectangle(\r\n                                        x + image.image.x,\r\n                                        positionY,\r\n                                        1,\r\n                                        extrusion_size,\r\n                                        pixel.color\r\n                                    )\r\n                                    .setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n                            // Esquinas\r\n                            if (\r\n                                (x === 0 && y === 0) ||\r\n                                (x === src.width - 1 && y === src.height - 1) ||\r\n                                (x === src.width - 1 && y === 0) ||\r\n                                (x === 0 && y === src.height - 1)\r\n                            ) {\r\n                                const pixel_extruded = this.add\r\n                                    .rectangle(\r\n                                        positionX,\r\n                                        positionY,\r\n                                        extrusion_size,\r\n                                        extrusion_size,\r\n                                        pixel.color\r\n                                    )\r\n                                    .setOrigin(0);\r\n                                extrusion_objects_temp.pixels.push(pixel_extruded);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this.extrusion_objects.push(extrusion_objects_temp);\r\n            });\r\n        }\r\n    }\r\n\r\n    removeExtrusion() {\r\n        forEach((extrusion_object) => {\r\n            forEach((pixel) => {\r\n                pixel.destroy();\r\n            }, extrusion_object.pixels);\r\n            if (this.textures.get(`map_${extrusion_object.key}`).key !== '__MISSING') {\r\n                this.textures.remove(`map_${extrusion_object.key}`);\r\n            }\r\n        }, this.extrusion_objects);\r\n        this.extrusion_objects = [];\r\n    }\r\n\r\n    removeTextures(textureName: string) {\r\n        // Buscamos la imágen que se va a remover\r\n        const image_to_destroy = this.images_group.find((image: any) => image.key === textureName);\r\n\r\n        if (image_to_destroy !== undefined) {\r\n            image_to_destroy.image.destroy(textureName);\r\n        }\r\n\r\n        this.textures.remove(textureName);\r\n        // Eliminamos la textura que se ha removido\r\n        this.images_group = this.images_group.filter((image: any) => image.key !== textureName);\r\n    }\r\n}\r\n\r\nexport default RenderScene;\r\n","const prepareJSON = (data: any) => {\r\n    return data.map((obj: any) => {\r\n        return {\r\n            width: obj.width,\r\n            height: obj.height,\r\n            data: {\r\n                id: obj.id,\r\n                name: obj.name,\r\n                // src: obj.src,\r\n                origin: obj.origin,\r\n            },\r\n        };\r\n    });\r\n};\r\nexport default prepareJSON;\r\n","export class MaxRectTool {\r\n    spritePerRow: number = 0;\r\n    extrusion: number = 0;\r\n    MaxRect: any;\r\n    bins: Array<any> = [];\r\n    constructor(spritePerRow = 3, extrusion = 0) {\r\n        this.spritePerRow = spritePerRow;\r\n        this.extrusion = extrusion;\r\n        this.MaxRect = {\r\n            width: 0,\r\n            height: 0,\r\n            padding: 0,\r\n            rects: [],\r\n        };\r\n    }\r\n\r\n    addArray(json: any) {\r\n        const yGrid = Math.ceil(json.length / this.spritePerRow);\r\n\r\n        const rects = [];\r\n        // Nos ayuda a hacer el salto en Y para poder obtener el tamaño máximo del lienzo\r\n        let yJump = false;\r\n        // Nos ayudará a obtener las filas limite\r\n        const maxHeight = [-1];\r\n\r\n        for (let y = 0; y < yGrid; y++) {\r\n            yJump = false;\r\n            maxHeight[y] = 0;\r\n            for (let x = 0; x < this.spritePerRow; x++) {\r\n                if (json[y * this.spritePerRow + x] !== undefined) {\r\n                    const jsonOutput: any = {\r\n                        x:\r\n                            rects[y * this.spritePerRow + (x - 1)] !== undefined && yJump\r\n                                ? rects[y * this.spritePerRow + (x - 1)].x +\r\n                                  rects[y * this.spritePerRow + (x - 1)].width +\r\n                                  this.extrusion * 2\r\n                                : this.extrusion,\r\n                        y:\r\n                            rects[(y - 1) * this.spritePerRow + x] !== undefined\r\n                                ? maxHeight[y - 1] === undefined\r\n                                    ? 0\r\n                                    : maxHeight[y - 1] + this.extrusion * 2\r\n                                : this.extrusion,\r\n                        width: json[y * this.spritePerRow + x].width,\r\n                        height: json[y * this.spritePerRow + x].height,\r\n                        data: json[y * this.spritePerRow + x].data,\r\n                    };\r\n                    yJump = true;\r\n                    rects.push(jsonOutput);\r\n                    // Obtener el height máximo y el width máximo\r\n                    if (yJump) {\r\n                        if (\r\n                            this.MaxRect.width <\r\n                            rects[y * this.spritePerRow + x].x +\r\n                                rects[y * this.spritePerRow + x].width\r\n                        ) {\r\n                            this.MaxRect.width =\r\n                                rects[y * this.spritePerRow + x].x +\r\n                                rects[y * this.spritePerRow + x].width +\r\n                                this.extrusion;\r\n                        }\r\n                        if (\r\n                            this.MaxRect.height <\r\n                            rects[y * this.spritePerRow + x].y +\r\n                                rects[y * this.spritePerRow + x].height\r\n                        ) {\r\n                            this.MaxRect.height =\r\n                                rects[y * this.spritePerRow + x].y +\r\n                                rects[y * this.spritePerRow + x].height +\r\n                                this.extrusion;\r\n                        }\r\n\r\n                        if (\r\n                            maxHeight[y] <\r\n                            rects[y * this.spritePerRow + x].y +\r\n                                rects[y * this.spritePerRow + x].height\r\n                        ) {\r\n                            maxHeight[y] =\r\n                                rects[y * this.spritePerRow + x].y +\r\n                                rects[y * this.spritePerRow + x].height;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.MaxRect.rects = rects;\r\n        this.bins = [this.MaxRect];\r\n    }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport Modal from 'react-responsive-modal';\r\nimport './ExportModal.scss';\r\nimport clearName from '../../../../../utils/clearNames';\r\nimport { isEmpty } from 'ramda';\r\nimport { Observer, GLOBAL_EVENT } from '../../../Observer';\r\n\r\ninterface stateInterface {\r\n    open: boolean;\r\n    form: { name: string; scale: number; type: string };\r\n}\r\n\r\nexport class ExportModal extends PureComponent<{}, stateInterface> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            form: { name: 'default_name', scale: 1, type: 'export' },\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(GLOBAL_EVENT.OPEN_EXPORT_OPTIONS_PC, () => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true,\r\n            });\r\n        });\r\n    }\r\n\r\n    handleName = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            ...this.state,\r\n            form: {\r\n                ...this.state.form,\r\n                name: clearName(event.target.value),\r\n            },\r\n        });\r\n    };\r\n\r\n    handleScale = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (this.state.form.scale > 10) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: 10,\r\n                },\r\n            });\r\n        } else if (this.state.form.scale < -10) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: -10,\r\n                },\r\n            });\r\n        } else {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    scale: Number(event.target.value),\r\n                },\r\n            });\r\n        }\r\n    };\r\n\r\n    handleClickOk = () => {\r\n        Observer.emit(GLOBAL_EVENT.IMAGE_DES_SELECTED);\r\n        if (isEmpty(this.state.form.name)) {\r\n            this.setState({\r\n                ...this.state,\r\n                form: {\r\n                    ...this.state.form,\r\n                    name: 'default_name',\r\n                },\r\n            });\r\n        } else {\r\n            // Emitimos el evento para requerir la imágen de canvas.\r\n            // Cuando todo está listo el ./render/RenderScene.ts emite el evento de GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED\r\n            Observer.emit(GLOBAL_EVENT.REQUEST_IMAGE_CANVAS, this.state.form);\r\n            this.handleCloseModal();\r\n        }\r\n    };\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                open={this.state.open}\r\n                onClose={this.handleCloseModal}\r\n                closeOnOverlayClick={false}\r\n                center\r\n                classNames={{ outline: '10px solid red' }}\r\n                styles={{ marginTop: '1000px' }}\r\n            >\r\n                <div id=\"export-container\">\r\n                    <h3 className=\"noselect\">Export options</h3>\r\n                    <div className=\"noselect export-container--group\">\r\n                        <div className=\"atlasNameForm\">\r\n                            <label htmlFor=\"atlasName\">Atlas Name:</label>\r\n                            <br />\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"atlasName\"\r\n                                onChange={this.handleName}\r\n                                onBlur={this.handleName}\r\n                                value={this.state.form.name}\r\n                            />\r\n                        </div>\r\n                        <div className=\"atlasScaleForm\">\r\n                            <label htmlFor=\"atlasName\">Atlas scale:</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                id=\"atlasScale\"\r\n                                min={1}\r\n                                max={10}\r\n                                onChange={this.handleScale}\r\n                                onBlur={this.handleScale}\r\n                                value={this.state.form.scale}\r\n                            />\r\n                        </div>\r\n                        <div className=\"exportButtonsForm\">\r\n                            <button onClick={this.handleCloseModal}>Cancel</button>\r\n                            <button onClick={this.handleClickOk}>Ok</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ExportModal;\r\n","import store from '../Redux/Store/store';\r\nimport clearName from './clearNames';\r\n\r\n/**\r\n * Esta funcion nos ayuda para crear nuestro json para el atlas packer\r\n */\r\nconst createAtlasJSON = (scale: number) => {\r\n    const MaxRectData = store.getState().maxrectAtlas;\r\n    const atlasJSON = {\r\n        frames: MaxRectData.map((sprite_data) => {\r\n            return {\r\n                filename: clearName(sprite_data.data.name),\r\n                frame: {\r\n                    w: sprite_data.width * scale,\r\n                    h: sprite_data.height * scale,\r\n                    x: sprite_data.x * scale,\r\n                    y: sprite_data.y * scale,\r\n                },\r\n                anchor: {\r\n                    x: sprite_data.data.origin.x,\r\n                    y: sprite_data.data.origin.y,\r\n                },\r\n            };\r\n        }),\r\n        meta: {\r\n            description: 'Atlas generado con Atlas Packer Gamma V2',\r\n            web: 'https://gammafp.github.io/atlas-packer-phaser/',\r\n        },\r\n    };\r\n    return JSON.stringify(atlasJSON, null, '    ');\r\n};\r\n\r\nexport default createAtlasJSON;\r\n","import * as JSZIP from 'jszip';\nimport { ImageCanvasData } from '../Views/AtlasPacker/Observer';\nimport createAtlasJSON from './createAtlasJSON';\nimport store from '../Redux/Store/store';\n\nconst createExportZipAtlas = (data: ImageCanvasData) => {\n    const images = store.getState().imagesAtlas;\n\n    const atlas_original = createAtlasJSON(1);\n    const atlas_scaled = createAtlasJSON(data.scale);\n\n    const JSZip = require('jszip');\n\n    const zip: JSZIP = new JSZip();\n\n    zip.file(`${data.name}.png`, data.src.replace('data:image/png;base64,', ''), { base64: true });\n    zip.file(`${data.name}_atlas.json`, atlas_scaled);\n\n    const folder_unpack = zip.folder('unpack');\n    images.map((image: any) => {\n        folder_unpack.file(`${image.name}.png`, image.src.replace('data:image/png;base64,', ''), {\n            base64: true,\n        });\n    });\n\n    const folder_original = zip.folder('original');\n    folder_original.file(\n        `${data.name}.png`,\n        data.src_original.replace('data:image/png;base64,', ''),\n        { base64: true }\n    );\n    folder_original.file(`${data.name}_atlas.json`, atlas_original);\n    return zip;\n};\n\nexport default createExportZipAtlas;\n","import * as Phaser from 'phaser';\nimport b64toBlob from '../../../../../../utils/b64toBlob';\nimport { Observer, GLOBAL_EVENT } from '../../../../Observer';\nimport generateId from '../../../../../../utils/generateId';\nimport store from '../../../../../../Redux/Store/store';\nimport { AddImage, ImageData } from '../../../../../../Redux/Actions/Atlas/images.action';\n\n// TODO: Mandar calculateGrid a utils/\nconst calculateGrid = (\n    grid_options: { width: number; height: number; space: number },\n    canvas: { width: number; height: number }\n) => {\n    let actual_position = {\n        x: Math.floor(canvas.width / grid_options.width),\n        y: Math.floor(canvas.height / grid_options.height),\n    };\n    if (grid_options.space > 1) {\n        const x = Math.floor(\n            canvas.width /\n                (((actual_position.x + 1) * grid_options.space) / actual_position.x +\n                    grid_options.width)\n        );\n        const y = Math.floor(\n            canvas.height /\n                (((actual_position.y + 1) * grid_options.space) / actual_position.y +\n                    grid_options.height)\n        );\n        actual_position = { x, y };\n    }\n    return actual_position;\n};\n\nclass ImportAtlasRenderScene extends Phaser.Scene {\n    // Nos ayuda a obtener el tamaño original\n    canvas_size = {\n        width: 0,\n        height: 0,\n    };\n\n    name: string = 'imagen_defecto';\n    // Sistema de grid\n    graphics: any;\n    lineStrike = 2;\n    grid_width = 10;\n    grid_height = 10;\n    space = 0;\n\n    zoom_scale = 1;\n    block: any;\n\n    constructor() {\n        super({ key: 'ImportAtlasRenderScene' });\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE);\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON);\n    }\n\n    init() {\n        this.graphics = this.add\n            .graphics({ lineStyle: { width: 2, color: 0xffffff }, fillStyle: { color: 0xaa0000 } })\n            .setDepth(200);\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE, (options) => {\n            if (options.width !== this.grid_width) {\n                this.grid_width = options.width;\n            }\n            if (options.height !== this.grid_height) {\n                this.grid_height = options.height;\n            }\n            if (options.separation !== this.space) {\n                this.space = options.separation;\n            }\n            if (options.zoom !== this.zoom_scale) {\n                this.zoom_scale = options.zoom / 100;\n                this.setZoom();\n            }\n            this.createGrid();\n        });\n\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON, () => {\n            this.cutSprites();\n        });\n\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_JSON, (atlas_json) => {\n            this.cutSprites(atlas_json);\n        });\n\n        // Evento interno para enviar el nombre\n        this.events.on('set_name', (name: string) => {\n            this.name = name;\n        });\n\n        this.load.once(Phaser.Loader.Events.COMPLETE, () => {\n            this.load_complete();\n        });\n    }\n\n    load_complete() {\n        this.block = this.add.image(0, 0, this.name).setScale(this.zoom_scale).setOrigin(0);\n\n        this.scale.setGameSize(\n            this.block.width * this.zoom_scale,\n            this.block.height * this.zoom_scale\n        );\n        this.canvas_size.width = this.block.width;\n        this.canvas_size.height = this.block.height;\n\n        this.createGrid();\n    }\n\n    resetZoom() {\n        this.block.setScale(1);\n        this.scale.setGameSize(this.canvas_size.width, this.canvas_size.height);\n    }\n\n    setZoom() {\n        this.block.setScale(this.zoom_scale);\n        this.scale.setGameSize(\n            this.block.width * this.zoom_scale,\n            this.block.height * this.zoom_scale\n        );\n        this.createGrid();\n    }\n\n    createGrid() {\n        const grid_width = this.grid_width * this.zoom_scale;\n        const grid_height = this.grid_height * this.zoom_scale;\n\n        const space = this.space * this.zoom_scale;\n        const grid = calculateGrid(\n            { width: this.grid_width, height: this.grid_height, space: this.space },\n            this.canvas_size\n        );\n        // Construimos el grid\n        this.graphics.clear();\n        this.graphics.lineStyle(this.lineStrike, 0xffffff);\n        for (let y = 0; y < grid.y; y++) {\n            for (let x = 0; x < grid.x; x++) {\n                const pos_x = x * grid_width + space * (x + 1);\n                const pos_y = y * grid_height + space * (y + 1);\n                const rect = new Phaser.Geom.Rectangle(pos_x, pos_y, grid_width, grid_height);\n\n                this.graphics.strokeRectShape(rect);\n            }\n        }\n    }\n\n    cutSprites(atlas_json = 'no_atlas') {\n        const grid = calculateGrid(\n            { width: this.grid_width, height: this.grid_height, space: this.space },\n            this.canvas_size\n        );\n\n        if (grid.x * grid.y > 1000 && atlas_json === 'no_atlas') {\n            // Esto no es un atlas\n            Observer.emit(\n                GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING,\n                `The limit of frames is 1000 you are superate it in ${\n                    grid.x * grid.y\n                } (width * height),  reduce it.`\n            );\n        } else {\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\n            this.graphics.clear();\n            // Acá recibimos la data de la imagen\n            this.load.once(Phaser.Loader.Events.COMPLETE, () => {\n                const texturesKeys = Object.keys(\n                    this.textures.get(`${this.name}_spritesheet`).frames\n                ).filter((key: string) => key !== '__BASE');\n                const ImagesData: ImageData[] = texturesKeys.map(\n                    (key: any, i: number): ImageData => {\n                        const frame = this.textures.getFrame(`${this.name}_spritesheet`, key);\n                        const src_b64 = this.textures.getBase64(`${this.name}_spritesheet`, key);\n                        return {\n                            id: generateId(),\n                            name: atlas_json === 'no_atlas' ? `${this.name}_${i}` : frame.name,\n                            width: frame.width,\n                            height: frame.height,\n                            size: 0,\n                            active: false,\n                            changeName: false,\n                            src: src_b64,\n                            origin: {\n                                x: 0.5,\n                                y: 0.5,\n                            },\n                        };\n                    }\n                );\n\n                Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT);\n                store.dispatch(AddImage(ImagesData));\n            });\n\n            this.resetZoom();\n            this.graphics.setDepth(-1);\n\n            // Se monta la imagen y más arriba se recibe esta imagen\n            this.game.renderer.snapshot((image: any) => {\n                if (atlas_json !== 'no_atlas') {\n                    this.load.atlas(\n                        `${this.name}_spritesheet`,\n                        URL.createObjectURL(b64toBlob(image.src)),\n                        JSON.parse(atlas_json)\n                    );\n                } else {\n                    this.load.spritesheet(\n                        `${this.name}_spritesheet`,\n                        URL.createObjectURL(b64toBlob(image.src)),\n                        {\n                            frameWidth: this.grid_width,\n                            frameHeight: this.grid_height,\n                            margin: this.space,\n                            spacing: this.space,\n                        }\n                    );\n                }\n                this.load.start();\n            });\n        }\n    }\n}\n\nexport default ImportAtlasRenderScene;\n","import React, { PureComponent } from 'react';\r\n\r\n// Componentes\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport ImportAtlasRenderScene from './ImportAtlasRenderScene';\r\n\r\nimport './ImportAtlasRender.scss';\r\nimport { Observer, GLOBAL_EVENT } from '../../../../Observer';\r\nimport b64toBlob from '../../../../../../utils/b64toBlob';\r\nimport { ImageData } from '../../../../../../Redux/Actions/Atlas/images.action';\r\n\r\ninterface stateInterface {\r\n    open: boolean;\r\n}\r\n\r\nlet _scrollBarRefAtlas: any = null;\r\n\r\nexport class ImportAtlasRender extends PureComponent<{}, stateInterface> {\r\n    game: any;\r\n    componentDidMount() {\r\n        _scrollBarRefAtlas.updateScroll();\r\n        Observer.removeListener(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE);\r\n        Observer.on(\r\n            GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE,\r\n            (images: Required<ImageData>[]) => {\r\n                this.game = new Phaser.Game({\r\n                    width: 0,\r\n                    height: 0,\r\n                    parent: 'render-atlas-import',\r\n                    type: Phaser.CANVAS,\r\n                    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n                    banner: {\r\n                        hidePhaser: true,\r\n                    },\r\n                    audio: {\r\n                        noAudio: true,\r\n                    },\r\n                    render: {\r\n                        pixelArt: true,\r\n                    },\r\n                    scene: [ImportAtlasRenderScene],\r\n                });\r\n\r\n                /**\r\n                 * Se espera que la escena esté cargada\r\n                 * Una vez esté cargada se obtiene la escena\r\n                 * Envíamos el evento para setear el nombre que usaremos internamente durante el proceso de cortado\r\n                 * Cargamos la imagen e iniciamos el load con start()\r\n                 */\r\n                this.game.registry.events.on(Phaser.Scenes.Events.READY, () => {\r\n                    const scene = (this.game as Phaser.Game).scene.getScene(\r\n                        'ImportAtlasRenderScene'\r\n                    );\r\n                    scene.events.emit('set_name', images[0].name);\r\n                    scene.load.image(images[0].name, URL.createObjectURL(b64toBlob(images[0].src)));\r\n                    scene.load.start();\r\n                });\r\n            }\r\n        );\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT, () => {\r\n            this.game.destroy(true);\r\n        });\r\n    }\r\n\r\n    handleDrag(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        if (!!event.buttons) {\r\n            const scroll = document.querySelector('.scrollContainerAtlas') as HTMLDivElement;\r\n            scroll.scrollLeft = scroll.scrollLeft - event.movementX;\r\n            scroll.scrollTop = scroll.scrollTop - event.movementY;\r\n            _scrollBarRefAtlas.updateScroll();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lienzo-render\">\r\n                <PerfectScrollbar\r\n                    className=\"scrollContainerAtlas\"\r\n                    ref={(ref) => {\r\n                        _scrollBarRefAtlas = ref;\r\n                    }}\r\n                >\r\n                    <div id=\"render-atlas-import\" onMouseMove={this.handleDrag}></div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImportAtlasRender;\r\n","const getFilesText = (files: any) => {\r\n    return new Promise((resolve) => {\r\n        const Files = Array.from(files);\r\n\r\n        Files.forEach((file: any): void => {\r\n            const reader = new FileReader();\r\n            reader.onload = (fileURL: any) => {\r\n                resolve(fileURL.target.result);\r\n            };\r\n            reader.readAsBinaryString(file);\r\n        });\r\n    });\r\n};\r\n\r\nexport default getFilesText;\r\n","/**\r\n * Nos ayuda a comprobar si es un atlas propio de Phaser\r\n */\r\nconst isPhaserAtlas = (data: string): boolean => {\r\n    let isAtlas = false;\r\n    try {\r\n        JSON.parse(data);\r\n        isAtlas = true;\r\n    } catch (error) {\r\n        isAtlas = false;\r\n    }\r\n\r\n    if (isAtlas) {\r\n        const have_frames = data.search('frames') !== -1;\r\n        const have_frame = data.search('frame') !== -1;\r\n        const have_filename = data.search('filename') !== -1;\r\n        if (!have_filename || !have_frame || !have_frames) {\r\n            isAtlas = false;\r\n        } else {\r\n            isAtlas = true;\r\n        }\r\n    }\r\n    return isAtlas;\r\n};\r\n\r\nexport default isPhaserAtlas;\r\n","import React, { PureComponent, createRef } from 'react';\r\nimport Modal from 'react-responsive-modal';\r\nimport './ImportAtlasModal.scss';\r\nimport { Observer, GLOBAL_EVENT } from '../../../Observer';\r\nimport ImportAtlasRender from './atlasRender/ImportAtlasRender';\r\nimport getFilesText from '../../../../../utils/getFilesText';\r\nimport isPhaserAtlas from '../../../../../utils/isPhaserAtlas';\r\n\r\n// Componentes\r\ninterface stateInterface {\r\n    open: boolean;\r\n    width: number;\r\n    height: number;\r\n    separation: number;\r\n    zoom: number;\r\n}\r\n\r\nclass ImportAtlas extends PureComponent<{}, stateInterface> {\r\n    canva_atlas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    zoom_step = 10;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            width: 10,\r\n            height: 10,\r\n            separation: 0,\r\n            zoom: 100,\r\n        };\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT, (image) => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true,\r\n            });\r\n            setTimeout(() => {\r\n                Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.OPEN_ATLAS_IMPORT_SEND_IMAGE, image);\r\n            }, 20);\r\n        });\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_ATLAS.CLOSE_ATLAS_IMPORT, () => {\r\n            this.handleCloseModal();\r\n        });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n        });\r\n    };\r\n\r\n    handleWheel(event: any) {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.state.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom > 20 && zoom <= 500) {\r\n                    value = Number((zoom - (this.zoom_step * event.deltaY) / 100).toPrecision(2));\r\n                    value = value < 20 ? (value = 2) : value > 500 ? (value = 500) : value;\r\n                }\r\n            }\r\n            this.sendState({\r\n                ...this.state,\r\n                zoom: value,\r\n            });\r\n\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    sendState(options: any) {\r\n        this.setState(options);\r\n        Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.CHANGE_IMPORT_ATLAS_STATE, options);\r\n    }\r\n\r\n    handleInputZoom = (parcentInput: number) => {\r\n        const minZoom = 20;\r\n        const maxZoom = 500;\r\n        const numberPercent: number = Math.round(parcentInput);\r\n        const finalZoom: number =\r\n            numberPercent <= minZoom ? minZoom : numberPercent >= maxZoom ? maxZoom : numberPercent;\r\n\r\n        this.sendState({\r\n            ...this.state,\r\n            zoom: finalZoom,\r\n        });\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (!!this.state.open) {\r\n            this.canva_atlas_container.current?.addEventListener('wheel', this.handleWheel, {\r\n                passive: false,\r\n            });\r\n        }\r\n    }\r\n\r\n    async handleImportAltas(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAtlas(files_loaded as string)) {\r\n            Observer.emit(GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_JSON, files_loaded);\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR);\r\n        } else {\r\n            Observer.emit(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, 'Atlas format incorrect');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                open={this.state.open}\r\n                onClose={this.handleCloseModal}\r\n                closeOnOverlayClick={false}\r\n                center\r\n                classNames={{ outline: '10px solid red' }}\r\n                styles={{ marginTop: '1000px' }}\r\n            >\r\n                <h3 className=\"noselect\">Import Atlas Options</h3>\r\n\r\n                <div className=\"noselect import-atlas-container\" ref={this.canva_atlas_container}>\r\n                    <div className=\"import-atlas-container--left\">\r\n                        <div className=\"canvas-atlas-container\">\r\n                            <ImportAtlasRender />\r\n                        </div>\r\n                        <div className=\"canvas-atlas-zoom\">\r\n                            <input\r\n                                type=\"number\"\r\n                                id=\"atlas-container-input--zoom\"\r\n                                value={this.state.zoom}\r\n                                onChange={(event) => {\r\n                                    this.handleInputZoom(Number(event.target.value));\r\n                                }}\r\n                            />{' '}\r\n                            %\r\n                            <span\r\n                                id=\"atlas-zoom-minus\"\r\n                                onClick={() => {\r\n                                    this.handleInputZoom(this.state.zoom - 10);\r\n                                }}\r\n                            >\r\n                                -\r\n                            </span>\r\n                            <span\r\n                                id=\"atlas-zoom-plus\"\r\n                                onClick={() => {\r\n                                    this.handleInputZoom(this.state.zoom + 10);\r\n                                }}\r\n                            >\r\n                                +\r\n                            </span>\r\n                            <span\r\n                                id=\"atlas-zoom-reset\"\r\n                                onClick={() => {\r\n                                    this.handleInputZoom(100);\r\n                                }}\r\n                            >\r\n                                Reset\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"import-atlas-container--right\">\r\n                        <div className=\"import-atlas--panel--container\">\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_width\">Width (px): </label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    id=\"atlas_width\"\r\n                                    min=\"1\"\r\n                                    value={this.state.width}\r\n                                    onChange={(event) => {\r\n                                        this.sendState({\r\n                                            ...this.state,\r\n                                            width:\r\n                                                Number(event.target.value) > 3\r\n                                                    ? Number(event.target.value)\r\n                                                    : 4,\r\n                                        });\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_height\">Height (px): </label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    id=\"atlas_height\"\r\n                                    min=\"1\"\r\n                                    value={this.state.height}\r\n                                    onChange={(event) => {\r\n                                        this.sendState({\r\n                                            ...this.state,\r\n                                            height:\r\n                                                Number(event.target.value) > 3\r\n                                                    ? Number(event.target.value)\r\n                                                    : 4,\r\n                                        });\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <div className=\"import-atlas-panel\">\r\n                                <label htmlFor=\"atlas_separation\">Space (px): </label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    id=\"atlas_separation\"\r\n                                    value={this.state.separation}\r\n                                    onChange={(event) => {\r\n                                        this.sendState({\r\n                                            ...this.state,\r\n                                            separation: Number(event.target.value),\r\n                                        });\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"import-atlas-panel--buttons\">\r\n                            <button className=\"fileUpload\">\r\n                                Import atlas\r\n                                <input\r\n                                    type=\"file\"\r\n                                    className=\"upload cursor-pointer uploadSprites\"\r\n                                    accept=\"application/json\"\r\n                                    onChange={this.handleImportAltas}\r\n                                />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    Observer.emit(\r\n                                        GLOBAL_EVENT.IMPORT_ATLAS.IMPORT_ATLAS_GRID_BUTTON\r\n                                    );\r\n                                }}\r\n                            >\r\n                                Import\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImportAtlas;\r\n","import React, { Component } from 'react';\r\nimport { Observer, GLOBAL_EVENT } from '../../Observer';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './ToastNotification.scss';\r\n\r\nclass ToastNotification extends Component {\r\n    componentDidMount() {\r\n        // TODO: los toast tienen un error cuando son lanzados por segunda vez (posible error de la herramienta de toast)\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING, (msg: string) => {\r\n            toast.warn(msg, {\r\n                className: 'toast-warn',\r\n                position: 'top-center',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n            });\r\n        });\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.ERROR, (msg: string) => {\r\n            toast.error(msg, {\r\n                className: 'toast-error',\r\n                position: 'top-center',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n            });\r\n        });\r\n        Observer.on(GLOBAL_EVENT.NOTIFICATION_SYSTEM.CLEAR, () => {\r\n            toast.dismiss();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return <ToastContainer />;\r\n    }\r\n}\r\n\r\nexport default ToastNotification;\r\n","import React, { useRef } from 'react';\r\nimport './DragDropFiles.scss';\r\nimport getImageFiles from '../../../../utils/getImages';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { isEmpty } from 'ramda';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\n\r\nconst DragDropFiles = (props: any) => {\r\n    const dragBox = useRef<HTMLDivElement>(null);\r\n    const imagesState = useSelector((state: RootState) => state.imagesAtlas);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleDragEnterOver = (event: React.DragEvent<HTMLDivElement>) => {\r\n        dragBox.current?.classList.add('drag-drop-box-over');\r\n        event.preventDefault();\r\n    };\r\n    const handleDargLeave = (event: React.DragEvent<HTMLDivElement>) => {\r\n        dragBox.current?.classList.remove('drag-drop-box-over');\r\n    };\r\n    const handleDrop = async (event: React.DragEvent<HTMLDivElement>) => {\r\n        const files = event.dataTransfer.files;\r\n        const images = (await getImageFiles(files)) as ImageData[];\r\n        dispatch(AddImage(images));\r\n        dragBox.current?.classList.remove('drag-drop-box-over');\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={dragBox}\r\n            className={`${props.className} drag-drop-box`}\r\n            onDragEnter={handleDragEnterOver}\r\n            onDragOver={handleDragEnterOver}\r\n            onDragLeave={handleDargLeave}\r\n            onDrop={handleDrop}\r\n        >\r\n            {isEmpty(imagesState) ? (\r\n                <div className=\"drag-drop-box-notification\">You can drop an image here!</div>\r\n            ) : (\r\n                ''\r\n            )}\r\n            {props.children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DragDropFiles;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { css } from '@emotion/core';\r\n// First way to import\r\nimport { MoonLoader } from 'react-spinners';\r\nimport { Observer, GLOBAL_EVENT } from '../../../Observer';\r\nimport { css as CSS } from 'glamor';\r\n\r\n// Can be a string as well. Need to ensure each key-value pair ends with ;\r\nconst override = css`\r\n    display: block;\r\n    margin: 0 auto;\r\n    border-color: red;\r\n`;\r\n\r\nconst spinner_styles = CSS({\r\n    position: 'absolute !important',\r\n    width: '100%',\r\n    height: '100vh',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    zIndex: '2',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n});\r\n\r\nconst SpinnerModal = () => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        Observer.on(GLOBAL_EVENT.SPINNER.OPEN, () => {\r\n            setLoading(true);\r\n        });\r\n        Observer.on(GLOBAL_EVENT.SPINNER.CLOSE, () => {\r\n            setLoading(false);\r\n        });\r\n    });\r\n    return (\r\n        <div className={`${spinner_styles} ${!loading && 'd-none'}`}>\r\n            <div className=\"sweet-loading\">\r\n                <MoonLoader css={override} size={60} color={'#EC6139'} loading={loading} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SpinnerModal;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { SplitPane } from 'react-multi-split-pane';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { saveAs } from 'file-saver';\r\n\r\n// Estilos\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport './AtlasPacker.scss';\r\nimport 'animate.css';\r\n\r\n// Componentes\r\nimport MenuComponent from './components/menu/Menu';\r\nimport CardImage from './components/cardImage/CardImage';\r\nimport ContextMenu from './components/contextMenu/ContextMenu';\r\nimport ExportButton from './components/exportButtons/ExportButton';\r\nimport Zoom from './components/zoom/Zoom';\r\nimport Algorithm from './components/algorithm/Algorithm';\r\nimport Render from './components/render/Render';\r\n\r\n// Redux\r\nimport { CloseSideContextMenuAction } from '../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport store from '../../Redux/Store/store';\r\nimport { Observer, GLOBAL_EVENT, ImageCanvasData } from './Observer';\r\nimport ExportModal from './components/modals/exportModal/ExportModal';\r\n\r\n// UI\r\nimport createExportZipAtlas from '../../utils/createExportZipAtlas';\r\nimport ImportAtlas from './components/modals/importAtlas/ImportAtlas';\r\nimport { DesSelectImage, ResetImage } from '../../Redux/Actions/Atlas/images.action';\r\nimport ToastNotification from './components/notifications/ToastNotification';\r\nimport DragDropFiles from './components/dragDropFiles/DragDropFiles';\r\nimport { ResetAlgorithmAction } from '../../Redux/Actions/Atlas/algorithmPanel.action';\r\nimport { ResetMaxRectAction } from '../../Redux/Actions/Atlas/maxrect.action';\r\nimport { ResetZoomAction } from '../../Redux/Actions/Atlas/zoom.action';\r\nimport SpinnerModal from './components/modals/spinnerModal/SpinnerModal';\r\nimport ImportGifs from './components/modals/importGifs/ImportGifs';\r\nimport PatreonModal from './components/modals/patreonModal/PatreonModal';\r\n\r\nlet _scrollBarRef: any;\r\n\r\ninterface dispatchInterface {\r\n    CloseSideContextMenuAction: () => {};\r\n    DesSelectImage: () => {};\r\n    ResetImage: () => {};\r\n    ResetAlgorithmAction: () => {};\r\n    ResetMaxRectAction: () => {};\r\n    ResetZoomAction: () => {};\r\n}\r\n\r\nclass AtlasPacker extends Component<dispatchInterface, { exportModalOpen: boolean }> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            exportModalOpen: false,\r\n        };\r\n        Observer.removeAllListeners();\r\n    }\r\n\r\n    handleClickContainerAtlas = () => {\r\n        if (store.getState().contextSideMenuAtlas.active) {\r\n            this.props.CloseSideContextMenuAction();\r\n        }\r\n        Observer.emit(GLOBAL_EVENT.IMAGE_DES_SELECTED);\r\n        this.props.DesSelectImage();\r\n    };\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.props.ResetImage();\r\n        this.props.ResetAlgorithmAction();\r\n        this.props.ResetMaxRectAction();\r\n        this.props.ResetZoomAction();\r\n\r\n        Observer.removeAllListeners();\r\n    }\r\n\r\n    componentDidMount() {\r\n        Observer.on(\r\n            GLOBAL_EVENT.IMAGE_CANVAS_EXPORTED,\r\n            async (image_canvas_data: ImageCanvasData) => {\r\n                const zip = createExportZipAtlas(image_canvas_data);\r\n                const file = await zip.generateAsync({ type: 'blob' });\r\n                saveAs(file, `${image_canvas_data.name}.zip`);\r\n            }\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <SpinnerModal />\r\n                <ToastNotification />\r\n\r\n                <div\r\n                    className=\"principal-container\"\r\n                    onContextMenu={(event) => event.preventDefault()}\r\n                    onClickCapture={this.handleClickContainerAtlas}\r\n                    onDrop={(e) => e.preventDefault()}\r\n                    onDragOver={(e) => e.preventDefault()}\r\n                >\r\n                    <MenuComponent />\r\n                    <SplitPane\r\n                        split=\"vertical\"\r\n                        className=\"panels-container\"\r\n                        defaultSizes={[20, 60, 20]}\r\n                        minSize={[200, 500, 200]}\r\n                        onDragFinished={() => Observer.emit(GLOBAL_EVENT.PANEL_RESIZE_END)}\r\n                    >\r\n                        <DragDropFiles className=\"left-panel\">\r\n                            <div className=\"left-panel--image_container\">\r\n                                <PerfectScrollbar\r\n                                    options={{ suppressScrollX: true }}\r\n                                    className=\"texto\"\r\n                                    ref={(ref) => {\r\n                                        _scrollBarRef = ref;\r\n                                    }}\r\n                                >\r\n                                    <CardImage />\r\n                                </PerfectScrollbar>\r\n                            </div>\r\n                        </DragDropFiles>\r\n                        <div className=\"center-panel\">\r\n                            <div className=\"center-panel--up\">\r\n                                <Render />\r\n                            </div>\r\n                            <div className=\"center-panel--down\">\r\n                                <Zoom />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"right-panel\">\r\n                            <div className=\"right-panel--up\">\r\n                                <Algorithm />\r\n                            </div>\r\n                            <div className=\"right-panel--down\">\r\n                                <ExportButton\r\n                                    title=\"Export\"\r\n                                    handleClick={() => {\r\n                                        Observer.emit(GLOBAL_EVENT.OPEN_EXPORT_OPTIONS_PC);\r\n                                    }}\r\n                                />\r\n                                <div className=\"d-none\">\r\n                                    <ExportButton\r\n                                        title=\"Save in game\"\r\n                                        handleClick={() => {\r\n                                            Observer.emit(\r\n                                                GLOBAL_EVENT.NOTIFICATION_SYSTEM.WARNING,\r\n                                                'This is not a correct Atlas Phaser format'\r\n                                            );\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </SplitPane>\r\n                    <ContextMenu\r\n                        onUpdateSize={() => {\r\n                            _scrollBarRef.updateScroll();\r\n                        }}\r\n                    />\r\n                </div>\r\n                <ExportModal />\r\n                <ImportAtlas />\r\n                <ImportGifs />\r\n                <PatreonModal />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    CloseSideContextMenuAction,\r\n    DesSelectImage,\r\n    ResetImage,\r\n    ResetAlgorithmAction,\r\n    ResetMaxRectAction,\r\n    ResetZoomAction,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(AtlasPacker);\r\n","import React from 'react';\r\nimport './Frames.scss';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { ActivateFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { Observer } from '../../../AtlasPacker/Observer';\r\nimport { ReactSortable } from 'react-sortablejs';\r\nimport { equals } from 'ramda';\r\nimport { SwipeFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\n\r\nlet _scrollBarRef: any;\r\nlet last_frame_div: HTMLDivElement;\r\n\r\nexport const Frames = () => {\r\n    // last_frame = '';\r\n    const frames_list_state = useSelector((state: RootState) => state.AnimationList);\r\n    const frames_list = frames_list_state.animations.find(\r\n        (animation: any) => animation.id === frames_list_state.actual_animation\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    if (last_frame_div !== undefined) {\r\n        last_frame_div.classList.remove('frame-play');\r\n    }\r\n\r\n    // El frame Tracker\r\n    Observer.removeListener(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES);\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES, (frames: string) => {\r\n        const actual_animation_list = store.getState().AnimationList;\r\n\r\n        if (frames_list !== undefined && actual_animation_list.actual_animation !== '0') {\r\n            const frame_div = document.getElementById(`${frames}`) as HTMLDivElement;\r\n\r\n            if (last_frame_div !== undefined) {\r\n                last_frame_div.classList.remove('frame-play');\r\n            }\r\n\r\n            if (frame_div !== undefined) {\r\n                frame_div.classList.add('frame-play');\r\n                last_frame_div = frame_div;\r\n                const perfectScrollFrame = document.querySelector(\r\n                    '.perfect-scroll-frames-container'\r\n                ) as HTMLDivElement;\r\n                perfectScrollFrame.scrollLeft = frame_div.offsetLeft - 150;\r\n                _scrollBarRef.updateScroll();\r\n            }\r\n        }\r\n    });\r\n\r\n    return (\r\n        <PerfectScrollbar\r\n            className=\"perfect-scroll-frames-container\"\r\n            ref={(e) => (_scrollBarRef = e)}\r\n        >\r\n            <div>\r\n                <h4 className=\"ml-2 mt-1 mb-2 text-color-primary\">Frames</h4>\r\n                <div className={`frames-container mr-2`}>\r\n                    <ReactSortable\r\n                        list={frames_list !== undefined ? frames_list.frames : []}\r\n                        setList={(newState) => {\r\n                            if (\r\n                                !equals(\r\n                                    newState,\r\n                                    frames_list !== undefined ? frames_list.frames : []\r\n                                )\r\n                            ) {\r\n                                dispatch(\r\n                                    SwipeFrameAction({\r\n                                        id: frames_list_state.actual_animation,\r\n                                        frames: newState,\r\n                                    })\r\n                                );\r\n                            }\r\n                        }}\r\n                        swap\r\n                    >\r\n                        {frames_list !== undefined &&\r\n                            frames_list.frames.map((frame: any, key: number) => (\r\n                                <div\r\n                                    id={`${frame.name}_${key + 1}`}\r\n                                    key={key}\r\n                                    className={`images-frames--container ${\r\n                                        frame.active ? 'frame-active' : ''\r\n                                    }`}\r\n                                    onClick={() => {\r\n                                        dispatch(ActivateFrameAction({ local_id: frame.local_id }));\r\n                                    }}\r\n                                    onContextMenu={(event) => {\r\n                                        dispatch(\r\n                                            ActivateSideContextMenuAction({\r\n                                                x: event.clientX,\r\n                                                y: event.clientY,\r\n                                                id: frame.local_id,\r\n                                                options: {\r\n                                                    value: 'frames',\r\n                                                },\r\n                                                active: true,\r\n                                            })\r\n                                        );\r\n                                    }}\r\n                                >\r\n                                    <div>\r\n                                        <img src={frame.src} alt={frame.name} title={frame.name} />\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                    </ReactSortable>\r\n                </div>\r\n            </div>\r\n        </PerfectScrollbar>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Modal from 'react-responsive-modal';\r\nimport './ImportGifs.scss';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { Observer, GLOBAL_EVENT, GifImports } from '../../../Observer';\r\nimport { AddImage, ImageData } from '../../../../../Redux/Actions/Atlas/images.action';\r\nimport { connect } from 'react-redux';\r\nimport generateId from '../../../../../utils/generateId';\r\n\r\nclass ImportGifs extends React.Component<\r\n    { AddImage: (Images: Array<ImageData>) => {} },\r\n    { open: boolean; gifs: GifImports }\r\n> {\r\n    default_gifs: GifImports = {\r\n        width: 0,\r\n        height: 0,\r\n        name: '',\r\n        srcs: [],\r\n    };\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            gifs: this.default_gifs,\r\n        };\r\n        this.handleAddGif = this.handleAddGif.bind(this);\r\n\r\n        Observer.on(GLOBAL_EVENT.IMPORT_GIF, (gifs: GifImports) => {\r\n            this.setState({\r\n                ...this.state,\r\n                open: true,\r\n                gifs,\r\n            });\r\n        });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n            gifs: this.default_gifs,\r\n        });\r\n    };\r\n\r\n    handleAddGif() {\r\n        const ImagesData: ImageData[] = this.state.gifs.srcs.map(\r\n            (src, index: number): ImageData => {\r\n                return {\r\n                    id: generateId(),\r\n                    name: `${this.state.gifs.name}_${index}`,\r\n                    width: this.state.gifs.width,\r\n                    height: this.state.gifs.height,\r\n                    size: 0,\r\n                    active: false,\r\n                    changeName: false,\r\n                    src: src,\r\n                    origin: {\r\n                        x: 0.5,\r\n                        y: 0.5,\r\n                    },\r\n                };\r\n            }\r\n        );\r\n\r\n        this.props.AddImage(ImagesData);\r\n        this.handleCloseModal();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                open={this.state.open}\r\n                onClose={this.handleCloseModal}\r\n                closeOnOverlayClick={false}\r\n                center\r\n                classNames={{ outline: '10px solid red' }}\r\n                styles={{ marginTop: '1000px' }}\r\n            >\r\n                <h3 className=\"noselect mb-3\">Import Gif options</h3>\r\n                <div className=\"noselect\">\r\n                    <div className=\"import-gif-container--center pb-2\">\r\n                        {this.state.gifs.srcs.length >= 1 && (\r\n                            <PerfectScrollbar options={{ suppressScrollX: true }} className={`p-3`}>\r\n                                <div className=\"grid-container-gif pb-4\">\r\n                                    {this.state.gifs.srcs.map((src: string, i: number) => {\r\n                                        return (\r\n                                            <div className=\"grid-item-gif\" key={i}>\r\n                                                <img src={src} alt=\"gif_image\" className=\"w-100\" />\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </PerfectScrollbar>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"import-gif--buttons mt-2\">\r\n                        <button id=\"btn-accept\" className=\"ml-1\" onClick={this.handleAddGif}>\r\n                            Accept\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    AddImage,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(ImportGifs);\r\n","import React, { PureComponent } from 'react';\r\nimport Modal from 'react-responsive-modal';\r\nimport GammixOrange from '../../../../../Vendor/gammix_oran.png';\r\n\r\ninterface stateInterface {\r\n    open: boolean;\r\n}\r\n\r\nexport class PatreonModal extends PureComponent<{}, stateInterface> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            open: true,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            ...this.state,\r\n            open: true,\r\n        });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            open: false,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                open={this.state.open}\r\n                onClose={this.handleCloseModal}\r\n                center\r\n                classNames={{ outline: '10px solid red' }}\r\n                styles={{ marginTop: '1000px' }}\r\n            >\r\n                <br />\r\n                <br />\r\n\r\n                <div style={{ fontSize: '1.3rem' }}>\r\n                    <img\r\n                        src={GammixOrange}\r\n                        alt=\"Gammix Logo\"\r\n                        style={{ float: 'left', marginTop: '-40px' }}\r\n                    />\r\n                    <p style={{ marginTop: '30px' }}>\r\n                        Please consider supporting me in{' '}\r\n                        <a href=\"https://www.patreon.com/gammafp\">Patreon</a> to continue developing\r\n                        these tools: <a href=\"https://www.patreon.com/gammafp\">HERE</a>\r\n                    </p>\r\n                </div>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PatreonModal;\r\n","import EventEmitter from 'eventemitter3';\r\n\r\nlet ObserverAnim = new EventEmitter();\r\n\r\nlet GLOBAL_EVENT_ANIM = {\r\n    OPEN_ATLAS_IMPORT_MODAL: 'OPEN_ATLAS_IMPORT_MODAL',\r\n    EDIT_ANIM_NAME: 'EDIT_ANIM_NAME',\r\n\r\n    // Eventos del render de animación\r\n    RENDER: {\r\n        IMPORT_ATLAS: 'IMPORT_ATLAS',\r\n        SET_ZOOM: 'SET_ZOOM',\r\n        CHANGE_OR_CREATE_ANIMATION_CONTAINER: 'CHANGE_OR_CREATE_ANIMATION_CONTAINER',\r\n        ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER: 'ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER',\r\n        UPDATE_FRAMES: 'UPDATE_FRAMES',\r\n    },\r\n    PLAY_STOP_CONTROL: 'PLAY_STOP_CONTROL',\r\n    NOTIFICATION_SYSTEM: {\r\n        WARNING: 'WARNING',\r\n        ERROR: 'ERROR',\r\n        CLEAR: 'CLEAR',\r\n    },\r\n    RESET_ALL: 'RESET_ALL',\r\n};\r\n\r\nexport { ObserverAnim, GLOBAL_EVENT_ANIM };\r\n","/**\r\n * Nos ayuda a comprobar si es una animación es correcta\r\n */\r\nconst isPhaserAnimationJSON = (data: string): boolean => {\r\n    let isAtlas = false;\r\n    try {\r\n        JSON.parse(data);\r\n        isAtlas = true;\r\n    } catch (error) {\r\n        isAtlas = false;\r\n    }\r\n\r\n    if (isAtlas) {\r\n        const have_anims = data.search('anims') !== -1;\r\n        const have_frameRate = data.search('frameRate') !== -1;\r\n        const have_frames = data.search('frames') !== -1;\r\n\r\n        if (!have_frames || !have_frameRate || !have_anims) {\r\n            isAtlas = false;\r\n        } else {\r\n            isAtlas = true;\r\n        }\r\n    }\r\n    return isAtlas;\r\n};\r\n\r\nexport default isPhaserAnimationJSON;\r\n","/**\r\n * Nos ayuda a generar colores aleatoreos de una lista\r\n */\r\nlet actual_color = '0';\r\nconst generateRandomColors = () => {\r\n    const colors = [\r\n        '#1abc9c',\r\n        '#2ecc71',\r\n        '#3498db',\r\n        '#9b59b6',\r\n        '#f1c40f',\r\n        '#16a085',\r\n        '#27ae60',\r\n        '#2980b9',\r\n        '#8e44ad',\r\n        '#f1c40f',\r\n        '#e67e22',\r\n        '#e74c3c',\r\n        '#ecf0f1',\r\n        '#95a5a6',\r\n        '#f39c12',\r\n        '#d35400',\r\n        '#c0392b',\r\n        '#bdc3c7',\r\n    ];\r\n    let final_color = '0';\r\n    while (final_color === actual_color) {\r\n        final_color = colors[Phaser.Math.Between(0, colors.length - 1)];\r\n    }\r\n    return final_color;\r\n};\r\n\r\nexport default generateRandomColors;\r\n","import React from 'react';\r\n\r\n// Estilos\r\nimport './Menu.style.scss';\r\n\r\n// Redux\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\n// import { Link } from 'react-router-dom';\r\nimport getFilesText from '../../../../utils/getFilesText';\r\nimport isPhaserAnimationJSON from '../../../../utils/isPhaserAnimationJSON';\r\nimport generateId from '../../../../utils/generateId';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport generateRandomColors from '../../../../utils/generateRandomColors';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n    SwipeAnimationsAction,\r\n    PlayStopAction,\r\n} from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { isEmpty } from 'ramda';\r\nimport { css } from 'glamor';\r\nimport { SetAtlasAnimAnimAction } from '../../../../Redux/Actions/Animator/atlas.anim.action';\r\nimport { ResetAllAnimationAction } from '../../../../Redux/Actions/globals.actions';\r\nimport Patreon from '../../../../Vendor/become_patreon.png';\r\nimport isElectron from 'is-electron';\r\nimport { Link } from 'react-router-dom';\r\nconst disable = css({\r\n    opacity: 0.2,\r\n});\r\n\r\nconst MenuComponent: React.FunctionComponent = () => {\r\n    const atlas_anim = useSelector((store: RootState) => store.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClickOpenModalAtlasImport = () => {\r\n        ObserverAnim.emit(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL);\r\n    };\r\n\r\n    const inputHandleAnimationJson = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAnimationJSON(files_loaded as string)) {\r\n            const imagesAtlas = store.getState().imagesAtlas;\r\n\r\n            const anim_json = JSON.parse(files_loaded as string);\r\n            const animations = anim_json.anims.map((anim: any) => ({\r\n                id: generateId('anim'),\r\n                name: anim.key,\r\n                color: generateRandomColors(),\r\n                play: false,\r\n                key_controls: {\r\n                    repeat: anim.repeat,\r\n                    frame_rate: anim.frameRate,\r\n                    yoyo: false,\r\n                },\r\n                frames: anim.frames.reduce((prevFrame: any, currentFrame: any) => {\r\n                    const local_frame = imagesAtlas.find(\r\n                        (image: any) => image.name === currentFrame.frame\r\n                    );\r\n                    if (local_frame !== undefined) {\r\n                        prevFrame.push({\r\n                            id: local_frame.id,\r\n                            local_id: generateId('sprite'),\r\n                            name: currentFrame.frame,\r\n                            src: local_frame.src,\r\n                            active: false,\r\n                        });\r\n                    }\r\n                    return prevFrame;\r\n                }, []),\r\n            }));\r\n\r\n            // Se ha usado swipeanimationaction ya que provee la posibilidad de insertar un array de animaciones\r\n            dispatch(SwipeAnimationsAction(animations));\r\n            dispatch(SetAtlasAnimAnimAction(files_loaded));\r\n        } else {\r\n            ObserverAnim.emit(\r\n                GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR,\r\n                'Atlas anim incorrect json'\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav className=\"menu noselect\">\r\n            <ul>\r\n                <li className=\"icon\">\r\n                    {isElectron() ? (\r\n                        <Link to=\"/\" className=\"material-icons\">\r\n                            home\r\n                        </Link>\r\n                    ) : (\r\n                        <a href=\"https://gammafp.com\" className=\"material-icons\">\r\n                            home\r\n                        </a>\r\n                    )}\r\n                </li>\r\n                {!isEmpty(atlas_anim.image) && !isEmpty(atlas_anim.json) ? (\r\n                    <li\r\n                        className={`${disable}`}\r\n                        onClick={() => {\r\n                            ObserverAnim.emit(\r\n                                GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING,\r\n                                'You have already imported an atlas'\r\n                            );\r\n                        }}\r\n                    >\r\n                        Import Atlas\r\n                    </li>\r\n                ) : (\r\n                    <li onClick={handleClickOpenModalAtlasImport}>Import Atlas</li>\r\n                )}\r\n                {!isEmpty(atlas_anim.image) &&\r\n                !isEmpty(atlas_anim.json) &&\r\n                isEmpty(atlas_anim.animation) ? (\r\n                    <li className=\"fileUpload\">\r\n                        Import Animation\r\n                        <input\r\n                            type=\"file\"\r\n                            className=\"upload cursor-pointer uploadSprites\"\r\n                            accept=\"application/json\"\r\n                            onChange={inputHandleAnimationJson}\r\n                        />\r\n                    </li>\r\n                ) : (\r\n                    <li\r\n                        className={`${disable}`}\r\n                        onClick={() => {\r\n                            isEmpty(atlas_anim.animation)\r\n                                ? ObserverAnim.emit(\r\n                                      GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING,\r\n                                      'You must import an atlas'\r\n                                  )\r\n                                : ObserverAnim.emit(\r\n                                      GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING,\r\n                                      'You have already imported animations'\r\n                                  );\r\n                        }}\r\n                    >\r\n                        Import Animation\r\n                    </li>\r\n                )}\r\n                {/* TODO: Refactor reset */}\r\n                <li\r\n                    onClick={() => {\r\n                        dispatch(PlayStopAction({ id: '0', play: false }));\r\n                        dispatch(ResetAllAnimationAction());\r\n                        ObserverAnim.emit(GLOBAL_EVENT_ANIM.RESET_ALL);\r\n                    }}\r\n                >\r\n                    Reset\r\n                </li>\r\n                <li>\r\n                    <a\r\n                        href=\"https://www.patreon.com/join/gammafp?\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                    >\r\n                        <img src={Patreon} alt=\"Patreon\" />\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default MenuComponent;\r\n","/**\r\n * Nos ayudará a generar una lista de nombre\r\n */\r\n\r\nconst getImagesNamesGroup = (images_list: any) => {\r\n    let image_list_end = images_list.reduce((prev: any, current: any) => {\r\n        const current_name: string = current.name.split('_')[0];\r\n        if (!(prev as Array<string>).includes(current_name)) {\r\n            prev.push(current.name.split('_')[0]);\r\n        }\r\n        return prev;\r\n    }, []);\r\n    return image_list_end;\r\n};\r\n\r\nexport default getImagesNamesGroup;\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport getImagesNamesGroup from '../../../../utils/getImagesNameGroup';\r\nimport { AddSpriteToFramesAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\nimport generateId from '../../../../utils/generateId';\r\nimport { find, propEq, isEmpty } from 'ramda';\r\n\r\n// Se usa para evitar el salto involuntario de una animación seleccionada\r\nlet click_selected = false;\r\n\r\nconst ImgList = () => {\r\n    const images_list = useSelector((state: RootState) => state.imagesAtlas);\r\n    const images_name = getImagesNamesGroup(images_list);\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const dispatch = useDispatch();\r\n\r\n    // Buscamos por el frame activo en la caja de frames para mostrar la selección\r\n    const actual_animation = find(\r\n        propEq('id', animation_list.actual_animation),\r\n        animation_list.animations\r\n    );\r\n    const active_frame = find(\r\n        propEq('active', true),\r\n        actual_animation !== undefined ? actual_animation.frames : []\r\n    );\r\n\r\n    // Obtenemos la posición del elemento para mover el scroll\r\n    useEffect(() => {\r\n        if (active_frame !== undefined && !isEmpty(active_frame) && click_selected) {\r\n            const perfect_scroll = document.querySelector(\r\n                '.perfect_scroll_imglist'\r\n            ) as HTMLDivElement;\r\n            const frame_position = document.querySelector(`#${active_frame.id}`) as HTMLDivElement;\r\n            perfect_scroll.scrollTop = frame_position.offsetTop - 150;\r\n        } else if (!click_selected) {\r\n            click_selected = true;\r\n        }\r\n    });\r\n\r\n    const html_element = images_name.map((name: string, key: any) => {\r\n        return (\r\n            <div className=\"animate_tool-container noselect\" key={key}>\r\n                <div className=\"text-color-primary mb-2\">{name}</div>\r\n                {images_list.reduce((prev: any, current: any, key: number) => {\r\n                    if (current.name?.startsWith(name)) {\r\n                        prev.push(\r\n                            <div\r\n                                className=\"ml-3\"\r\n                                key={key}\r\n                                onClick={() => {\r\n                                    const actual_animation = store.getState().AnimationList\r\n                                        .actual_animation;\r\n                                    if (actual_animation !== '0') {\r\n                                        // Corrección de salto involuntario de animación.\r\n                                        click_selected = false;\r\n                                        dispatch(\r\n                                            AddSpriteToFramesAction({\r\n                                                id: actual_animation,\r\n                                                sprite: {\r\n                                                    id: current.id,\r\n                                                    local_id: generateId('sprite'),\r\n                                                    name: current.name,\r\n                                                    src: current.src,\r\n                                                    active: true,\r\n                                                },\r\n                                            })\r\n                                        );\r\n                                    }\r\n                                }}\r\n                            >\r\n                                <div\r\n                                    className={`animated bounceInRight card-image ${\r\n                                        active_frame !== undefined &&\r\n                                        active_frame.id === current.id &&\r\n                                        'card-image-active'\r\n                                    }`}\r\n                                    id={current.id}\r\n                                >\r\n                                    <div className=\"card-image--image\">\r\n                                        <img\r\n                                            src={current.src}\r\n                                            alt={current.name}\r\n                                            className=\"noselect\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"card-image--nameImage\">{current.name}</div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    }\r\n                    return prev;\r\n                }, [])}\r\n            </div>\r\n        );\r\n    });\r\n\r\n    return <React.Fragment>{html_element}</React.Fragment>;\r\n};\r\n\r\nexport default ImgList;\r\n","import React, { useState } from 'react';\r\nimport { AddButton } from '../buttons/Buttons';\r\nimport { isEmpty, equals } from 'ramda';\r\nimport clearName from '../../../../utils/clearNames';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n    AddAnimationAction,\r\n    EditNameAnimationAction,\r\n    ActivateAnimation,\r\n    SwipeAnimationsAction,\r\n    AddAnimationPayloadInterface,\r\n} from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport generateId from '../../../../utils/generateId';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport generateRandomColors from '../../../../utils/generateRandomColors';\r\nimport { ActivateSideContextMenuAction } from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { ReactSortable } from 'react-sortablejs';\r\nimport { css } from 'glamor';\r\n\r\nconst button_disable = css({\r\n    opacity: 0.2,\r\n});\r\n\r\nconst AnimationList = () => {\r\n    // States\r\n    const [AddAnimation, setAddAnimation] = useState(false);\r\n    const [EditAnimationName, setEditAnimationName] = useState('0');\r\n\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.EDIT_ANIM_NAME, (id) => {\r\n        setEditAnimationName(id);\r\n    });\r\n\r\n    // Store\r\n    const animation_list = useSelector((store: RootState) => store.AnimationList);\r\n    const atlas_anim = useSelector((store: RootState) => store.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    // Local vars\r\n    const actualBoxColor = generateRandomColors();\r\n\r\n    const handleClickAddAnimation = () => {\r\n        setAddAnimation(true);\r\n    };\r\n\r\n    // Add new animation\r\n    const handleKeyPressAddAnimation = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.key === 'Enter') {\r\n            saveText(event.currentTarget.value);\r\n        }\r\n    };\r\n    const handleInputBlurAddAnimation = (event: React.FocusEvent<HTMLInputElement>) => {\r\n        const name_trimmed = event.currentTarget.value.trim().trimLeft().trimRight().trimEnd();\r\n        saveText(name_trimmed);\r\n        setAddAnimation(false);\r\n    };\r\n    // Edit animation name\r\n    const handleKeyPressEditName = (id: string, event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.key === 'Enter') {\r\n            editText({ id, name: event.currentTarget.value });\r\n        }\r\n    };\r\n    const handleInputBlurEditName = (id: string, event: React.FocusEvent<HTMLInputElement>) => {\r\n        const name_trimmed = event.currentTarget.value.trim().trimLeft().trimRight().trimEnd();\r\n        setEditAnimationName('0');\r\n        editText({ name: name_trimmed, id });\r\n    };\r\n\r\n    // Save Add and Edit image\r\n    const saveText = (name_in: string) => {\r\n        if (!isEmpty(name_in)) {\r\n            const id = `anim_${generateId()}`;\r\n            const name = clearName(name_in);\r\n            dispatch(\r\n                AddAnimationAction({\r\n                    id,\r\n                    name,\r\n                    color: actualBoxColor,\r\n                    play: false,\r\n                    key_controls: {\r\n                        repeat: -1,\r\n                        frame_rate: 12,\r\n                        yoyo: false,\r\n                    },\r\n                    frames: [],\r\n                })\r\n            );\r\n            setAddAnimation(false);\r\n        } else {\r\n            console.log('Está vacío');\r\n        }\r\n    };\r\n\r\n    const editText = (options: { name: string; id: string }) => {\r\n        if (!isEmpty(options.name)) {\r\n            dispatch(\r\n                EditNameAnimationAction({\r\n                    id: options.id,\r\n                    name: clearName(options.name),\r\n                })\r\n            );\r\n            setEditAnimationName('0');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"animate_tool-container\">\r\n                <div className=\"my-2 w-100 d-flex justify-content-between align-items-center\">\r\n                    <h3 className=\"text-color-primary\">Animations</h3>\r\n                    <span className=\"mr-3\">\r\n                        {isEmpty(atlas_anim.image) || isEmpty(atlas_anim.json) ? (\r\n                            <AddButton\r\n                                className={button_disable}\r\n                                onClick={() => {\r\n                                    ObserverAnim.emit(\r\n                                        GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING,\r\n                                        'You must import an atlas'\r\n                                    );\r\n                                }}\r\n                            >\r\n                                +\r\n                            </AddButton>\r\n                        ) : (\r\n                            <AddButton onClick={handleClickAddAnimation}>+</AddButton>\r\n                        )}\r\n                    </span>\r\n                </div>\r\n                {AddAnimation && (\r\n                    <div className=\"ml-3\">\r\n                        <div\r\n                            className={`m-0 my-2 animated fadeIn card-image`}\r\n                            style={{ height: '30px' }}\r\n                        >\r\n                            <div className=\"card-image--image\">\r\n                                <div\r\n                                    className=\"block-color-animate-card\"\r\n                                    style={{\r\n                                        width: '30px',\r\n                                        height: '30px',\r\n                                        borderRadius: '5px',\r\n                                        backgroundColor: actualBoxColor,\r\n                                    }}\r\n                                ></div>\r\n                            </div>\r\n\r\n                            <div className=\"w-100 card-image--nameImage\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"card-image--nameImage_input\"\r\n                                    autoFocus={true}\r\n                                    onFocus={(event) => {\r\n                                        event.target.select();\r\n                                    }}\r\n                                    onKeyDown={handleKeyPressAddAnimation}\r\n                                    onBlur={handleInputBlurAddAnimation}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Estos estilos están heredados del Atlas packer */}\r\n                {/* Esto se repetirá para importar muchas imágenes */}\r\n                <ReactSortable\r\n                    list={animation_list.animations}\r\n                    setList={(newState) => {\r\n                        if (!isEmpty(atlas_anim.image) && !isEmpty(atlas_anim.json)) {\r\n                            if (!equals(newState, animation_list.animations)) {\r\n                                dispatch(\r\n                                    SwipeAnimationsAction(\r\n                                        newState as Array<AddAnimationPayloadInterface>\r\n                                    )\r\n                                );\r\n                            }\r\n                        }\r\n                    }}\r\n                    swap\r\n                >\r\n                    {animation_list.animations.map((animation: any) => (\r\n                        <div\r\n                            className=\"ml-3\"\r\n                            key={animation.id}\r\n                            onContextMenu={(event) => {\r\n                                dispatch(ActivateAnimation({ id: animation.id }));\r\n                                dispatch(\r\n                                    ActivateSideContextMenuAction({\r\n                                        x: event.clientX,\r\n                                        y: event.clientY,\r\n                                        id: animation.id,\r\n                                        active: true,\r\n                                    })\r\n                                );\r\n                            }}\r\n                            onClick={() => {\r\n                                dispatch(ActivateAnimation({ id: animation.id }));\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className={`m-0 my-2 animated fadeIn card-image ${\r\n                                    animation_list.actual_animation === animation.id &&\r\n                                    'card-image-active'\r\n                                }`}\r\n                                style={{ height: '30px' }}\r\n                            >\r\n                                <div className=\"card-image--image\">\r\n                                    <div\r\n                                        className=\"block-color-animate-card\"\r\n                                        style={{\r\n                                            width: '30px',\r\n                                            height: '30px',\r\n                                            borderRadius: '5px',\r\n                                            backgroundColor: animation.color,\r\n                                        }}\r\n                                    ></div>\r\n                                </div>\r\n                                <div className=\"w-100 card-image--nameImage\">\r\n                                    {EditAnimationName === animation.id ? (\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"card-image--nameImage_input\"\r\n                                            autoFocus={true}\r\n                                            onFocus={(e) => {\r\n                                                e.target.select();\r\n                                            }}\r\n                                            onKeyDown={(e) =>\r\n                                                handleKeyPressEditName(animation.id, e)\r\n                                            }\r\n                                            onBlur={(e) => handleInputBlurEditName(animation.id, e)}\r\n                                        />\r\n                                    ) : (\r\n                                        <span\r\n                                            onDoubleClick={() => setEditAnimationName(animation.id)}\r\n                                        >\r\n                                            {animation.name}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </ReactSortable>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default AnimationList;\r\n","import React from 'react';\r\nimport { AddButton } from '../../buttons/Buttons';\r\nimport { RootState } from '../../../../../Redux/Store/store';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { setZoomAnimAction } from '../../../../../Redux/Actions/Animator/zoom.anim.action';\r\nimport { AddAnimationPayloadInterface } from '../../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { find, propEq } from 'ramda';\r\nimport { css } from 'glamor';\r\n\r\nconst disable = css({\r\n    opacity: 0.2,\r\n});\r\n\r\nexport const ZoomSection = () => {\r\n    const zoomPercent: number = useSelector((state: RootState) => state.zoomAnim.value);\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(\r\n        propEq('id', animation_list.actual_animation),\r\n        animation_list.animations\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const minZoom = 20;\r\n    const maxZoom = 500;\r\n    const zoomStep = 10;\r\n\r\n    const handleInputZoom = (percentInput: number) => {\r\n        const numberPercent: number = Math.round(percentInput);\r\n        const finalZoom: number =\r\n            numberPercent <= minZoom ? minZoom : numberPercent >= maxZoom ? maxZoom : numberPercent;\r\n        dispatch(setZoomAnimAction({ value: finalZoom }));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {actual_animation === undefined ? (\r\n                <React.Fragment>\r\n                    <span className={`zoom-input-view ${disable}`}>\r\n                        <input type=\"number\" onChange={(event) => {}} value={zoomPercent} />\r\n                        <span className=\"ml-1\">%</span>\r\n                    </span>\r\n                    <AddButton className={`ml-2 ${disable}`}>\r\n                        <span className=\"px-2\" style={{ fontSize: '1rem' }}>\r\n                            Reset\r\n                        </span>\r\n                    </AddButton>\r\n                    <AddButton className={`ml-1 ${disable}`}>-</AddButton>\r\n                    <AddButton className={`ml-1 ${disable}`}>+</AddButton>\r\n                </React.Fragment>\r\n            ) : (\r\n                <React.Fragment>\r\n                    <span className={`zoom-input-view`}>\r\n                        <input\r\n                            type=\"number\"\r\n                            onChange={(event) => handleInputZoom(Number(event.target.value))}\r\n                            value={zoomPercent}\r\n                        />\r\n                        <span className=\"ml-1\">%</span>\r\n                    </span>\r\n                    <AddButton className=\"ml-2\" onClick={() => handleInputZoom(100)}>\r\n                        <span className=\"px-2\" style={{ fontSize: '1rem' }}>\r\n                            Reset\r\n                        </span>\r\n                    </AddButton>\r\n                    <AddButton\r\n                        className=\"ml-1\"\r\n                        onClick={() => handleInputZoom(zoomPercent - zoomStep)}\r\n                    >\r\n                        -\r\n                    </AddButton>\r\n                    <AddButton\r\n                        className=\"ml-1\"\r\n                        onClick={() => handleInputZoom(zoomPercent + zoomStep)}\r\n                    >\r\n                        +\r\n                    </AddButton>\r\n                </React.Fragment>\r\n            )}\r\n        </React.Fragment>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { ChromePicker, RGBColor } from 'react-color';\r\n\r\nimport './ColorPicker.scss';\r\n\r\ntype ColorPickerProps = {\r\n    onColorChange: (color: string) => void;\r\n    disabled?: boolean;\r\n};\r\n\r\nexport const ColorPicker: React.FC<ColorPickerProps> = ({ onColorChange, disabled = false }) => {\r\n    const [isPickerVisible, setIsPickerVisible] = useState(false);\r\n    const [pickerColor, setPickerColor] = useState<RGBColor>({\r\n        r: 0,\r\n        g: 0,\r\n        b: 0,\r\n        a: 1,\r\n    });\r\n\r\n    return (\r\n        <div className=\"color-picker\">\r\n            <button onClick={() => setIsPickerVisible(!isPickerVisible)} disabled={disabled}>\r\n                <span\r\n                    className=\"background-color\"\r\n                    style={{\r\n                        backgroundColor: `rgba(${pickerColor.r},${pickerColor.g},${pickerColor.b},${pickerColor.a})`,\r\n                    }}\r\n                />\r\n                Background\r\n            </button>\r\n            {isPickerVisible && (\r\n                <>\r\n                    <div className=\"picker-backdrop\" onClick={() => setIsPickerVisible(false)} />\r\n                    <div className=\"color-picker-widget\">\r\n                        <ChromePicker\r\n                            color={pickerColor}\r\n                            onChange={(color) => {\r\n                                const { r, g, b, a } = color.rgb;\r\n                                setPickerColor(color.rgb);\r\n                                onColorChange(`rgba(${r},${g},${b},${a})`);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport './KeyTools.scss';\r\nimport { AddButton } from '../buttons/Buttons';\r\nimport { ZoomSection } from './zoomSection/ZoomSection';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport {\r\n    AddAnimationPayloadInterface,\r\n    PlayStopAction,\r\n} from '../../../../Redux/Actions/Animator/animation.list.action';\r\n\r\nimport { css } from 'glamor';\r\nimport { propEq, find } from 'ramda';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { ColorPicker } from '../colorPicker/ColorPicker';\r\nimport { setBackgroundAnimAction } from '../../../../Redux/Actions/Animator/background.anim.action';\r\n\r\nconst button_disable = css({\r\n    opacity: 0.2,\r\n});\r\n\r\nconst KeyTools: React.FC = () => {\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(\r\n        propEq('id', animation_list.actual_animation),\r\n        animation_list.animations\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const hasNoAnimations = actual_animation === undefined || actual_animation.frames.length < 1;\r\n\r\n    return (\r\n        <div className=\"key-tools d-flex justify-content-between align-item-center\">\r\n            <div className=\"zoom-section ml-5 pr-3 my-2\">\r\n                <ZoomSection />\r\n            </div>\r\n            <div\r\n                className={`background-section mr-5 pl-3 my-2 ${\r\n                    hasNoAnimations ? button_disable : ''\r\n                }`}\r\n            >\r\n                <ColorPicker\r\n                    disabled={hasNoAnimations}\r\n                    onColorChange={(color) => dispatch(setBackgroundAnimAction({ value: color }))}\r\n                />\r\n            </div>\r\n            <div className=\"media-section mr-5 pl-3 my-2\">\r\n                {hasNoAnimations ? (\r\n                    <AddButton\r\n                        className={`ml-1 ${button_disable}`}\r\n                        onClick={() => {\r\n                            ObserverAnim.emit(\r\n                                GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING,\r\n                                'You must create animations and import frames'\r\n                            );\r\n                        }}\r\n                    >\r\n                        <span className=\"material-icons\">play_arrow</span>\r\n                    </AddButton>\r\n                ) : (\r\n                    <AddButton\r\n                        className=\"ml-1\"\r\n                        onClick={() => {\r\n                            dispatch(\r\n                                PlayStopAction({\r\n                                    id: animation_list.actual_animation,\r\n                                    play: !actual_animation.play,\r\n                                })\r\n                            );\r\n                        }}\r\n                    >\r\n                        <span className=\"material-icons\">\r\n                            {actual_animation.play ? 'stop' : 'play_arrow'}\r\n                        </span>\r\n                    </AddButton>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default KeyTools;\r\n","import React from 'react';\r\nimport { css } from 'glamor';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport {\r\n    AddAnimationPayloadInterface,\r\n    ChangeKeyControlsAction,\r\n    PlayStopAction,\r\n} from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { find, propEq } from 'ramda';\r\n\r\nconst FramesKeyControlInput = css({\r\n    width: '40px',\r\n    border: 'none',\r\n    borderRadius: '3px',\r\n    textAlign: 'right',\r\n});\r\nconst disable = css({\r\n    opacity: 0.2,\r\n});\r\n\r\nconst FramesKeyControls = () => {\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const actual_animation: AddAnimationPayloadInterface = find(\r\n        propEq('id', animation_list.actual_animation),\r\n        animation_list.animations\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const change_key_controls = (key_controls: any) => {\r\n        dispatch(PlayStopAction({ id: '0', play: false }));\r\n        dispatch(\r\n            ChangeKeyControlsAction({\r\n                id: animation_list.actual_animation,\r\n                key_controls,\r\n            })\r\n        );\r\n    };\r\n    return (\r\n        <div className=\"mt-2\">\r\n            <h4 className=\"text-color-primary\">Key Controls</h4>\r\n            {actual_animation !== undefined && (\r\n                <div className={`ml-2 mt-2 ${actual_animation === undefined && disable}`}>\r\n                    <div\r\n                        className={`d-flex align-items-center justify-content-between mb-1 hiden_input_spin`}\r\n                    >\r\n                        Repeat\r\n                        <input\r\n                            type=\"number\"\r\n                            className={`${FramesKeyControlInput}`}\r\n                            value={actual_animation.key_controls.repeat}\r\n                            onChange={(e) => {\r\n                                change_key_controls({\r\n                                    ...actual_animation.key_controls,\r\n                                    repeat:\r\n                                        Number(e.target.value) > 99\r\n                                            ? 100\r\n                                            : Number(e.target.value) < -2\r\n                                            ? -1\r\n                                            : Number(e.target.value),\r\n                                });\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex align-items-center justify-content-between mb-1 hiden_input_spin\">\r\n                        Frame Rate\r\n                        <input\r\n                            type=\"number\"\r\n                            className={`${FramesKeyControlInput}`}\r\n                            value={actual_animation.key_controls.frame_rate}\r\n                            min={1}\r\n                            max={100}\r\n                            onKeyDown={(e) => {\r\n                                if (e.keyCode === 38 || e.keyCode === 40) {\r\n                                    e.preventDefault();\r\n                                }\r\n                            }}\r\n                            onChange={(e) => {\r\n                                change_key_controls({\r\n                                    ...actual_animation.key_controls,\r\n                                    frame_rate:\r\n                                        Number(e.target.value) > 199\r\n                                            ? 200\r\n                                            : Number(e.target.value) < 1\r\n                                            ? 1\r\n                                            : Number(e.target.value),\r\n                                });\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    {false && (\r\n                        <div className=\"d-flex align-items-center justify-content-between mb-1\">\r\n                            YoYo\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                checked={actual_animation.key_controls.yoyo}\r\n                                onChange={(e) => {\r\n                                    change_key_controls({\r\n                                        ...actual_animation.key_controls,\r\n                                        yoyo: e.target.value,\r\n                                    });\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FramesKeyControls;\r\n","import b64toBlob from '../../../../utils/b64toBlob';\r\nimport { GLOBAL_EVENT_ANIM, ObserverAnim } from '../../Observer';\r\nimport { propEq, find, findIndex } from 'ramda';\r\nimport { AddAnimationPayloadInterface } from '../../../../Redux/Actions/Animator/animation.list.action';\r\n\r\nexport default class RenderAnimationScene extends Phaser.Scene {\r\n    // El nombre por defecto del atlas\r\n    name_atlas: string = '';\r\n\r\n    animate_atlas!: Phaser.GameObjects.Sprite;\r\n    // El nombre de la animación por defecto (solo hay una en esta versión)\r\n    animation_name = 'default_tool_animation';\r\n    // Animación actual (para setear la animación)\r\n    actual_animation!: any;\r\n\r\n    // Esto nos ayuda a enviar el frame que se está ejecutando actualmente\r\n    actual_frame = '0';\r\n\r\n    // Pintamos la imagen para mostrar que no se puede animar\r\n    tint = 0xff0000;\r\n\r\n    constructor() {\r\n        super({ key: 'RenderAnimationScene' });\r\n    }\r\n\r\n    init() {\r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.RENDER.SET_ZOOM, (zoom_size: number) => {\r\n            this.scale.setZoom(zoom_size);\r\n            this.scale.refresh();\r\n            this.scale.updateScale();\r\n        });\r\n    }\r\n\r\n    preload() {\r\n        this.load.image('empty_frame', './assets/canvas-background.png');\r\n    }\r\n\r\n    create() {\r\n        this.registry.events.once(GLOBAL_EVENT_ANIM.RENDER.IMPORT_ATLAS, (atlas_object: any) => {\r\n            this.name_atlas = atlas_object.image.name;\r\n            this.load.atlas(\r\n                atlas_object.image.name,\r\n                URL.createObjectURL(b64toBlob(atlas_object.image.src)),\r\n                JSON.parse(atlas_object.json)\r\n            );\r\n            this.load.start();\r\n        });\r\n        this.load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n            // Configurar el tamaño máximo del lienzo\r\n            this.setCanvasSize();\r\n            this.animate_atlas = this.add\r\n                .sprite(this.scale.width / 2, this.scale.height / 2, this.name_atlas)\r\n                .setTint(this.tint);\r\n        });\r\n\r\n        // Se agrega o cambia animación actual\r\n        this.registry.events.on(\r\n            GLOBAL_EVENT_ANIM.RENDER.CHANGE_OR_CREATE_ANIMATION_CONTAINER,\r\n            (animation_in: any) => {\r\n                const actual_animation = find(\r\n                    propEq('id', animation_in.actual_animation),\r\n                    animation_in.animations\r\n                ) as AddAnimationPayloadInterface;\r\n                // Comprobamos si se ha creado una animación o no\r\n                if (actual_animation !== undefined) {\r\n                    this.create_animation(actual_animation);\r\n                    if (actual_animation.frames.length < 1) {\r\n                    }\r\n                }\r\n            }\r\n        );\r\n\r\n        this.registry.events.on(\r\n            GLOBAL_EVENT_ANIM.RENDER.ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER,\r\n            (animation_in: any) => {\r\n                const actual_animation = find(\r\n                    propEq('id', animation_in.actual_animation),\r\n                    animation_in.animations\r\n                );\r\n                if (actual_animation !== undefined) {\r\n                    this.create_animation(actual_animation);\r\n                }\r\n            }\r\n        );\r\n\r\n        // Observadores:\r\n        this.registry.events.on(GLOBAL_EVENT_ANIM.PLAY_STOP_CONTROL, (state: boolean) => {\r\n            if (!state) {\r\n                this.animate_atlas.anims.play(this.animation_name);\r\n            } else {\r\n                this.animate_atlas.anims.stop();\r\n            }\r\n        });\r\n    }\r\n\r\n    create_animation(animation_in: any) {\r\n        this.animate_atlas.anims.stop();\r\n        const frames_name =\r\n            animation_in !== undefined ? animation_in.frames.map((frame: any) => frame.name) : [];\r\n\r\n        const frames = this.anims.generateFrameNames(this.name_atlas, {\r\n            frames: frames_name,\r\n        });\r\n\r\n        this.anims.remove(this.animation_name);\r\n        this.anims.create({\r\n            key: this.animation_name,\r\n            frameRate: Number(animation_in.key_controls.frame_rate),\r\n            repeat: Number(animation_in.key_controls.repeat),\r\n            frames: frames,\r\n        });\r\n\r\n        this.actual_animation = this.anims.get(this.animation_name);\r\n\r\n        if (animation_in.play) {\r\n            this.animate_atlas.anims.play(this.animation_name);\r\n        }\r\n\r\n        if (this.actual_animation.frames.length >= 1) {\r\n            const frame_active_index = findIndex(propEq('active', true), animation_in.frames);\r\n            const verify_active_index = frame_active_index !== -1 ? frame_active_index : 0;\r\n\r\n            const newTexture = this.actual_animation.frames[verify_active_index].textureFrame;\r\n            this.animate_atlas.setTexture(this.name_atlas, newTexture);\r\n            this.animate_atlas.clearTint();\r\n        } else {\r\n            this.animate_atlas.setTint(this.tint);\r\n        }\r\n    }\r\n\r\n    setCanvasSize() {\r\n        const texturesKeys = Object.keys(this.textures.get(this.name_atlas).frames);\r\n        const size = texturesKeys.reduce(\r\n            (prev: any, current: any) => {\r\n                const actual_frame = this.textures.getFrame(this.name_atlas, current);\r\n                let output = prev;\r\n                if (current !== '__BASE') {\r\n                    output = {\r\n                        width: prev.width < actual_frame.width ? actual_frame.width : prev.width,\r\n                        height:\r\n                            prev.height < actual_frame.height ? actual_frame.height : prev.height,\r\n                    };\r\n                }\r\n                return output;\r\n            },\r\n            { width: 0, height: 0 }\r\n        );\r\n        this.scale.resize(size.width + 40, size.height + 40);\r\n    }\r\n\r\n    update() {\r\n        if (this.animate_atlas !== undefined) {\r\n            if (\r\n                this.animate_atlas.anims.isPlaying &&\r\n                this.actual_frame !== this.animate_atlas.frame.name\r\n            ) {\r\n                this.actual_frame = this.animate_atlas.frame.name;\r\n                const current_frame = this.animate_atlas.anims.currentFrame;\r\n                // Enviamos el ID generado por el current frame name y el index\r\n                const id_to_frame = `${current_frame.textureFrame}_${current_frame.index}`;\r\n                ObserverAnim.emit(GLOBAL_EVENT_ANIM.RENDER.UPDATE_FRAMES, id_to_frame);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import React, { Component, createRef } from 'react';\r\nimport RenderAnimationScene from './RenderAnimationScene';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport './RenderAnimation.scss';\r\nimport {\r\n    ZoomDataAnim,\r\n    setZoomAnimAction,\r\n} from '../../../../Redux/Actions/Animator/zoom.anim.action';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { ActionAnimationList } from '../../../../Redux/Reducers/Animator/animation.list.reducer';\r\n\r\ninterface propsData {\r\n    zoom: number;\r\n    setZoomAnimAction: (value: ZoomDataAnim) => void;\r\n    atlasAnim: any;\r\n    backgroundColor: string;\r\n    animationList: ActionAnimationList;\r\n}\r\n\r\nclass RenderAnimation extends Component<propsData> {\r\n    canvas_container: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    canvas: React.RefObject<HTMLDivElement> = createRef<HTMLDivElement>();\r\n    game_config: Phaser.Types.Core.GameConfig = {\r\n        width: 200,\r\n        height: 200,\r\n        parent: 'canvas-animation',\r\n        type: Phaser.WEBGL,\r\n        dom: {\r\n            createContainer: true,\r\n        },\r\n        banner: {\r\n            hidePhaser: true,\r\n        },\r\n        audio: {\r\n            noAudio: true,\r\n        },\r\n        render: {\r\n            transparent: true,\r\n            pixelArt: true,\r\n        },\r\n        scene: [RenderAnimationScene],\r\n    };\r\n    game!: Phaser.Game;\r\n\r\n    zoom_step = 20;\r\n\r\n    scrollBarAnimRef: any = createRef<any>();\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleWheel = this.handleWheel.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.game = new Phaser.Game(this.game_config);\r\n        this.canvas_container.current?.addEventListener('wheel', this.handleWheel, {\r\n            passive: false,\r\n        });\r\n    }\r\n\r\n    handleWheel(event: any): void {\r\n        if (event.ctrlKey) {\r\n            const zoom = this.props.zoom;\r\n            let value = zoom;\r\n            if (Math.abs(event.deltaY) >= 0) {\r\n                if (zoom >= 20 && zoom <= 500) {\r\n                    value = Number(\r\n                        (\r\n                            zoom -\r\n                            (this.zoom_step * event.deltaY) / Math.abs(event.deltaY)\r\n                        ).toPrecision(2)\r\n                    );\r\n                    value = value < 20 ? (value = 20) : value > 500 ? (value = 500) : value;\r\n                }\r\n            }\r\n            this.comprobateSize();\r\n            this.props.setZoomAnimAction({ value });\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(state: propsData) {\r\n        if (state.backgroundColor !== this.props.backgroundColor) {\r\n            this.game.scene?.getScene('RenderAnimationScene')?.cameras?.main?.setBackgroundColor(this.props.backgroundColor)\r\n        }\r\n\r\n        if (state.zoom !== this.props.zoom) {\r\n            const new_zoom: number = this.props.zoom / 100;\r\n            this.game.registry.events.emit(GLOBAL_EVENT_ANIM.RENDER.SET_ZOOM, new_zoom);\r\n        }\r\n\r\n        if (\r\n            state.atlasAnim.image !== this.props.atlasAnim.image ||\r\n            state.atlasAnim.json !== this.props.atlasAnim.json\r\n        ) {\r\n            if (!isEmpty(this.props.atlasAnim.image) && !isEmpty(this.props.atlasAnim.json)) {\r\n                this.game.registry.events.emit(\r\n                    GLOBAL_EVENT_ANIM.RENDER.IMPORT_ATLAS,\r\n                    this.props.atlasAnim\r\n                );\r\n            }\r\n        }\r\n\r\n        // Se cambia de animación y si no existe se crea un contenedor\r\n        if (state.animationList.actual_animation !== this.props.animationList.actual_animation) {\r\n            this.game.registry.events.emit(\r\n                GLOBAL_EVENT_ANIM.RENDER.CHANGE_OR_CREATE_ANIMATION_CONTAINER,\r\n                this.props.animationList\r\n            );\r\n        }\r\n\r\n        // Agregamos los frames\r\n        if (\r\n            state.animationList.animations !== this.props.animationList.animations &&\r\n            this.props.animationList.actual_animation !== '0'\r\n        ) {\r\n            this.game.registry.events.emit(\r\n                GLOBAL_EVENT_ANIM.RENDER.ADD_OR_REMOVE_FRAME_TO_ANIMATION_CONTAINER,\r\n                this.props.animationList\r\n            );\r\n        }\r\n\r\n        this.scrollBarAnimRef?.updateScroll();\r\n\r\n        this.game.scene\r\n            .getScene('RenderAnimationScene')\r\n            .load.once(Phaser.Loader.Events.COMPLETE, () => {\r\n                this.comprobateSize();\r\n            });\r\n    }\r\n\r\n    comprobateSize() {\r\n        const container_panel = document.querySelector('#center-anim-panel--up') as HTMLDivElement;\r\n        const canvas_width = this.canvas.current!.clientWidth || 0;\r\n        const canvas_height = this.canvas.current!.clientHeight || 0;\r\n\r\n        if (canvas_width > container_panel?.clientWidth) {\r\n            this.canvas.current?.classList.add('pl-2');\r\n            this.canvas.current?.querySelector('canvas')!.classList.add('mr-2');\r\n        } else {\r\n            this.canvas.current?.classList.remove('pl-2');\r\n            this.canvas.current?.querySelector('canvas')!.classList.remove('mr-2');\r\n        }\r\n        if (canvas_height > container_panel?.clientHeight) {\r\n            this.canvas.current!.style.paddingTop =\r\n                (canvas_height - container_panel?.clientHeight) / 2 + 20 + 'px';\r\n            this.canvas.current!.style.paddingBottom = 10 + 'px';\r\n            // this.canvas.current?.querySelector('canvas')?.classList.add('mt-4');\r\n        } else {\r\n            // this.canvas.current?.classList.remove('padding-100');\r\n            this.canvas.current!.style.paddingTop = '0px';\r\n            this.canvas.current!.style.paddingBottom = '0px';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const frames_list_state = this.props.animationList;\r\n        const frames_list = frames_list_state.animations.find(\r\n            (animation) => animation.id === frames_list_state.actual_animation\r\n        );\r\n\r\n        return (\r\n            <div\r\n                ref={this.canvas_container}\r\n                className={`render-animation-container d-flex justify-content-center align-items-center debug-white}`}\r\n            >\r\n                <PerfectScrollbar\r\n                    className=\"scrollContainerAnimator\"\r\n                    ref={(ref) => (this.scrollBarAnimRef = ref)}\r\n                >\r\n                    {frames_list === undefined || frames_list.frames.length < 1 ? (\r\n                        <div className=\"logo noselect\">\r\n                            <img\r\n                                src={require('../../../../Vendor/logo.gif')}\r\n                                alt=\"logo\"\r\n                                draggable={false}\r\n                                style={{\r\n                                    display:\r\n                                        frames_list === undefined || frames_list.frames.length < 1\r\n                                            ? 'block'\r\n                                            : 'none',\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    ) : null}\r\n                    <div\r\n                        id=\"canvas-animation\"\r\n                        ref={this.canvas}\r\n                        style={{\r\n                            display:\r\n                                frames_list === undefined || frames_list.frames.length < 1\r\n                                    ? 'none'\r\n                                    : 'block',\r\n                        }}\r\n                    ></div>\r\n                </PerfectScrollbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n    return {\r\n        zoom: state.zoomAnim.value,\r\n        backgroundColor: state.backgroundAnim.value,\r\n        atlasAnim: state.atlasAnim,\r\n        animationList: state.AnimationList,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    setZoomAnimAction,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RenderAnimation);\r\n","import b64toBlob from './b64toBlob';\r\nimport generateId from './generateId';\r\n\r\nclass GetImagesFromAtlasPhaser extends Phaser.Scene {\r\n    name_spritesheet = '';\r\n    constructor() {\r\n        super({ key: 'GetImagesFromAtlasPhaser' });\r\n    }\r\n    preload() {\r\n        const output: any = [];\r\n        let parent_id = '';\r\n        this.registry.events.on('CHARGE_ATLAS', (image_config: any) => {\r\n            parent_id = image_config.image.id;\r\n            this.name_spritesheet = image_config.image.name;\r\n            this.load.atlas(\r\n                this.name_spritesheet,\r\n                URL.createObjectURL(b64toBlob(image_config.image.src)),\r\n                JSON.parse(image_config.json)\r\n            );\r\n            this.load.start();\r\n        });\r\n\r\n        this.load.on(Phaser.Loader.Events.COMPLETE, () => {\r\n            const texturesKeys = Object.keys(this.textures.get(this.name_spritesheet).frames);\r\n            for (let i = 1; i < texturesKeys.length; i++) {\r\n                let name = texturesKeys[i];\r\n\r\n                const texture = this.textures.getFrame(this.name_spritesheet, name);\r\n                const textureB64 = this.textures.getBase64(this.name_spritesheet, name);\r\n                output.push({\r\n                    parent_id,\r\n                    id: generateId(),\r\n                    name,\r\n                    width: texture.width,\r\n                    height: texture.height,\r\n                    src: textureB64,\r\n                    origin: { x: 0.5, y: 0.5 },\r\n                });\r\n            }\r\n            this.registry.events.emit('ATLAS_COMPLETE', output);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Esta función nos ayudará a obtener un array de imágenes a partir de un atlas\r\n * @returns Promise(atlas_group)\r\n */\r\nconst getImagesFromAtlas = (image_config: any) => {\r\n    const divElement = document.createElement('div');\r\n    divElement.setAttribute('id', 'container_phase_spritesheet');\r\n    divElement.setAttribute('style', 'position: absolute;top: -2000px;visibility: hidden');\r\n    document.body.appendChild(divElement);\r\n    const game = new Phaser.Game({\r\n        width: 100,\r\n        height: 100,\r\n        type: Phaser.CANVAS,\r\n        banner: {\r\n            hidePhaser: true,\r\n        },\r\n        parent: 'container_phase_spritesheet',\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        render: {\r\n            pixelArt: true,\r\n        },\r\n        scene: [GetImagesFromAtlasPhaser],\r\n    });\r\n\r\n    game.events.on(Phaser.Scenes.Events.READY, () => {\r\n        game.registry.events.emit('CHARGE_ATLAS', image_config);\r\n    });\r\n\r\n    return new Promise((resolve) => {\r\n        game.events.on('ATLAS_COMPLETE', (atlas_group: any) => {\r\n            game.destroy(true);\r\n            document.body.removeChild(divElement);\r\n            resolve(atlas_group);\r\n        });\r\n    });\r\n};\r\n\r\nexport default getImagesFromAtlas;\r\n","import React, { useState } from 'react';\r\nimport Modal from 'react-responsive-modal';\r\nimport './ImportAtlasForm.scss';\r\nimport getFilesText from '../../../../utils/getFilesText';\r\nimport isPhaserAtlas from '../../../../utils/isPhaserAtlas';\r\nimport acceptFormatImages from '../../../../constants/acceptFormatImages';\r\nimport getImageFiles from '../../../../utils/getImages';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n    SetAtlasImageAnimAction,\r\n    SetAtlasJSONAnimAction,\r\n    ResetAtlasAction,\r\n} from '../../../../Redux/Actions/Animator/atlas.anim.action';\r\nimport { AddImage, ImageData } from '../../../../Redux/Actions/Atlas/images.action';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { isEmpty } from 'ramda';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport getImagesFromAtlas from '../../../../utils/getImagesFromAtlas';\r\n\r\nlet isImportComplete = true;\r\n\r\nconst ImportAtlasForm = () => {\r\n    let open_modal_import_atlas = true;\r\n    const [open_by_state, setOpen_by_state] = useState(false);\r\n\r\n    ObserverAnim.removeListener(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL);\r\n    ObserverAnim.on(GLOBAL_EVENT_ANIM.OPEN_ATLAS_IMPORT_MODAL, () => {\r\n        open_modal_import_atlas = true;\r\n        setOpen_by_state(true);\r\n    });\r\n\r\n    const atlas_state = useSelector((state: RootState) => state.atlasAnim);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleImportImage = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded: any = await getImageFiles(files);\r\n        dispatch(SetAtlasImageAnimAction(files_loaded[0]));\r\n    };\r\n\r\n    const handleImportAtlasJSON = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.target.files;\r\n        const files_loaded = await getFilesText(files);\r\n\r\n        if (isPhaserAtlas(files_loaded as string)) {\r\n            dispatch(SetAtlasJSONAnimAction(files_loaded as string));\r\n        } else {\r\n            ObserverAnim.emit(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR, 'Atlas json incorrect');\r\n        }\r\n    };\r\n\r\n    const handleCloseModalByX = () => {\r\n        setOpen_by_state(false);\r\n        dispatch(ResetAtlasAction());\r\n    };\r\n\r\n    const is_all_complete = async () => {\r\n        if (\r\n            !isEmpty(atlas_state.image) &&\r\n            !isEmpty(atlas_state.json) &&\r\n            !isImportComplete &&\r\n            isEmpty(atlas_state.animation)\r\n        ) {\r\n            isImportComplete = true;\r\n            const atlas_group = (await getImagesFromAtlas(atlas_state)) as ImageData[];\r\n            setOpen_by_state(false);\r\n            dispatch(AddImage(atlas_group));\r\n        }\r\n        if (isImportComplete) {\r\n            isImportComplete = false;\r\n        }\r\n    };\r\n\r\n    is_all_complete();\r\n\r\n    return (\r\n        <Modal\r\n            open={open_modal_import_atlas && open_by_state}\r\n            onClose={handleCloseModalByX}\r\n            closeOnOverlayClick={false}\r\n        >\r\n            <h3 className=\"noselect mt-3 mb-3 mx-5\">Import Atlas</h3>\r\n            <div className=\"import_animate_atlas\">\r\n                {isEmpty(atlas_state.image) ? (\r\n                    <button className=\"fileUpload mb-3\">\r\n                        Import Atlas Image\r\n                        <input\r\n                            type=\"file\"\r\n                            className=\"upload cursor-pointer uploadSprites\"\r\n                            onChange={handleImportImage}\r\n                            accept={acceptFormatImages.join(',')}\r\n                        />\r\n                    </button>\r\n                ) : (\r\n                    ''\r\n                )}\r\n                {isEmpty(atlas_state.json) ? (\r\n                    <button className=\"fileUpload\">\r\n                        Import Atlas JSON\r\n                        <input\r\n                            type=\"file\"\r\n                            className=\"upload cursor-pointer uploadSprites\"\r\n                            accept=\"application/json\"\r\n                            onChange={handleImportAtlasJSON}\r\n                        />\r\n                    </button>\r\n                ) : (\r\n                    ''\r\n                )}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default ImportAtlasForm;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n    CloseSideContextMenuAction,\r\n    ContextMenuData,\r\n} from '../../../../Redux/Actions/Atlas/contextSideMenu.action';\r\n\r\nimport './ContextMenu.style.scss';\r\nimport { RootState } from '../../../../Redux/Store/store';\r\nimport { DeleteAnimationAction } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\nimport { DeleteFrameAction } from '../../../../Redux/Actions/Animator/frames.list.action';\r\n\r\nlet cambio = true;\r\n\r\nconst ContextMenu = (props: any) => {\r\n    const sideMenuContext: ContextMenuData = useSelector(\r\n        (state: RootState) => state.contextSideMenuAtlas\r\n    );\r\n    const dispatch = useDispatch();\r\n\r\n    let fadeIn = cambio ? 'fadeIn' : 'fadeIn2';\r\n    let contextMenuClassName = `context-menu animated ${\r\n        sideMenuContext.active ? 'active ' + ((cambio = !cambio), fadeIn) : ''\r\n    }`;\r\n\r\n    const is_frames_secction =\r\n        sideMenuContext.options !== undefined && sideMenuContext.options.value === 'frames';\r\n    // Colocamos la posición, en el top se corrige\r\n\r\n    const positionXYMenu = {\r\n        top:\r\n            sideMenuContext.y + 80 > globalThis.innerHeight\r\n                ? `${sideMenuContext.y - 100}px`\r\n                : `${sideMenuContext.y}px`,\r\n        left:\r\n            sideMenuContext.x + 200 > globalThis.innerWidth\r\n                ? `${sideMenuContext.x - 200}px`\r\n                : `${sideMenuContext.x}px`,\r\n    };\r\n\r\n    const handleClickChangeName = () => {\r\n        ObserverAnim.emit(GLOBAL_EVENT_ANIM.EDIT_ANIM_NAME, sideMenuContext.id);\r\n        closeMenu();\r\n    };\r\n\r\n    const handleClickDelete = () => {\r\n        if (is_frames_secction) {\r\n            dispatch(DeleteFrameAction({ local_id: sideMenuContext.id }));\r\n        } else {\r\n            dispatch(DeleteAnimationAction({ id: sideMenuContext.id }));\r\n        }\r\n        closeMenu();\r\n    };\r\n\r\n    const closeMenu = () => {\r\n        dispatch(CloseSideContextMenuAction());\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={contextMenuClassName}\r\n            style={positionXYMenu}\r\n            onContextMenu={(e) => {\r\n                e.preventDefault();\r\n            }}\r\n        >\r\n            {!is_frames_secction && (\r\n                <div className=\"options\" onClick={handleClickChangeName}>\r\n                    Change Name\r\n                </div>\r\n            )}\r\n            <div className=\"options\" onClick={handleClickDelete}>\r\n                Delete {is_frames_secction ? 'frame' : 'animation'}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContextMenu;\r\n","import React, { Component } from 'react';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './ToastNotificationAnimation.scss';\r\nimport { ObserverAnim, GLOBAL_EVENT_ANIM } from '../../Observer';\r\n\r\nclass ToastNotificationAnimation extends Component {\r\n    componentDidMount() {\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.WARNING, (msg: string) => {\r\n            toast.warn(msg, {\r\n                className: 'toast-warn',\r\n                position: 'top-center',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n            });\r\n        });\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.ERROR, (msg: string) => {\r\n            toast.error(msg, {\r\n                className: 'toast-error',\r\n                position: 'top-center',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n            });\r\n        });\r\n        ObserverAnim.on(GLOBAL_EVENT_ANIM.NOTIFICATION_SYSTEM.CLEAR, () => {\r\n            toast.dismiss();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return <ToastContainer />;\r\n    }\r\n}\r\n\r\nexport default ToastNotificationAnimation;\r\n","import React from 'react';\r\nimport './ExportButton.style.scss';\r\nimport { useSelector } from 'react-redux';\r\nimport store, { RootState } from '../../../../Redux/Store/store';\r\nimport { AddAnimationPayloadInterface } from '../../../../Redux/Actions/Animator/animation.list.action';\r\nimport * as JSZIP from 'jszip';\r\n\r\nconst ExportButton = (props: any) => {\r\n    const JSZip = require('jszip');\r\n    const zip: JSZIP = new JSZip();\r\n    const animation_list = useSelector((state: RootState) => state.AnimationList);\r\n    const handleClick = async () => {\r\n        const atlas_name = store.getState().atlasAnim.image.name;\r\n        const anim_json = {\r\n            anims: animation_list.animations.map((animation: AddAnimationPayloadInterface) => {\r\n                return {\r\n                    key: animation.name,\r\n                    type: 'frames',\r\n                    repeat: animation.key_controls.repeat,\r\n                    frameRate: animation.key_controls.frame_rate,\r\n                    frames: animation.frames.map((frame: any) => {\r\n                        return {\r\n                            key: atlas_name,\r\n                            frame: frame.name,\r\n                        };\r\n                    }),\r\n                };\r\n            }),\r\n        };\r\n        zip.file(`${atlas_name}_anim.json`, JSON.stringify(anim_json, null, '    '));\r\n        const file = await zip.generateAsync({ type: 'blob' });\r\n        saveAs(file, `${atlas_name}_anim.zip`);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {animation_list.animations.length < 1 ? (\r\n                <button className={`save-export-disable noselect`}>{props.title}</button>\r\n            ) : (\r\n                <button className={`save-export noselect`} onClick={handleClick}>\r\n                    {props.title}\r\n                </button>\r\n            )}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default ExportButton;\r\n","import React, { createRef } from 'react';\r\nimport MenuComponent from './components/menu/Menu';\r\nimport './AnimationTool.scss';\r\nimport { SplitPane } from 'react-multi-split-pane';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n// Estilos\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport ImgList from './components/imgList/ImgList';\r\nimport AnimationList from './components/animationList/AnimationList';\r\nimport KeyTools from './components/keyTools/KeyTools';\r\nimport FramesKeyControls from './components/framesKeyControls/FramesKeyControls';\r\nimport { Frames } from './components/frames/Frames';\r\nimport RenderAnimation from './components/renderAnimation/RenderAnimation';\r\n\r\nimport ImportAtlasForm from './components/modals/ImportAtlasForm';\r\nimport ContextMenu from './components/contextMenu/ContextMenu';\r\nimport store from '../../Redux/Store/store';\r\nimport { CloseSideContextMenuAction } from '../../Redux/Actions/Atlas/contextSideMenu.action';\r\nimport { ResetAllAnimationAction } from '../../Redux/Actions/globals.actions';\r\nimport { connect } from 'react-redux';\r\nimport ToastNotificationAnimation from './components/notifications/ToastNotificationAnimation';\r\nimport { ObserverAnim } from './Observer';\r\nimport ExportButton from './components/exportButtons/ExportButton';\r\nimport PatreonModal from '../AtlasPacker/components/modals/patreonModal/PatreonModal';\r\n\r\nconst _scrollBarRef = createRef<any>();\r\n\r\nclass AnimationTool extends React.Component<{\r\n    CloseSideContextMenuAction: any;\r\n    ResetAllAnimationAction: () => {};\r\n}> {\r\n    constructor(props: { CloseSideContextMenuAction: any; ResetAllAnimationAction: () => {} }) {\r\n        super(props);\r\n\r\n        this.handleClickContainerAtlas = this.handleClickContainerAtlas.bind(this);\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        ObserverAnim.removeAllListeners();\r\n        this.props.ResetAllAnimationAction();\r\n    }\r\n\r\n    handleClickContainerAtlas() {\r\n        if (store.getState().contextSideMenuAtlas.active) {\r\n            this.props.CloseSideContextMenuAction();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div\r\n                    className=\"principal-anim-container\"\r\n                    onContextMenu={(event) => event.preventDefault()}\r\n                    onClickCapture={this.handleClickContainerAtlas}\r\n                    onDrop={(e) => e.preventDefault()}\r\n                    onDragOver={(e) => e.preventDefault()}\r\n                >\r\n                    <MenuComponent />\r\n                    <SplitPane\r\n                        split=\"vertical\"\r\n                        className=\"panels-anim-container\"\r\n                        defaultSizes={[20, 60, 20]}\r\n                        minSize={[200, 500, 200]}\r\n                        // onDragFinished={() => Observer.emit(GLOBAL_EVENT.PANEL_RESIZE_END)}\r\n                    >\r\n                        <div className=\"left-anim-panel\">\r\n                            <div className=\"left-anim-panel-image--container\">\r\n                                <PerfectScrollbar\r\n                                    options={{ suppressScrollX: true }}\r\n                                    ref={_scrollBarRef}\r\n                                    className=\"perfect_scroll_imglist\"\r\n                                >\r\n                                    <ImgList />\r\n                                </PerfectScrollbar>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"center-anim-panel\">\r\n                            <div className=\"center-anim-panel--up\" id=\"center-anim-panel--up\">\r\n                                <RenderAnimation />\r\n                            </div>\r\n                            <div className=\"center-anim-panel--down\">\r\n                                <KeyTools />\r\n                                <div className=\"frames-section--container d-flex justify-content-between align-items-center\">\r\n                                    <div className=\"frames-section\">\r\n                                        <Frames />\r\n                                    </div>\r\n                                    <div className=\"frames-key-control pl-2 mr-2\">\r\n                                        <FramesKeyControls />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"right-anim-panel\">\r\n                            <div className=\"right-anim-panel--up\">\r\n                                <div className=\"right-anim-panel-animationList--container\">\r\n                                    <PerfectScrollbar\r\n                                        options={{ suppressScrollX: true }}\r\n                                        ref={_scrollBarRef}\r\n                                    >\r\n                                        <AnimationList />\r\n                                    </PerfectScrollbar>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"right-anim-panel--down\">\r\n                                <ExportButton\r\n                                    title=\"Save animation\"\r\n                                    handleClick={() => {\r\n                                        alert('Exorta carallo');\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </SplitPane>\r\n                    <ContextMenu onUpdateSize={() => {}} />\r\n                </div>\r\n                <ImportAtlasForm />\r\n                <ToastNotificationAnimation />\r\n                <PatreonModal />\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    ResetAllAnimationAction,\r\n    CloseSideContextMenuAction,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(AnimationTool);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <Link to=\"/atlas-packer\">Atlas Packer</Link>\r\n            <br />\r\n            <Link to=\"/animation-tool\">Animation Tool</Link>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from 'react';\nimport { BrowserRouter, Route, Switch, HashRouter } from 'react-router-dom';\n\nimport { Provider } from 'react-redux';\n\nimport 'normalize.css';\nimport './App.scss';\nimport './Vendor/styles/bootstrap-utilities.min.css';\nimport store from './Redux/Store/store';\nimport AtlasPacker from './Views/AtlasPacker/AtlasPacker';\nimport AnimationTool from './Views/AnimationTool/AnimationTool';\n// import HomePage from './Views/HomePage';\nimport isElectron from 'is-electron';\nimport HomePage from './Views/HomePage';\n\nconst App: React.FC = () => {\n    return (\n        <Provider store={store}>\n            {isElectron() ? (\n                // Rutas electron\n                <HashRouter>\n                    <Route exact path=\"/atlas-packer\" component={AtlasPacker} />\n                    <Route exact path=\"/animation-tool\" component={AnimationTool} />\n                    <Route exact path=\"/\" component={HomePage} />\n                </HashRouter>\n            ) : (\n                // Rutas del navegador\n                <BrowserRouter>\n                    <Switch>\n                        {/* Rutas test */}\n                        {/* <Route exact path=\"/animator\" component={AnimationTool} /> */}\n                        {/* <Route exact path=\"/\" component={AtlasPacker} /> */}\n                        {/* Rutas producción web */}\n                        <Route exact path=\"/tool/animator\" component={AnimationTool} />\n                        <Route exact path=\"/tool/atlas-packer\" component={AtlasPacker} />\n                    </Switch>\n                </BrowserRouter>\n            )}\n        </Provider>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === '[::1]' ||\r\n        // 127.0.0.0/8 are considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service ' +\r\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\r\n                                'New content is available and will be used when all ' +\r\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n                            );\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.');\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error during service worker registration:', error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl, {\r\n        headers: { 'Service-Worker': 'script' },\r\n    })\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get('content-type');\r\n            if (\r\n                response.status === 404 ||\r\n                (contentType != null && contentType.indexOf('javascript') === -1)\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log('No internet connection found. App is running in offline mode.');\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAAoCAIAAAC95rUiAAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXRaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAzLTA0VDE0OjQyOjMwKzAxOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxZmEwMmQyLTcwMDYtYTI0My1iZDBkLTY0ZWFlZDI4MDVmZSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjQ5YjczM2I3LTZlN2EtZTI0OS05MGIxLTM2ZjUyNDFmZTAyZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmQyNTYyZmNlLTU0NTQtYTA0Ny04OGE0LTg4Y2JlZGM5YTM0NiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyNTYyZmNlLTU0NTQtYTA0Ny04OGE0LTg4Y2JlZGM5YTM0NiIgc3RFdnQ6d2hlbj0iMjAyMC0wMy0wNFQxNDo0MjozMCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMWZhMDJkMi03MDA2LWEyNDMtYmQwZC02NGVhZWQyODA1ZmUiIHN0RXZ0OndoZW49IjIwMjAtMDMtMDRUMTQ6NDI6MzArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1w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\"","module.exports = __webpack_public_path__ + \"static/media/logo.d7026897.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKQAAACkCAYAAAAZtYVBAAAC7ElEQVR42u3cvWoUYRSA4Qgh2dyDxcSdxvRKZtJM6wWojcRYKlqIBMV2DYKlV+EfauE1eAV2EQLxDmxV1j2BQIokBOfb9ZuZ54VTBcaznKcaN1lakiRJkiRJkiRJkiRJkiRJkiSpdx00TVFu3ZvmNLGTywy0701T5gYydnKZgbZf1+PcQMZOLgMkkAISSAEpIIEUkAISSAEpIIEUkAISSAEJJJBACkggBaSy7jBDkIdADrdXu6+zAxk7ucxAezT5NH724v30ycvPWczjvY8/YyeXGWi7kzdHIHOa2MllgARSQAIpIAUkkLpQDyfv1gPB070PR3MWkuOfz3vi34qdXKan7Zfl6kHTjE6bbxsbK19uP7h6Et7zydv/OrFD7BS7nbV3fCaX7WBxvNxeeif8cysjF+5YX6tqra8g47O5MJBACkgggQRSQAIJJJBa5GufosevfQqvfbpYX0G67IL7cf/W1Mx/SAMSSCANkEACCaQBEkgggTRAAgkkkAZIIOc+bQMSyGwwpkZJ2sBB/vr9B0gggQQSSCCB7A/I8756BiSQCwV5ke9DAgkkkEACCSSQQApIIIEEEkgggQQSSCCB9GIcSP91CCSQQALp+5BAAukb40D6nRe/UwMkkAISSCANkEACCaQBEkgggTRAAgkkkAZIIIEULEACCaSABBJIAySQQAJpgAQSSCANkEACCaQBEkggBSSQQAIpIIEE0gAJJJBAGiCBBBJIAySQQAJpgAQSSAEJJJBACkgggTRAAgkkkAZIIIEE0gAJJJBAGiCBBFLHXYIFyB7WLKc63Hq1fb3tNvGMdJCaZfftWuWN1VQAynq7ar3O7BnJQM4+mwN3rMvVzbVUAMbVnbrtPvGMVPvEZ3NhIIEUkEACCaSABBJIIAUkkEACKSCBFJACEkgBCSSQQApIIIE8FeTm3a3WIGfPAHLAFcXOKBWAK/XOtbb7xDNS7ROfzYUlSZIkSZIkSZIkSZIkSZIkSZL+ub9e8drVPL3AuQAAAABJRU5ErkJggg==\""],"sourceRoot":""}